!function(t,e){function r(t,e){if(t instanceof v)return t;if(t instanceof Element)return new v(t);if(void 0===t||null===t)return new v;if("string"!=typeof t)throw new Error("First parameter is invalid");if(e){if(!l(e))throw new Error("Second parameter is invalid");e=r(e)}else e=g;return a(e,t)}function n(){}function i(t,e){var r;return e?this.responseXML?this.responseXML:(r=new DOMParser,r.parseFromString(t,"application/xml")):(r=new XMLSerializer,r.serializeToString(t))}function s(t,e){return e.call(t,t)}function o(t,e){return t===e}function a(t,e){var r=new v;return t.forEach(function(t){r.push.apply(r,u(t,e))}),r}function u(t,e){return~e.indexOf(":")&&void 0!==S?(S===!1&&c(),e.match(S)?f(t,e):t.querySelectorAll(e)):t.querySelectorAll(e)}function f(t,e){for(var r,n,i=new v(t),s="",o=e.split(/\s+/);r=o.shift();)n=r.match(S),n?(s+=r.replace(S,"")||"*",r=new v,i.forEach(function(t){var e=new v;n.forEach(function(r){e.push.apply(e,b[r].call(t,s))}),r.push.apply(r,e)}),i=r,s=""):s+=r+" ";return s&&(r=new v,i.forEach(function(t){r.push.apply(r,t.querySelectorAll(s))}),i=r),i}function c(){var t=Object.keys(b).join("|").replace(/:/g,"");S=new RegExp(":("+t+")","g")}function l(t){return t instanceof v?!0:t instanceof Element?!0:"string"==typeof t?!0:void 0}function h(t){return function(){for(var e=0,r=this.length;r>e;e++)t.apply(this[e],arguments);return this}}function p(t){return function(){for(var e,r=0,n=this.length,i=new v;n>r;r++)e=t.apply(this[r],arguments),e&&(Array.isArray(e)&&e.length?i.push.apply(i,e):i.push(e));return i}}function d(t,e){for(var r=new v;t[e]&&1===t.nodeType;)t=t[e],r.push(t);return r}var v,m,g,y;try{y=e.createElement("iframe"),y.style.width=0,y.style.height=0,y.style.borderStyle="none",e.body.appendChild(y),v=y.contentWindow.Array,e.body.removeChild(y)}catch(w){v=Array}t.z=r,r.fn=v.prototype,m=r(t),g=r(e),r.fn.find=function(t){if("string"!=typeof t)throw new Error("First paramater of z#find() should be a string");return a(this,t)};var E,T,x={};E={method:"GET",requestType:"text",responseType:"text",url:t.location+"",query:null,data:null,setup:n,success:n,error:n},T={text:function(t){return(t||"")+""}},r.ajax=function(t){var e=new XMLHttpRequest;if(t=r.extend({context:e},E,t),!T[t.requestType])throw new Error("Invalid option `requestType`");if(!T[t.responseType])throw new Error("Invalid option `responseType`");t.query&&~["HEAD","GET"].indexOf(t.method.toUpperCase())&&(t.url+=~t.url.indexOf("?")?"&":"?",t.url+=r.queryString(t.query),t.url=t.url.replace(/(\?|&)&/g,"$1")),e.open(t.method,t.url,!0),e.onload=function(){var r;e.status>=200&&e.status<400?(r=T[t.responseType].call(e,e.responseText,!0),t.success.call(t.context,r)):t.error.call(t.context,e.status,e.statusText)},e.onerror=function(){t.error.call(t.context,e.status,e.statusText)},~["HEAD","GET"].indexOf(t.method.toUpperCase())||e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.data&&(t.data=T[t.requestType].call(e,t.data,!1)),t.setup.call(e,e),e.send(t.data)},E.requestType="detect",E.responseType="detect",r.registerAjaxType=function(t,e,r){r||"function"!=typeof e||(r=e,e=!1),T[t]=r,e&&(x[e]=t)},r.registerAjaxType("detect",function(t,e){var r,n="text";return e?(r=this.getResponseHeader("Content-Type")||"",r=r.split(";")[0].trim(),n=x[r]||"text"):t&&"object"==typeof t&&t.toString==={}.toString&&(n="json"),T[n].call(this,t,e)}),r.registerAjaxType("json","application/json",function(t,e){return e?JSON.parse(t):JSON.stringify(t)}),r.registerAjaxType("html","text/html",function(t,r){var n,i;return r?(i=new v,n=e.implementation.createHTMLDocument(),n.documentElement.innerHTML=t,i.push.apply(i,i.slice.call(n.body.children,0)),i):t.outerHTML}),r.registerAjaxType("xml","text/xml",i),r.registerAjaxType("xml","application/xml",i),r.fn.data="dataset"in e.body?function(t,e){var r,n;if(this.length){if(void 0===t)return this[0].dataset;if(void 0===e)return this[0].dataset[t];for(r=0,n=this.length;n>r;r++)this[r].dataset[t]=e;return this}}:function(t,e){var r,n,i="data-"+(t||"");if(this.length){if(void 0===t)return r={},[].forEach.call(this[0].attributes,function(t){return r[t.name]=t.value}),r;if(void 0===e)return this[0].attributes[i];for(r=0,n=this.length;n>r;r++)this[r].dataset[i]=e;return this}},r.data=function(t,e,n){r(t).data(e,n)},r.fn.on=r.fn.bind=h(function(t,e){this.addEventListener(t,e,!1)}),r.fn.off=r.fn.unbind=h(function(t,e){this.removeEventListener(t,e,!1)}),r.fn.trigger=function(t,r){var n,i=0,s=this.length;void 0===r&&(r={}),r.event=r;try{n=new CustomEvent(t,{detail:r})}catch(o){n=e.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)}for(;s>i;i++)this[i].dispatchEvent(n);return this},r.fn.is=function(){var t,r=e.body;return t=r.matches||r.matchesSelector||r.msMatchesSelector,t=t||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector,function(e){var r,n,i=0,a=this.length;switch(typeof e){case"string":r=t;break;case"function":r=s;break;case"object":if(!(e instanceof Element))throw new Error("First parameter of z#is is invalid");r=o;default:throw new Error("First parameter of z#is is invalid")}for(;a>i;i++)if(n=r(this[i],e))return n;return!1}}(),r.fn.hide=h(function(){return this.style.display="none",this}),r.fn.show=h(function(){return this.style.display="",this}),r.fn.clone=function(t){var e=0;for((void 0===t||null===t)&&(t=!1);e<this.length;e++)this[e]=this[e].cloneNode(t);return this},r.fn.html=function(t){var e,r;if(void 0===t)return this[0].innerHTML;for(e=0,r=this.length;r>e;e++)this[e].innerHTML=t;return this},r.fn.text=function(t){var e,r;if(void 0===t)return this.textContent;for(e=0,r=this.length;r>e;e++)this[e].textContent=t;return this},r.fn.getAttr=function(t){if(!t)throw new Error("First parameter of z#getAttr is required");return this[0]&&this[0].getAttribute(t)},r.fn.setAttr=h(function(t,e){if(!t)throw new Error("First parameter of z#setAttr is required");if(void 0===e)throw new Error("Second parameter of z#setAttr is required");return this.setAttribute(t,e),this}),r.fn.attr=function(t,e){return void 0===e?this.getAttr(t):(this.setAttr(t,e),this)},r.fn.replaceWith=r.fn.replace=h(function(t){if(void 0===t)throw new Error("First parameter of z#replace is required");this.outerHTML=t}),"classList"in e.documentElement?(r.fn.addClass=h(function(t){this.classList.add(t)}),r.fn.removeClass=h(function(t){this.classList.remove(t)}),r.fn.toggleClass=h(function(t,e){return void 0===e?void this.classList.toggle(t):void this.classList[e?"add":"remove"](t)})):(r.fn.addClass=h(function(t){this.className+=" "+t}),r.fn.removeClass=h(function(t){this.className+=this.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","g")," ")}),r.fn.toggleClass=function(t,e){return this[e?"addClass":"removeClass"](t),this}),r.fn.append=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("beforeend",t);return this}for(t instanceof v&&(t=t[0]);r>e;e++)this[e].appendChild(t);return this},r.fn.prepend=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#prepend is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("afterbegin",t);return this}for(t instanceof v&&(t=t[0]);r>e;e++)this[e].insertBefore(t,this[e].firstChild);return this},r.fn.after=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("afterend",t);return this}for(t instanceof v&&(t=t[0]);r>e;e++)this[e].insertAdjacentHTML("afterend",t.outerHTML);return this},r.fn.css=function(t,e){var r=0,n=this.length;if(void 0===t)throw new Error("First parameter of z#css is required.");if(void 0===e)return getComputedStyle(this[0])[t];for(t=t.replace(/-./g,function(t){return t.substr(1).toUpperCase()});n>r;r++)this[r].style[t]=e;return this},r.fn.remove=h(function(){this.parentNode.removeChild(this)}),r.fn.empty=h(function(){this.innerHTML=""});var S,b={};r.registerSelector=function(t,e){if(!t||"string"!=typeof t)throw new Error("First parameter of z#registerSelector must be a string selector");if(!e||"function"!=typeof e)throw new Error("Second parameter of z#registerSelector must be a function");":"!==t[0]&&(t=":"+t),S=!1,b[t]=e},r.registerSelector(":first",function(t){return r(this.querySelector(t))}),r.registerSelector(":input",function(){function t(t){return~e.indexOf(t.tagName)}var e="INPUT,TEXTAREA,SELECT,BUTTON".split(",");return function(e){var r=new v;return r.push.apply(r,[].filter.call(this.querySelectorAll(e),t)),r}}()),r.fn.parent=p(function(){return this.parentNode}),r.fn.next=p(function(){return this.nextElementSibling}),r.fn.prev=r.fn.previous=p(function(){return this.previousElementSibling}),r.fn.siblings=p(function(){return[].filter.call(this.parentNode.children,function(t){return t!==this},this)}),r.fn.prevAll=p(function(){return d(this,"previousElementSibling")}),r.deepExtend=function A(t){var e,r,n=2;for("object"==typeof t?(r=t||{},t=1/0):(t=t===!0?1/0:0|t,r=arguments[1]||{});n<arguments.length;n++)if(e=arguments[n])for(var i in e)e.hasOwnProperty(i)&&(t&&"object"==typeof e[i]?A(t-1,r[i],e[i]):r[i]=e[i]);return r},r.extend=function(){return[].unshift.call(arguments,0),r.deepExtend.apply(null,arguments)},r.fn.each=h(function(t){return t.call(this,this),this}),r.queryString=function(t,e){var n,i,s,o=[];for(n in t)t.hasOwnProperty(n)&&(i=e?e+"["+n+"]":n,s=t[n],o.push(s&&"object"==typeof s?r.queryString(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s)));return o.join("&")}}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiei5zbS5taW4uanMiLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJfYmFzZS5qcyIsImFqYXguanMiLCJhamF4X3R5cGVzLmpzIiwiZGF0YS5qcyIsImV2ZW50cy5qcyIsImZpbHRlcmluZy5qcyIsIm1hbmlwdWxhdGlvbi5qcyIsInNlbGVjdG9ycy5qcyIsInNlbGVjdG9yc19jdXN0b20uanMiLCJ0cmF2ZXJzaW5nLmpzIiwidXRpbHMuanMiLCJfZm9vdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQVVBLFNBQUEsRUFBQSxHQ1JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsWUFBQSxTQUNBLE1BQUEsSUFBQSxHQUFBLEVBQ0EsSUFBQSxTQUFBLEdBQUEsT0FBQSxFQUNBLE1BQUEsSUFBQSxFQUNBLElBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw2QkFHQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw4QkFHQSxHQUFBLEVBQUEsT0FFQSxHQUFBLENBR0EsT0FBQSxHQUFBLEVBQUEsR0FHQSxRQUFBLE1DK0JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLE9BQUEsR0FLQSxLQUFBLFlBQ0EsS0FBQSxhQUdBLEVBQUEsR0FBQSxXQUNBLEVBQUEsZ0JBQUEsRUFBQSxxQkFUQSxFQUFBLEdBQUEsZUFDQSxFQUFBLGtCQUFBLElDOURBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVDRkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQU1BLE9BSkEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxNQUdBLEVBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEVBQUEsUUFBQSxNQUFBLFNBQUEsR0FJQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLE1BQUEsR0FJQSxFQUFBLEVBQUEsR0FIQSxFQUFBLGlCQUFBLElBUkEsRUFBQSxpQkFBQSxHQWNBLFFBQUEsR0FBQSxFQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxPQUVBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxNQUFBLEdBRUEsR0FLQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsSUFDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBR0EsRUFBQSxFQUNBLEVBQUEsSUFsQkEsR0FBQSxFQUFBLEdBK0JBLE9BVkEsS0FDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxpQkFBQSxNQUdBLEVBQUEsR0FHQSxFQUdBLFFBQUEsS0FDQSxHQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLFFBQUEsS0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxJQUFBLEtDM0VBLFFBQUEsR0FBQSxHQUNBLE1BQUEsYUFBQSxJQUNBLEVBR0EsWUFBQSxVQUNBLEVBR0EsZ0JBQUEsSUFDQSxFQURBLE9BS0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxZQUlBLElBSEEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE9BRUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxNQUFBLEtBQUEsR0FBQSxVQUdBLE9BQUEsT0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFlBTUEsSUFMQSxHQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxXQUVBLElBQ0EsTUFBQSxRQUFBLElBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsR0FLQSxPQUFBLElBSUEsUUFBQSxHQUFBLEVBQUEsR0FHQSxJQUZBLEdBQUEsR0FBQSxHQUFBLEdBRUEsRUFBQSxJQUFBLElBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUdBLE9BQUEsR0oxREEsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQTRCQSxLQUNBLEVBQUEsRUFBQSxjQUFBLFVBRUEsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxZQUFBLE9BRUEsRUFBQSxLQUFBLFlBQUEsR0FFQSxFQUFBLEVBQUEsY0FBQSxNQUVBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsTUFBQSxHQUNBLEVBQUEsTUFJQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLGdCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsaURBR0EsT0FBQSxHQUFBLEtBQUEsR0t2REEsSUFBQSxHQUFBLEVBQ0EsSUFFQSxJQUNBLE9BQUEsTUFDQSxZQUFBLE9BQ0EsYUFBQSxPQUNBLElBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxLQUNBLEtBQUEsS0FDQSxNQUFBLEVBQ0EsUUFBQSxFQUNBLE1BQUEsR0FHQSxHQUNBLEtBQUEsU0FBQSxHQUNBLE9BQUEsR0FBQSxJQUFBLEtBSUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxHQUNBLEdBQUEsR0FBQSxlQU1BLElBSkEsRUFBQSxFQUFBLFFBQ0EsUUFBQSxHQUNBLEVBQUEsSUFFQSxFQUFBLEVBQUEsYUFDQSxLQUFBLElBQUEsT0FBQSwrQkFDQSxLQUFBLEVBQUEsRUFBQSxjQUNBLEtBQUEsSUFBQSxPQUFBLGdDQUdBLEdBQUEsU0FBQSxPQUFBLE9BQUEsUUFBQSxFQUFBLE9BQUEsaUJBQ0EsRUFBQSxNQUFBLEVBQUEsSUFBQSxRQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsUUFBQSxXQUFBLE9BR0EsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsR0FFQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEVBRUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxPQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxjQUFBLEdBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxRQUFBLElBRUEsRUFBQSxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLGFBSUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLGVBR0EsT0FBQSxPQUFBLFFBQUEsRUFBQSxPQUFBLGdCQUNBLEVBQUEsaUJBQUEsZUFBQSxvREFHQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxhQUFBLEtBQUEsRUFBQSxFQUFBLE1BQUEsSUFHQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxLQUFBLEVBQUEsT0pwRUEsRUFBQSxZQUFBLFNBQ0EsRUFBQSxhQUFBLFNBRUEsRUFBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsa0JBQUEsS0FDQSxFQUFBLEVBQ0EsR0FBQSxHQUdBLEVBQUEsR0FBQSxFQUVBLElBQ0EsRUFBQSxHQUFBLElBSUEsRUFBQSxpQkFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FDQSxFQUFBLE1BWUEsT0FWQSxJQUNBLEVBQUEsS0FBQSxrQkFBQSxpQkFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxJQUFBLFFBRUEsR0FBQSxnQkFBQSxJQUFBLEVBQUEsY0FBQSxXQUNBLEVBQUEsUUFJQSxFQUFBLEdBQUEsS0FBQSxLQUFBLEVBQUEsS0FHQSxFQUFBLGlCQUFBLE9BQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsVUFBQSxLQUdBLEVBQUEsaUJBQUEsT0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLE9BQUEsSUFJQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsZUFBQSxxQkFFQSxFQUFBLGdCQUFBLFVBQUEsRUFFQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsS0FBQSxTQUFBLElBRUEsR0FWQSxFQUFBLFlBYUEsRUFBQSxpQkFBQSxNQUFBLFdBQUEsR0FDQSxFQUFBLGlCQUFBLE1BQUEsa0JBQUEsR0t0REEsRUFBQSxHQUFBLEtBREEsV0FBQSxHQUFBLEtBQ0EsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxLQUFBLE9BQUEsQ0FJQSxHQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxPQUNBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFFBQUEsRUFHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsUUFBQSxHQUFBLENBR0EsT0FBQSxRQUdBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLEdBRUEsSUFBQSxLQUFBLE9BQUEsQ0FJQSxHQUFBLFNBQUEsRUFPQSxNQU5BLFNBRUEsUUFBQSxLQUFBLEtBQUEsR0FBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsUUFHQSxDQUNBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFdBQUEsRUFHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsUUFBQSxHQUFBLENBR0EsT0FBQSxRQUlBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxLQUFBLEVBQUEsSUNsREEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLGlCQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxvQkFBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLEdBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLFVBQUEsSUFDQSxNQUdBLEVBQUEsTUFBQSxDQUVBLEtBQ0EsRUFBQSxHQUFBLGFBQUEsR0FDQSxPQUFBLElBRUEsTUFBQSxHQUNBLEVBQUEsRUFBQSxZQUFBLGVBQ0EsRUFBQSxnQkFBQSxHQUFBLEdBQUEsRUFBQSxHQUdBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLGNBQUEsRUFHQSxPQUFBLE9MeEJBLEVBQUEsR0FBQSxHQUFBLFdBQ0EsR0FBQSxHQUNBLEVBQUEsRUFBQSxJQUtBLE9BSEEsR0FBQSxFQUFBLFNBQUEsRUFBQSxpQkFBQSxFQUFBLGtCQUNBLEVBQUEsR0FBQSxFQUFBLG9CQUFBLEVBQUEsdUJBQUEsRUFBQSxpQkFFQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLGNBQUEsSUFDQSxJQUFBLFNBQ0EsRUFBQSxDQUNBLE1BRUEsS0FBQSxXQUNBLEVBQUEsQ0FDQSxNQUVBLEtBQUEsU0FDQSxLQUFBLFlBQUEsVUFHQSxLQUFBLElBQUEsT0FBQSxxQ0FGQSxHQUFBLENBSUEsU0FDQSxLQUFBLElBQUEsT0FBQSxzQ0FJQSxLQUFBLEVBQUEsRUFBQSxJQUdBLEdBRkEsRUFBQSxFQUFBLEtBQUEsR0FBQSxHQUdBLE1BQUEsRUFJQSxRQUFBLE1NaERBLEVBQUEsR0FBQSxLQUFBLEVBQUEsV0FFQSxNQURBLE1BQUEsTUFBQSxRQUFBLE9BQ0EsT0FHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFdBRUEsTUFEQSxNQUFBLE1BQUEsUUFBQSxHQUNBLE9BR0EsRUFBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQU1BLE1BSkEsU0FBQSxHQUFBLE9BQUEsS0FDQSxHQUFBLEdBR0EsRUFBQSxLQUFBLE9BQUEsSUFDQSxLQUFBLEdBQUEsS0FBQSxHQUFBLFVBQUEsRUFHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFNBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFVBQUEsQ0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxXQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxZQUFBLENBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsT0FBQSxNQUFBLElBQUEsS0FBQSxHQUFBLGFBQUEsSUFHQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FDQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSw0Q0FJQSxPQURBLE1BQUEsYUFBQSxFQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsRUFDQSxLQUFBLFFBQUEsSUFHQSxLQUFBLFFBQUEsRUFBQSxHQUNBLE9BR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsTUFBQSxVQUFBLElBR0EsYUFBQSxHQUFBLGlCQUNBLEVBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsVUFBQSxJQUFBLEtBR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxVQUFBLE9BQUEsS0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxNQUNBLE1BQUEsVUFBQSxPQUFBLE9BSUEsTUFBQSxVQUFBLEVBQUEsTUFBQSxVQUFBLE9BR0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxXQUFBLElBQUEsSUFHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFdBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLFVBQUEsRUFBQSxVQUFBLEtBQUEsT0FHQSxFQUFBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FFQSxNQURBLE1BQUEsRUFBQSxXQUFBLGVBQUEsR0FDQSxPQUlBLEVBQUEsR0FBQSxPQUFBLFNBQUEsR0FDQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxJQUFBLGdCQUFBLEdBQUEsQ0FDQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxtQkFBQSxZQUFBLEVBR0EsT0FBQSxNQU9BLElBSkEsWUFBQSxLQUNBLEVBQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxZQUFBLEVBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSw0Q0FHQSxJQUFBLGdCQUFBLEdBQUEsQ0FDQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxtQkFBQSxhQUFBLEVBR0EsT0FBQSxNQU9BLElBSkEsWUFBQSxLQUNBLEVBQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxhQUFBLEVBQUEsS0FBQSxHQUFBLFdBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxNQUFBLFNBQUEsR0FDQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxJQUFBLGdCQUFBLEdBQUEsQ0FDQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxtQkFBQSxXQUFBLEVBR0EsT0FBQSxNQU9BLElBSkEsWUFBQSxLQUNBLEVBQUEsRUFBQSxJQUdBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxtQkFBQSxXQUFBLEVBQUEsVUFHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLElBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsSUFBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsd0NBR0EsSUFBQSxTQUFBLEVBQ0EsTUFBQSxrQkFBQSxLQUFBLElBQUEsRUFNQSxLQUpBLEVBQUEsRUFBQSxRQUFBLE1BQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxPQUFBLEdBQUEsZ0JBR0EsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLE1BQUEsR0FBQSxDQUlBLE9BQUEsT0FHQSxFQUFBLEdBQUEsT0FBQSxFQUFBLFdBQ0EsS0FBQSxXQUFBLFlBQUEsUUFHQSxFQUFBLEdBQUEsTUFBQSxFQUFBLFdBQ0EsS0FBQSxVQUFBLElMeE9BLElBQUEsR0FDQSxJTURBLEdBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLGdCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsa0VBQ0EsS0FBQSxHQUFBLGtCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsNERBR0EsT0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEdBR0EsR0FBQSxFQUNBLEVBQUEsR0FBQSxHQUdBLEVBQUEsaUJBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsY0FBQSxNQUdBLEVBQUEsaUJBQUEsU0FBQSxXQUdBLFFBQUEsR0FBQSxHQUNBLE9BQUEsRUFBQSxRQUFBLEVBQUEsU0FIQSxHQUFBLEdBQUEsK0JBQUEsTUFBQSxJQU1BLE9BQUEsVUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBSUEsT0FGQSxHQUFBLEtBQUEsTUFBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLGlCQUFBLEdBQUEsSUFFQSxPQy9CQSxFQUFBLEdBQUEsT0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLGFBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxXQUNBLE1BQUEsTUFBQSxxQkFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLHlCQUdBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FDQSxTQUFBLE9BQUEsS0FBQSxLQUFBLFdBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLE1BQ0EsUUFHQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFdBQ0EsTUFBQSxHQUFBLEtBQUEsNEJOMENBLEVBQUEsV0FBQSxRQUFBLEdBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLENBVUEsS0FSQSxnQkFBQSxJQUNBLEVBQUEsTUFDQSxFQUFBLE1BRUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLEVBQ0EsRUFBQSxVQUFBLFFBR0EsRUFBQSxVQUFBLE9BQUEsSUFHQSxHQUZBLEVBQUEsVUFBQSxHQU1BLElBQUEsR0FBQSxLQUFBLEdBQ0EsRUFBQSxlQUFBLEtBQ0EsR0FBQSxnQkFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsSUFFQSxFQUFBLEdBQUEsRUFBQSxHQU1BLE9BQUEsSUFHQSxFQUFBLE9BQUEsV0FFQSxTQURBLFFBQUEsS0FBQSxVQUFBLEdBQ0EsRUFBQSxXQUFBLE1BQUEsS0FBQSxZQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsU0FBQSxHQUVBLE1BREEsR0FBQSxLQUFBLEtBQUEsTUFDQSxPQUdBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUNBLElBRUEsS0FBQSxJQUFBLEdBQ0EsRUFBQSxlQUFBLEtBRUEsRUFEQSxFQUNBLEVBQUEsSUFBQSxFQUFBLElBRUEsRUFHQSxFQUFBLEVBQUEsR0FHQSxFQUFBLEtBREEsR0FBQSxnQkFBQSxHQUNBLEVBQUEsWUFBQSxFQUFBLEdBRUEsbUJBQUEsR0FBQSxJQUFBLG1CQUFBLElBS0EsT0FBQSxHQUFBLEtBQUEsT085SEEsT0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogei5qcyBKYXZhU2NyaXB0IExpYnJhcnkgdkBWRVJTSU9OXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTkVVUlMvei5qc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IE5FVVJTIExMQywgS2V2aW4gSi4gTWFydGluLCBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ORVVSUy96LmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqXG4gKiBEYXRlOiBAREFURVxuICovXG47KGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XG4iLCJ2YXIgekFycmF5LCBfd2luZG93LCBfZG9jdW1lbnQsIGlmcmFtZTtcblxuZnVuY3Rpb24geihlbGVtLCBzY29wZSkge1xuXHRpZiAoZWxlbSBpbnN0YW5jZW9mIHpBcnJheSkge1xuXHRcdHJldHVybiBlbGVtO1xuXHR9IGVsc2UgaWYgKGVsZW0gaW5zdGFuY2VvZiBFbGVtZW50KSB7XG5cdFx0cmV0dXJuIG5ldyB6QXJyYXkoZWxlbSk7XG5cdH0gZWxzZSBpZiAoZWxlbSA9PT0gdW5kZWZpbmVkIHx8IGVsZW0gPT09IG51bGwpIHtcblx0XHRyZXR1cm4gbmV3IHpBcnJheSgpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBlbGVtICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIGlzIGludmFsaWRcIik7XG5cdH1cblxuXHRpZiAoc2NvcGUpIHtcblx0XHRpZiAoIV9jaGVja1ZhbGlkRWxlbWVudChzY29wZSkpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBwYXJhbWV0ZXIgaXMgaW52YWxpZFwiKTtcblx0XHR9XG5cblx0XHRzY29wZSA9IHooc2NvcGUpO1xuXHR9IGVsc2Uge1xuXHRcdHNjb3BlID0gX2RvY3VtZW50O1xuXHR9XG5cblx0cmV0dXJuIF9maW5kKHNjb3BlLCBlbGVtKTtcbn1cblxuZnVuY3Rpb24gbm9vcCgpe31cblxudHJ5IHtcblx0aWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcblxuXHRpZnJhbWUuc3R5bGUud2lkdGhcdFx0XHQ9IDA7XG5cdGlmcmFtZS5zdHlsZS5oZWlnaHRcdFx0XHQ9IDA7XG5cdGlmcmFtZS5zdHlsZS5ib3JkZXJTdHlsZVx0PSBcIm5vbmVcIjtcblxuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XG5cblx0ekFycmF5ID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cuQXJyYXk7XG5cblx0ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpZnJhbWUpO1xufSBjYXRjaCAoZSkge1xuXHR6QXJyYXkgPSBBcnJheTtcbn1cblxuLy93aW5kb3cuJFx0PSB6O1xud2luZG93LnpcdD0gejtcbnouZm5cdFx0PSB6QXJyYXkucHJvdG90eXBlO1xuX3dpbmRvd1x0XHQ9IHood2luZG93KTtcbl9kb2N1bWVudFx0PSB6KGRvY3VtZW50KTtcblxuei5mbi5maW5kID0gZnVuY3Rpb24gKHN0ckVsZW0pIHtcblx0aWYgKHR5cGVvZiBzdHJFbGVtICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1hdGVyIG9mIHojZmluZCgpIHNob3VsZCBiZSBhIHN0cmluZ1wiKTtcblx0fVxuXG5cdHJldHVybiBfZmluZCh0aGlzLCBzdHJFbGVtKTtcbn07XG4iLCJ2YXIgYWpheERlZmF1bHRzLCBhamF4VHlwZXMsXG5cdGFqYXhNaW1lc1x0PSB7fVxuXG5hamF4RGVmYXVsdHMgPSB7XG5cdG1ldGhvZDogXCJHRVRcIixcblx0cmVxdWVzdFR5cGU6IFwidGV4dFwiLFxuXHRyZXNwb25zZVR5cGU6IFwidGV4dFwiLFxuXHR1cmw6IHdpbmRvdy5sb2NhdGlvbiArIFwiXCIsXG5cdHF1ZXJ5OiBudWxsLFxuXHRkYXRhOiBudWxsLFxuXHRzZXR1cDogbm9vcCxcblx0c3VjY2Vzczogbm9vcCxcblx0ZXJyb3I6IG5vb3Bcbn07XG5cbmFqYXhUeXBlcyA9IHtcblx0dGV4dDogZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRyZXR1cm4gKGRhdGEgfHwgXCJcIikgKyBcIlwiO1xuXHR9XG59O1xuXG56LmFqYXggPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHR2YXIgZGF0YSxcblx0XHRyZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHRvcHRpb25zID0gei5leHRlbmQoe1xuXHRcdGNvbnRleHQ6IHJlcVxuXHR9LCBhamF4RGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cdGlmICghYWpheFR5cGVzW29wdGlvbnMucmVxdWVzdFR5cGVdKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gYHJlcXVlc3RUeXBlYFwiKTtcblx0fSBlbHNlIGlmICghYWpheFR5cGVzW29wdGlvbnMucmVzcG9uc2VUeXBlXSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3B0aW9uIGByZXNwb25zZVR5cGVgXCIpO1xuXHR9XG5cblx0aWYgKG9wdGlvbnMucXVlcnkgJiYgfltcIkhFQURcIiwgXCJHRVRcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpKSkge1xuXHRcdG9wdGlvbnMudXJsXHQrPSB+b3B0aW9ucy51cmwuaW5kZXhPZihcIj9cIikgPyBcIiZcIiA6IFwiP1wiO1xuXHRcdG9wdGlvbnMudXJsXHQrPSB6LnF1ZXJ5U3RyaW5nKG9wdGlvbnMucXVlcnkpO1xuXHRcdG9wdGlvbnMudXJsXHQ9IG9wdGlvbnMudXJsLnJlcGxhY2UoLyhcXD98JikmL2csIFwiJDFcIik7XG5cdH1cblxuXHRyZXEub3BlbihvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIHRydWUpO1xuXG5cdHJlcS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHJlc3A7XG5cblx0XHRpZiAocmVxLnN0YXR1cyA+PSAyMDAgJiYgcmVxLnN0YXR1cyA8IDQwMCkge1xuXHRcdFx0cmVzcCA9IGFqYXhUeXBlc1tvcHRpb25zLnJlc3BvbnNlVHlwZV0uY2FsbChyZXEsIHJlcS5yZXNwb25zZVRleHQsIHRydWUpO1xuXHRcdFx0b3B0aW9ucy5zdWNjZXNzLmNhbGwob3B0aW9ucy5jb250ZXh0LCByZXNwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0b3B0aW9ucy5lcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgcmVxLnN0YXR1cywgcmVxLnN0YXR1c1RleHQpO1xuXHRcdH1cblx0fTtcblxuXHRyZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRvcHRpb25zLmVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCByZXEuc3RhdHVzLCByZXEuc3RhdHVzVGV4dCk7XG5cdH07XG5cblx0aWYgKCF+W1wiSEVBRFwiLCBcIkdFVFwiXS5pbmRleE9mKG9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCkpKSB7XG5cdFx0cmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIik7XG5cdH1cblxuXHRpZiAob3B0aW9ucy5kYXRhKSB7XG5cdFx0b3B0aW9ucy5kYXRhID0gYWpheFR5cGVzW29wdGlvbnMucmVxdWVzdFR5cGVdLmNhbGwocmVxLCBvcHRpb25zLmRhdGEsIGZhbHNlKTtcblx0fVxuXG5cdG9wdGlvbnMuc2V0dXAuY2FsbChyZXEsIHJlcSk7XG5cblx0cmVxLnNlbmQob3B0aW9ucy5kYXRhKTtcbn07XG4iLCJhamF4RGVmYXVsdHMucmVxdWVzdFR5cGVcdD0gXCJkZXRlY3RcIjtcbmFqYXhEZWZhdWx0cy5yZXNwb25zZVR5cGVcdD0gXCJkZXRlY3RcIjtcblxuei5yZWdpc3RlckFqYXhUeXBlID0gZnVuY3Rpb24gKHR5cGUsIG1pbWUsIGZuKSB7XG5cdGlmICghZm4gJiYgdHlwZW9mIG1pbWUgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdGZuXHRcdD0gbWltZTtcblx0XHRtaW1lXHQ9IGZhbHNlO1xuXHR9XG5cblx0YWpheFR5cGVzW3R5cGVdID0gZm47XG5cblx0aWYgKG1pbWUpIHtcblx0XHRhamF4TWltZXNbbWltZV0gPSB0eXBlO1xuXHR9XG59O1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJkZXRlY3RcIiwgZnVuY3Rpb24gKGRhdGEsIGlzUmVzcG9uc2UpIHtcblx0dmFyIGhlYWRlcixcblx0XHR0eXBlID0gXCJ0ZXh0XCI7XG5cblx0aWYgKGlzUmVzcG9uc2UpIHtcblx0XHRoZWFkZXJcdD0gdGhpcy5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSB8fCBcIlwiLFxuXHRcdGhlYWRlclx0PSBoZWFkZXIuc3BsaXQoXCI7XCIpWzBdLnRyaW0oKTtcblx0XHR0eXBlXHQ9IGFqYXhNaW1lc1toZWFkZXJdIHx8IFwidGV4dFwiO1xuXHR9IGVsc2Uge1xuXHRcdGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIGRhdGEudG9TdHJpbmcgPT09ICh7fSkudG9TdHJpbmcpIHtcblx0XHRcdHR5cGUgPSBcImpzb25cIjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYWpheFR5cGVzW3R5cGVdLmNhbGwodGhpcywgZGF0YSwgaXNSZXNwb25zZSk7XG59KTtcblxuei5yZWdpc3RlckFqYXhUeXBlKFwianNvblwiLCBcImFwcGxpY2F0aW9uL2pzb25cIiwgZnVuY3Rpb24gKGRhdGEsIGlzUmVzcG9uc2UpIHtcblx0cmV0dXJuIGlzUmVzcG9uc2UgPyBKU09OLnBhcnNlKGRhdGEpIDogSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG59KTtcblxuei5yZWdpc3RlckFqYXhUeXBlKFwiaHRtbFwiLCBcInRleHQvaHRtbFwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xuXHR2YXIgZG9jLCBhcnI7XG5cblx0aWYgKCFpc1Jlc3BvbnNlKSB7XG5cdFx0cmV0dXJuIGRhdGEub3V0ZXJIVE1MO1xuXHR9XG5cblx0YXJyXHQ9IG5ldyB6QXJyYXkoKTtcblx0ZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCk7XG5cblx0ZG9jLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSBkYXRhO1xuXG5cdGFyci5wdXNoLmFwcGx5KGFyciwgYXJyLnNsaWNlLmNhbGwoZG9jLmJvZHkuY2hpbGRyZW4sIDApKTtcblxuXHRyZXR1cm4gYXJyO1xufSk7XG5cbnoucmVnaXN0ZXJBamF4VHlwZShcInhtbFwiLCBcInRleHQveG1sXCIsIGFqYXhYTUxQYXJzZXIpO1xuei5yZWdpc3RlckFqYXhUeXBlKFwieG1sXCIsIFwiYXBwbGljYXRpb24veG1sXCIsIGFqYXhYTUxQYXJzZXIpO1xuXG5mdW5jdGlvbiBhamF4WE1MUGFyc2VyKGRhdGEsIGlzUmVzcG9uc2UpIHtcblx0dmFyIHBhcnNlcjtcblxuXHRpZiAoIWlzUmVzcG9uc2UpIHtcblx0XHRwYXJzZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xuXHRcdHJldHVybiBwYXJzZXIuc2VyaWFsaXplVG9TdHJpbmcoZGF0YSk7XG5cdH1cblxuXHRpZiAodGhpcy5yZXNwb25zZVhNTCkge1xuXHRcdHJldHVybiB0aGlzLnJlc3BvbnNlWE1MO1xuXHR9XG5cblx0cGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuXHRyZXR1cm4gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhkYXRhLCBcImFwcGxpY2F0aW9uL3htbFwiKTtcbn1cbiIsImlmIChcImRhdGFzZXRcIiBpbiBkb2N1bWVudC5ib2R5KSB7XG5cdHouZm4uZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdFx0dmFyIGksIGw7XG5cblx0XHRpZiAoIXRoaXMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpc1swXS5kYXRhc2V0O1xuXHRcdH0gZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIHRoaXNbMF0uZGF0YXNldFtrZXldO1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dGhpc1tpXS5kYXRhc2V0W2tleV0gPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcbn0gZWxzZSB7XG5cdHouZm4uZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdFx0dmFyIGksIGwsXG5cdFx0XHRkYXRhS2V5ID0gXCJkYXRhLVwiICsgKGtleSB8fCBcIlwiKTtcblxuXHRcdGlmICghdGhpcy5sZW5ndGgpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdGkgPSB7fTtcblxuXHRcdFx0W10uZm9yRWFjaC5jYWxsKHRoaXNbMF0uYXR0cmlidXRlcywgZnVuY3Rpb24gKGF0dHIpIHtcblx0XHRcdFx0cmV0dXJuIGlbYXR0ci5uYW1lXSA9IGF0dHIudmFsdWU7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGk7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpc1swXS5hdHRyaWJ1dGVzW2RhdGFLZXldO1xuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dGhpc1tpXS5kYXRhc2V0W2RhdGFLZXldID0gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG5cbnouZGF0YSA9IGZ1bmN0aW9uIChlbGVtLCBrZXksIHZhbHVlKSB7XG5cdHooZWxlbSkuZGF0YShrZXksIHZhbHVlKTtcbn07XG4iLCJ6LmZuLm9uID0gei5mbi5iaW5kID0gX2VhY2goZnVuY3Rpb24gX29uKGV2ZW50VHlwZSwgZm4pIHtcblx0dGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZm4sIGZhbHNlKTtcbn0pO1xuXG56LmZuLm9mZiA9IHouZm4udW5iaW5kID0gX2VhY2goZnVuY3Rpb24gX29mZihldmVudFR5cGUsIGZuKSB7XG5cdHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGZuLCBmYWxzZSk7XG59KTtcblxuei5mbi50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgZGF0YSkge1xuXHR2YXIgZXZlbnQsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdGlmIChkYXRhID09PSB1bmRlZmluZWQpIHtcblx0XHRkYXRhID0ge307XG5cdH1cblxuXHRkYXRhLmV2ZW50ID0gZGF0YTtcblxuXHR0cnkge1xuXHRcdGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwge1xuXHRcdFx0ZGV0YWlsOiBkYXRhXG5cdFx0fSk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG5cdFx0ZXZlbnQuaW5pdEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgdHJ1ZSwgdHJ1ZSwgZGF0YSk7XG5cdH1cblxuXHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdHRoaXNbaV0uZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG4iLCJmdW5jdGlvbiBfaXNXaXRoRnVuY3Rpb24oZWxlbSwgZm4pIHtcblx0cmV0dXJuIGZuLmNhbGwoZWxlbSwgZWxlbSk7XG59XG5cbmZ1bmN0aW9uIF9pc1dpdGhFbGVtZW50KGVsZW0xLCBlbGVtMikge1xuXHRyZXR1cm4gZWxlbTEgPT09IGVsZW0yO1xufVxuXG56LmZuLmlzID0gKGZ1bmN0aW9uIF9pcygpIHtcblx0dmFyIG1hdGNoZXMsXG5cdFx0Ym9keSA9IGRvY3VtZW50LmJvZHk7XG5cblx0bWF0Y2hlc1x0PSBib2R5Lm1hdGNoZXMgfHwgYm9keS5tYXRjaGVzU2VsZWN0b3IgfHwgYm9keS5tc01hdGNoZXNTZWxlY3Rvcjtcblx0bWF0Y2hlcyA9IG1hdGNoZXMgfHwgYm9keS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgYm9keS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgYm9keS5vTWF0Y2hlc1NlbGVjdG9yO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcblx0XHR2YXIgX2lzV2l0aCwgcmV0LFxuXHRcdFx0aVx0PSAwLFxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aDtcblxuXHRcdHN3aXRjaCAodHlwZW9mIHNlbGVjdG9yKSB7XG5cdFx0XHRjYXNlIFwic3RyaW5nXCI6XG5cdFx0XHRcdF9pc1dpdGggPSBtYXRjaGVzO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJmdW5jdGlvblwiOlxuXHRcdFx0XHRfaXNXaXRoID0gX2lzV2l0aEZ1bmN0aW9uO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJvYmplY3RcIjpcblx0XHRcdFx0aWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgRWxlbWVudCkge1xuXHRcdFx0XHRcdF9pc1dpdGggPSBfaXNXaXRoRWxlbWVudDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNpcyBpcyBpbnZhbGlkXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNpcyBpcyBpbnZhbGlkXCIpO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHJldCA9IF9pc1dpdGgodGhpc1tpXSwgc2VsZWN0b3IpO1xuXG5cdFx0XHRpZiAocmV0KSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xufSkoKTtcbiIsInouZm4uaGlkZSA9IF9lYWNoKGZ1bmN0aW9uIGhpZGUoKSB7XG5cdHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRyZXR1cm4gdGhpcztcbn0pO1xuXG56LmZuLnNob3cgPSBfZWFjaChmdW5jdGlvbiBzaG93KCkge1xuXHR0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRyZXR1cm4gdGhpcztcbn0pO1xuXG56LmZuLmNsb25lID0gZnVuY3Rpb24gKGRlZXApIHtcblx0dmFyIGkgPSAwO1xuXG5cdGlmIChkZWVwID09PSB1bmRlZmluZWQgfHwgZGVlcCA9PT0gbnVsbCkge1xuXHRcdGRlZXAgPSBmYWxzZTtcblx0fVxuXG5cdGZvciAoOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdHRoaXNbaV0gPSB0aGlzW2ldLmNsb25lTm9kZShkZWVwKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuei5mbi5odG1sID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdHZhciBpLCBsO1xuXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIHRoaXNbMF0uaW5uZXJIVE1MO1xuXHR9XG5cblx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5pbm5lckhUTUwgPSB2YWx1ZTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuei5mbi50ZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdHZhciBpLCBsO1xuXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIHRoaXMudGV4dENvbnRlbnQ7XG5cdH1cblxuXHRmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbnouZm4uZ2V0QXR0ciA9IGZ1bmN0aW9uIChrZXkpIHtcblx0aWYgKCFrZXkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNnZXRBdHRyIGlzIHJlcXVpcmVkXCIpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXNbMF0gJiYgdGhpc1swXS5nZXRBdHRyaWJ1dGUoa2V5KTtcbn07XG5cbnouZm4uc2V0QXR0ciA9IF9lYWNoKGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdGlmICgha2V5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojc2V0QXR0ciBpcyByZXF1aXJlZFwiKTtcblx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBvZiB6I3NldEF0dHIgaXMgcmVxdWlyZWRcIik7XG5cdH1cblxuXHR0aGlzLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcblx0cmV0dXJuIHRoaXM7XG59KTtcblxuei5mbi5hdHRyID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gdGhpcy5nZXRBdHRyKGtleSk7XG5cdH1cblxuXHR0aGlzLnNldEF0dHIoa2V5LCB2YWx1ZSk7XG5cdHJldHVybiB0aGlzO1xufTtcblxuei5mbi5yZXBsYWNlV2l0aCA9IHouZm4ucmVwbGFjZSA9IF9lYWNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3JlcGxhY2UgaXMgcmVxdWlyZWRcIik7XG5cdH1cblxuXHR0aGlzLm91dGVySFRNTCA9IHZhbHVlO1xufSk7XG5cbmlmIChcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHR6LmZuLmFkZENsYXNzID0gX2VhY2goZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdFx0dGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdH0pO1xuXG5cdHouZm4ucmVtb3ZlQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiByZW1vdmVDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0fSk7XG5cblx0ei5mbi50b2dnbGVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgZm9yY2UpIHtcblx0XHRpZiAoZm9yY2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5jbGFzc0xpc3RbZm9yY2UgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oY2xhc3NOYW1lKTtcblx0fSk7XG59IGVsc2Uge1xuXHR6LmZuLmFkZENsYXNzID0gX2VhY2goZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdFx0dGhpcy5jbGFzc05hbWUgKz0gXCIgXCIgKyBjbGFzc05hbWU7XG5cdH0pO1xuXG5cdHouZm4ucmVtb3ZlQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiByZW1vdmVDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTmFtZSArPSB0aGlzLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxcYilcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxifCQpXCIsIFwiZ1wiKSwgXCIgXCIpO1xuXHR9KTtcblxuXHR6LmZuLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSwgZm9yY2UpIHtcblx0XHR0aGlzW2ZvcmNlID8gXCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiXShjbGFzc05hbWUpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufVxuXG56LmZuLmFwcGVuZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHR2YXIgZWxlbWVudCxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNhcHBlbmQgaXMgcmVxdWlyZWQuXCIpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aWYgKHZhbHVlIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5hcHBlbmRDaGlsZCh2YWx1ZSk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn1cblxuei5mbi5wcmVwZW5kID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdHZhciBlbGVtZW50LFxuXHRcdGkgPSAwLFxuXHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3ByZXBlbmQgaXMgcmVxdWlyZWQuXCIpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHZhbHVlKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxuXG5cdGlmICh2YWx1ZSBpbnN0YW5jZW9mIHpBcnJheSkge1xuXHRcdHZhbHVlID0gdmFsdWVbMF07XG5cdH1cblxuXHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdHRoaXNbaV0uaW5zZXJ0QmVmb3JlKHZhbHVlLCB0aGlzW2ldLmZpcnN0Q2hpbGQpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59XG5cbnouZm4uYWZ0ZXIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGVsZW1lbnQsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojYXBwZW5kIGlzIHJlcXVpcmVkLlwiKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dGhpc1tpXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aWYgKHZhbHVlIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgdmFsdWUub3V0ZXJIVE1MKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufVxuXG56LmZuLmNzcyA9IGZ1bmN0aW9uIChydWxlLCB2YWx1ZSkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdGlmIChydWxlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNjc3MgaXMgcmVxdWlyZWQuXCIpO1xuXHR9XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdKVtydWxlXTtcblx0fSBlbHNlIHtcblx0XHRydWxlID0gcnVsZS5yZXBsYWNlKC8tLi9nLCBmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0ICAgIHJldHVybiByZXN1bHQuc3Vic3RyKDEpLnRvVXBwZXJDYXNlKCk7XG5cdFx0fSk7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dGhpc1tpXS5zdHlsZVtydWxlXSA9IHZhbHVlO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0aGlzO1xufVxuXG56LmZuLnJlbW92ZSA9IF9lYWNoKGZ1bmN0aW9uICgpIHtcblx0dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpO1xufSk7XG5cbnouZm4uZW1wdHkgPSBfZWFjaChmdW5jdGlvbiAoKSB7XG5cdHRoaXMuaW5uZXJIVE1MID0gJyc7XG59KTtcbiIsInZhciBfc2VsZWN0b3JzQ2FjaGUsXG5cdF9zZWxlY3RvcnMgPSB7fTtcblxuZnVuY3Rpb24gX2ZpbmQoc2NvcGUsIHN0ckVsZW0pIHtcblx0dmFyIHJldCA9IG5ldyB6QXJyYXkoKTtcblxuXHRzY29wZS5mb3JFYWNoKGZ1bmN0aW9uIF9maW5kRm9yRWFjaChzY29wZWRFbGVtKSB7XG5cdFx0cmV0LnB1c2guYXBwbHkocmV0LCBfc2VsZWN0KHNjb3BlZEVsZW0sIHN0ckVsZW0pKTtcblx0fSk7XG5cblx0cmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gX3NlbGVjdChzY29wZWRFbGVtLCBzdHJFbGVtKSB7XG5cdGlmICghfnN0ckVsZW0uaW5kZXhPZihcIjpcIikgfHwgX3NlbGVjdG9yc0NhY2hlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gc2NvcGVkRWxlbS5xdWVyeVNlbGVjdG9yQWxsKHN0ckVsZW0pO1xuXHR9XG5cblx0aWYgKF9zZWxlY3RvcnNDYWNoZSA9PT0gZmFsc2UpIHtcblx0XHRfZ2VuZXJhdGVTZWxlY3RvcnNDYWNoZSgpO1xuXHR9XG5cblx0aWYgKCFzdHJFbGVtLm1hdGNoKF9zZWxlY3RvcnNDYWNoZSkpIHtcblx0XHRyZXR1cm4gc2NvcGVkRWxlbS5xdWVyeVNlbGVjdG9yQWxsKHN0ckVsZW0pO1xuXHR9XG5cblx0cmV0dXJuIF9zZWxlY3QyKHNjb3BlZEVsZW0sIHN0ckVsZW0pO1xufVxuXG5mdW5jdGlvbiBfc2VsZWN0MihzY29wZWRFbGVtLCBzdHJFbGVtKSB7XG5cdHZhciBlbnRyeSwgc2VsZWN0b3JzLFxuXHRcdHNjb3BlXHQ9IG5ldyB6QXJyYXkoc2NvcGVkRWxlbSksXG5cdFx0Y3VycmVudFx0PSBcIlwiLFxuXHRcdGVudHJpZXNcdD0gc3RyRWxlbS5zcGxpdCgvXFxzKy8pO1xuXG5cdHdoaWxlIChlbnRyeSA9IGVudHJpZXMuc2hpZnQoKSkge1xuXHRcdHNlbGVjdG9ycyA9IGVudHJ5Lm1hdGNoKF9zZWxlY3RvcnNDYWNoZSk7XG5cblx0XHRpZiAoIXNlbGVjdG9ycykge1xuXHRcdFx0Y3VycmVudCArPSBlbnRyeSArIFwiIFwiO1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Y3VycmVudFx0Kz0gZW50cnkucmVwbGFjZShfc2VsZWN0b3JzQ2FjaGUsIFwiXCIpIHx8IFwiKlwiO1xuXHRcdGVudHJ5XHQ9IG5ldyB6QXJyYXkoKTtcblxuXHRcdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gX3NlbGVjdEZvckVhY2goc2NvcGVkRWxlbSkge1xuXHRcdFx0dmFyIHJldCA9IG5ldyB6QXJyYXkoKTtcblxuXHRcdFx0c2VsZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gc2VsZWN0b3JzRm9yRWFjaChzZWxlY3Rvcikge1xuXHRcdFx0XHRyZXQucHVzaC5hcHBseShyZXQsIF9zZWxlY3RvcnNbc2VsZWN0b3JdLmNhbGwoc2NvcGVkRWxlbSwgY3VycmVudCkpO1xuXHRcdFx0fSk7XG5cblx0XHRcdGVudHJ5LnB1c2guYXBwbHkoZW50cnksIHJldCk7XG5cdFx0fSk7XG5cblx0XHRzY29wZVx0PSBlbnRyeTtcblx0XHRjdXJyZW50XHQ9IFwiXCI7XG5cdH1cblxuXHRpZiAoY3VycmVudCkge1xuXHRcdGVudHJ5ID0gbmV3IHpBcnJheSgpO1xuXG5cdFx0c2NvcGUuZm9yRWFjaChmdW5jdGlvbiBjdXJyZW50Rm9yRWFjaChzY29wZWRFbGVtKSB7XG5cdFx0XHRlbnRyeS5wdXNoLmFwcGx5KGVudHJ5LCBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoY3VycmVudCkpO1xuXHRcdH0pO1xuXG5cdFx0c2NvcGUgPSBlbnRyeTtcblx0fVxuXG5cdHJldHVybiBzY29wZTtcbn1cblxuZnVuY3Rpb24gX2dlbmVyYXRlU2VsZWN0b3JzQ2FjaGUoKSB7XG5cdHZhciBzZWxlY3RvcnNcdD0gT2JqZWN0LmtleXMoX3NlbGVjdG9ycykuam9pbihcInxcIikucmVwbGFjZSgvOi9nLCBcIlwiKTtcblx0X3NlbGVjdG9yc0NhY2hlXHQ9IG5ldyBSZWdFeHAoXCI6KFwiICsgc2VsZWN0b3JzICsgXCIpXCIsIFwiZ1wiKTtcbn1cbiIsInoucmVnaXN0ZXJTZWxlY3RvciA9IGZ1bmN0aW9uIChzZWxlY3RvciwgZm4pIHtcblx0aWYgKCFzZWxlY3RvciB8fCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNyZWdpc3RlclNlbGVjdG9yIG11c3QgYmUgYSBzdHJpbmcgc2VsZWN0b3JcIik7XG5cdH0gZWxzZSBpZiAoIWZuIHx8IHR5cGVvZiBmbiAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBvZiB6I3JlZ2lzdGVyU2VsZWN0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuXHR9XG5cblx0aWYgKHNlbGVjdG9yWzBdICE9PSBcIjpcIikge1xuXHRcdHNlbGVjdG9yID0gXCI6XCIgKyBzZWxlY3Rvcjtcblx0fVxuXG5cdF9zZWxlY3RvcnNDYWNoZVx0XHRcdD0gZmFsc2U7XG5cdF9zZWxlY3RvcnNbc2VsZWN0b3JdXHQ9IGZuO1xufTtcblxuei5yZWdpc3RlclNlbGVjdG9yKFwiOmZpcnN0XCIsIGZ1bmN0aW9uIHNlbGVjdG9yRmlyc3QocXVlcnkpIHtcblx0cmV0dXJuIHoodGhpcy5xdWVyeVNlbGVjdG9yKHF1ZXJ5KSk7XG59KTtcblxuei5yZWdpc3RlclNlbGVjdG9yKFwiOmlucHV0XCIsIChmdW5jdGlvbiBzZWxlY3RvckZpcnN0KCkge1xuXHR2YXIgdGFncyA9IFwiSU5QVVQsVEVYVEFSRUEsU0VMRUNULEJVVFRPTlwiLnNwbGl0KFwiLFwiKTtcblxuXHRmdW5jdGlvbiBmaWx0ZXIoZWxlbWVudCkge1xuXHRcdHJldHVybiB+dGFncy5pbmRleE9mKGVsZW1lbnQudGFnTmFtZSk7XG5cdH1cblxuXHRyZXR1cm4gZnVuY3Rpb24gc2VsZWN0b3JJbnB1dChxdWVyeSkge1xuXHRcdHZhciBlbGVtZW50cyA9IG5ldyB6QXJyYXkoKTtcblxuXHRcdGVsZW1lbnRzLnB1c2guYXBwbHkoZWxlbWVudHMsIFtdLmZpbHRlci5jYWxsKHRoaXMucXVlcnlTZWxlY3RvckFsbChxdWVyeSksIGZpbHRlcikpO1xuXG5cdFx0cmV0dXJuIGVsZW1lbnRzO1xuXHR9O1xufSkoKSk7XG4iLCJ6LmZuLnBhcmVudCA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMucGFyZW50Tm9kZTtcbn0pO1xuXG56LmZuLm5leHQgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLm5leHRFbGVtZW50U2libGluZztcbn0pO1xuXG56LmZuLnByZXYgPSB6LmZuLnByZXZpb3VzID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xufSk7XG5cbnouZm4uc2libGluZ3MgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XG5cdHJldHVybiBbXS5maWx0ZXIuY2FsbCh0aGlzLnBhcmVudE5vZGUuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XG5cdFx0cmV0dXJuIGNoaWxkICE9PSB0aGlzO1xuXHR9LCB0aGlzKTtcbn0pO1xuXG56LmZuLnByZXZBbGwgPSBfZWFjaE5ldyhmdW5jdGlvbigpe1xuXHRyZXR1cm4gZGlyKHRoaXMsIFwicHJldmlvdXNFbGVtZW50U2libGluZ1wiKTtcbn0pO1xuIiwiZnVuY3Rpb24gX2NoZWNrVmFsaWRFbGVtZW50KGVsZW0pIHtcblx0aWYgKGVsZW0gaW5zdGFuY2VvZiB6QXJyYXkpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmIChlbGVtIGluc3RhbmNlb2YgRWxlbWVudCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cbn1cblxuZnVuY3Rpb24gX2VhY2goZm4pIHtcblx0cmV0dXJuIGZ1bmN0aW9uIHJ1bkVhY2goKSB7XG5cdFx0dmFyIGlcdD0gMCxcblx0XHRcdGxcdD0gdGhpcy5sZW5ndGg7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0Zm4uYXBwbHkodGhpc1tpXSwgYXJndW1lbnRzKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcbn1cblxuZnVuY3Rpb24gX2VhY2hOZXcoZm4pIHtcblx0cmV0dXJuIGZ1bmN0aW9uIHJ1bkVhY2goKSB7XG5cdFx0dmFyIHJldCxcblx0XHRcdGlcdD0gMCxcblx0XHRcdGxcdD0gdGhpcy5sZW5ndGgsXG5cdFx0XHRhcnJcdD0gbmV3IHpBcnJheSgpO1xuXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHJldCA9IGZuLmFwcGx5KHRoaXNbaV0sIGFyZ3VtZW50cyk7XG5cblx0XHRcdGlmIChyZXQpIHtcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocmV0KSAmJiByZXQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0YXJyLnB1c2guYXBwbHkoYXJyLCByZXQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGFyci5wdXNoKHJldCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBkaXIoZWxlbSwga2V5KSB7XG5cdHZhciBtYXRjaGVkID0gbmV3IHpBcnJheSgpO1xuXG5cdHdoaWxlIChlbGVtW2tleV0gJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSkge1xuXHRcdGVsZW0gPSBlbGVtW2tleV07XG5cdFx0bWF0Y2hlZC5wdXNoKGVsZW0pO1xuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59XG5cbnouZGVlcEV4dGVuZCA9IGZ1bmN0aW9uIF9leHRlbmQoZGVlcCkge1xuXHR2YXIgb2JqLCB0YXJnZXQsXG5cdFx0aSA9IDI7XG5cblx0aWYgKHR5cGVvZiBkZWVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0dGFyZ2V0XHQ9IGRlZXAgfHwge307XG5cdFx0ZGVlcFx0PSBJbmZpbml0eTtcblx0fSBlbHNlIHtcblx0XHRkZWVwXHQ9IGRlZXAgPT09IHRydWUgPyBJbmZpbml0eSA6IChkZWVwIHwgMCk7XG5cdFx0dGFyZ2V0XHQ9IGFyZ3VtZW50c1sxXSB8fCB7fTtcblx0fVxuXG5cdGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0b2JqID0gYXJndW1lbnRzW2ldO1xuXG5cdFx0aWYgKCFvYmopIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0XHRcdGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRpZiAoZGVlcCAmJiB0eXBlb2Ygb2JqW2tleV0gPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRfZXh0ZW5kKGRlZXAgLSAxLCB0YXJnZXRba2V5XSwgb2JqW2tleV0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRhcmdldFtrZXldID0gb2JqW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxuei5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFtdLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsIDApO1xuXHRyZXR1cm4gei5kZWVwRXh0ZW5kLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59O1xuXG56LmZuLmVhY2ggPSBfZWFjaChmdW5jdGlvbiBlYWNoKGZuKSB7XG5cdGZuLmNhbGwodGhpcywgdGhpcyk7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnoucXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAob2JqLCBwcmVmaXgpIHtcblx0dmFyIGksIGtleSwgdmFsLFxuXHRcdHN0cmluZ3MgPSBbXTtcblxuXHRmb3IgKGkgaW4gb2JqKSB7XG5cdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0aWYgKHByZWZpeCkge1xuXHRcdFx0XHRrZXkgPSBwcmVmaXggKyBcIltcIiArIGkgKyBcIl1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGtleSA9IGk7XG5cdFx0XHR9XG5cblx0XHRcdHZhbCA9IG9ialtpXTtcblxuXHRcdFx0aWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdHN0cmluZ3MucHVzaCh6LnF1ZXJ5U3RyaW5nKHZhbCwga2V5KSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdHJpbmdzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyaW5ncy5qb2luKFwiJlwiKTtcbn07XG4iLCJ9KSh3aW5kb3csIGRvY3VtZW50KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==