!function(t,e){function r(t,e){if(t instanceof d)return t;if(t instanceof EventTarget)return new d(t);if(void 0===t||null===t)return new d;if("string"!=typeof t)throw new Error("First parameter is invalid");if(e){if(!l(e))throw new Error("Second parameter is invalid");e=r(e)}else e=v;return a(e,t)}function n(){}function i(t,e){var r;return e?this.responseXML?this.responseXML:(r=new DOMParser,r.parseFromString(t,"application/xml")):(r=new XMLSerializer,r.serializeToString(t))}function o(t,e){return e.call(t,t)}function s(t,e){return t===e}function a(t,e){var r=new d;return t.forEach(function(t){r.push.apply(r,u(t,e))}),r}function u(t,e){return~e.indexOf(":")&&void 0!==T?(T===!1&&c(),e.match(T)?f(t,e):t.querySelectorAll(e)):t.querySelectorAll(e)}function f(t,e){for(var r,n,i=new d(t),o="",s=e.split(/\s+/);r=s.shift();)n=r.match(T),n?(o+=r.replace(T,"")||"*",r=new d,i.forEach(function(t){var e=new d;n.forEach(function(r){e.push.apply(e,S[r].call(t,o))}),r.push.apply(r,e)}),i=r,o=""):o+=r+" ";return o&&(r=new d,i.forEach(function(t){r.push.apply(r,t.querySelectorAll(o))}),i=r),i}function c(){var t=Object.keys(S).join("|").replace(/:/g,"");T=new RegExp(":("+t+")","g")}function l(t){return t instanceof d?!0:t instanceof EventTarget?!0:"string"==typeof t?!0:void 0}function h(t){return function(){for(var e=0,r=this.length;r>e;e++)t.apply(this[e],arguments);return this}}function p(t){return function(){for(var e,r=0,n=this.length,i=new d;n>r;r++)e=t.apply(this[r],arguments),e&&(Array.isArray(e)&&e.length?i.push.apply(i,e):i.push(e));return i}}var d,y,v,g;try{g=e.createElement("iframe"),g.style.width=0,g.style.height=0,g.style.borderStyle="none",e.body.appendChild(g),d=g.contentWindow.Array,e.body.removeChild(g)}catch(m){d=Array}t.z=r,r.fn=d.prototype,y=r(t),v=r(e),r.fn.find=function(t){if("string"!=typeof t)throw new Error("First paramater of z#find() should be a string");return a(this,t)};var w,E,x={};w={method:"GET",requestType:"text",responseType:"text",url:t.location+"",query:null,data:null,setup:n,success:n,error:n},E={text:function(t){return(t||"")+""}},r.ajax=function(t){var e=new XMLHttpRequest;if(t=r.extend({context:e},w,t),!E[t.requestType])throw new Error("Invalid option `requestType`");if(!E[t.responseType])throw new Error("Invalid option `responseType`");t.query&&~["HEAD","GET"].indexOf(t.method.toUpperCase())&&(t.url+=~t.url.indexOf("?")?"&":"?",t.url+=r.queryString(t.query),t.url=t.url.replace(/(\?|&)&/g,"$1")),e.open(t.method,t.url,!0),e.onload=function(){var r;e.status>=200&&e.status<400?(r=E[t.responseType].call(e,e.responseText,!0),t.success.call(t.context,r)):t.error.call(t.context,e.status,e.statusText)},e.onerror=function(){t.error.call(t.context,e.status,e.statusText)},~["HEAD","GET"].indexOf(t.method.toUpperCase())||e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.data&&(t.data=E[t.requestType].call(e,t.data,!1)),t.setup.call(e,e),e.send(t.data)},w.requestType="detect",w.responseType="detect",r.registerAjaxType=function(t,e,r){r||"function"!=typeof e||(r=e,e=!1),E[t]=r,e&&(x[e]=t)},r.registerAjaxType("detect",function(t,e){var r,n="text";return e?(r=this.getResponseHeader("Content-Type")||"",r=r.split(";")[0].trim(),n=x[r]||"text"):t&&"object"==typeof t&&t.toString==={}.toString&&(n="json"),E[n].call(this,t,e)}),r.registerAjaxType("json","application/json",function(t,e){return e?JSON.parse(t):JSON.stringify(t)}),r.registerAjaxType("html","text/html",function(t,r){var n,i;return r?(i=new d,n=e.implementation.createHTMLDocument(),n.documentElement.innerHTML=t,i.push.apply(i,i.slice.call(n.body.children,0)),i):t.outerHTML}),r.registerAjaxType("xml","text/xml",i),r.registerAjaxType("xml","application/xml",i),r.fn.data="dataset"in e.body?function(t,e){var r,n;if(this.length){if(void 0===t)return this[0].dataset;if(void 0===e)return this[0].dataset[t];for(r=0,n=this.length;n>r;r++)this[r].dataset[t]=e;return this}}:function(t,e){var r,n,i="data-"+(t||"");if(this.length){if(void 0===t)return r={},[].forEach.call(this[0].attributes,function(t){return r[t.name]=t.value}),r;if(void 0===e)return this[0].attributes[i];for(r=0,n=this.length;n>r;r++)this[r].dataset[i]=e;return this}},r.fn.on=r.fn.bind=h(function(t,e){this.addEventListener(t,e,!1)}),r.fn.off=r.fn.unbind=h(function(t,e){this.removeEventListener(t,e,!1)}),r.ready=r.fn.ready=function(t){var r=["interactive","loaded","complete"];return~r.indexOf(e.readyState)?setTimeout(t,0):e.addEventListener("DOMContentLoaded",t),this},r.fn.trigger=function(t,r){var n,i,o=0,s=this.length;try{i=r?{detail:r}:void 0,n=new CustomEvent(t,i)}catch(a){n=e.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)}for(;s>o;o++)this[o].dispatchEvent(n);return this},r.fn.is=function(){var t,r=e.body;return t=r.matches||r.matchesSelector||r.msMatchesSelector,t=t||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector,function(e){var r,n,i=0,a=this.length;switch(typeof e){case"string":r=t;break;case"function":r=o;break;case"object":if(!(e instanceof EventTarget))throw new Error("First parameter of z#is is invalid");r=s;default:throw new Error("First parameter of z#is is invalid")}for(;a>i;i++)if(n=r(this[i],e))return n;return!1}}(),r.fn.hide=h(function(){return this.style.display="none",this}),r.fn.show=h(function(){return this.style.display="",this}),r.fn.clone=function(t){var e=0;for((void 0===t||null===t)&&(t=!1);e<this.length;e++)this[e]=this[e].cloneNode(t);return this},r.fn.html=function(t){var e,r;if(void 0===t)return this.innerHTML;for(e=0,r=this.length;r>e;e++)this[e].innerHTML=t;return this},r.fn.text=function(t){var e,r;if(void 0===t)return this.textContent;for(e=0,r=this.length;r>e;e++)this[e].textContent=t;return this},r.fn.getAttr=function(t){if(!t)throw new Error("First parameter of z#getAttr is required");return this[0]&&this[0].getAttribute(t)},r.fn.setAttr=h(function(t,e){if(!t)throw new Error("First parameter of z#setAttr is required");if(void 0===e)throw new Error("Second parameter of z#setAttr is required");return this.setAttribute(t,e),this}),r.fn.attr=function(t,e){return void 0===e?this.getAttr(t):(this.setAttr(t,e),this)},r.fn.replaceWith=r.fn.replace=h(function(t){if(void 0===t)throw new Error("First parameter of z#replace is required");this.outerHTML=t}),"classList"in e.documentElement?(r.fn.addClass=h(function(t){this.classList.add(t)}),r.fn.removeClass=h(function(t){this.classList.remove(t)}),r.fn.toggleClass=h(function(t,e){return void 0===e?(this.classList.toggle(t),void 0):(this.classList[e?"add":"remove"](t),void 0)})):(r.fn.addClass=h(function(t){this.className+=" "+t}),r.fn.removeClass=h(function(t){this.className+=this.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","g")," ")}),r.fn.toggleClass=function(t,e){return this[e?"addClass":"removeClass"](t),this});var T,S={};r.registerSelector=function(t,e){if(!t||"string"!=typeof t)throw new Error("First parameter of z#registerSelector must be a string selector");if(!e||"function"!=typeof e)throw new Error("Second parameter of z#registerSelector must be a function");":"!==t[0]&&(t=":"+t),T=!1,S[t]=e},r.registerSelector(":first",function(t){return r(this.querySelector(t))}),r.registerSelector(":input",function(){function t(t){return~e.indexOf(t.tagName)}var e="INPUT,TEXTAREA,SELECT,BUTTON".split(",");return function(e){var r=new d;return r.push.apply(r,[].filter.call(this.querySelectorAll(e),t)),r}}()),r.fn.parent=p(function(){return this.parentNode}),r.fn.next=p(function(){return this.nextElementSibling}),r.fn.prev=r.fn.previous=p(function(){return this.previousElementSibling}),r.fn.siblings=p(function(){return[].filter.call(this.parentNode.children,function(t){return t!==this},this)}),r.deepExtend=function b(t){var e,r,n=2;for("object"==typeof t?(r=t||{},t=1/0):(t=t===!0?1/0:0|t,r=arguments[1]||{});n<arguments.length;n++)if(e=arguments[n])for(var i in e)e.hasOwnProperty(i)&&(t&&"object"==typeof e[i]?b(t-1,r[i],e[i]):r[i]=e[i]);return r},r.extend=function(){return[].unshift.call(arguments,0),r.deepExtend.apply(null,arguments)},r.fn.each=h(function(t){return t.call(this,this),this}),r.queryString=function(t,e){var r,n,i,o=[];for(r in t)t.hasOwnProperty(r)&&(n=e?e+"["+r+"]":r,i=t[r],i&&"object"==typeof i?o.push(queryString(i,n)):o.push(encodeURIComponent(n)+"="+encodeURIComponent(i)));return o.join("&")}}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJfYmFzZS5qcyIsImFqYXguanMiLCJhamF4X3R5cGVzLmpzIiwiZGF0YS5qcyIsImV2ZW50cy5qcyIsImZpbHRlcmluZy5qcyIsIm1hbmlwdWxhdGlvbi5qcyIsInNlbGVjdG9ycy5qcyIsInNlbGVjdG9yc19jdXN0b20uanMiLCJ0cmF2ZXJzaW5nLmpzIiwidXRpbHMuanMiLCJfZm9vdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQVVBLFNBQUEsRUFBQSxHQ1JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsWUFBQSxhQUNBLE1BQUEsSUFBQSxHQUFBLEVBQ0EsSUFBQSxTQUFBLEdBQUEsT0FBQSxFQUNBLE1BQUEsSUFBQSxFQUNBLElBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw2QkFHQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw4QkFHQSxHQUFBLEVBQUEsT0FFQSxHQUFBLENBR0EsT0FBQSxHQUFBLEVBQUEsR0FHQSxRQUFBLE1DK0JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLE9BQUEsR0FLQSxLQUFBLFlBQ0EsS0FBQSxhQUdBLEVBQUEsR0FBQSxXQUNBLEVBQUEsZ0JBQUEsRUFBQSxxQkFUQSxFQUFBLEdBQUEsZUFDQSxFQUFBLGtCQUFBLElDOURBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVDRkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQU1BLE9BSkEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxNQUdBLEVBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEVBQUEsUUFBQSxNQUFBLFNBQUEsR0FJQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLE1BQUEsR0FJQSxFQUFBLEVBQUEsR0FIQSxFQUFBLGlCQUFBLElBUkEsRUFBQSxpQkFBQSxHQWNBLFFBQUEsR0FBQSxFQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxPQUVBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxNQUFBLEdBRUEsR0FLQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsSUFDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBR0EsRUFBQSxFQUNBLEVBQUEsSUFsQkEsR0FBQSxFQUFBLEdBK0JBLE9BVkEsS0FDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxpQkFBQSxNQUdBLEVBQUEsR0FHQSxFQUdBLFFBQUEsS0FDQSxHQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLFFBQUEsS0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxJQUFBLEtDM0VBLFFBQUEsR0FBQSxHQUNBLE1BQUEsYUFBQSxJQUNBLEVBR0EsWUFBQSxjQUNBLEVBR0EsZ0JBQUEsSUFDQSxFQURBLE9BS0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxZQUlBLElBSEEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE9BRUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxNQUFBLEtBQUEsR0FBQSxVQUdBLE9BQUEsT0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFlBTUEsSUFMQSxHQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxXQUVBLElBQ0EsTUFBQSxRQUFBLElBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsR0FLQSxPQUFBLElKOUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0E0QkEsS0FDQSxFQUFBLEVBQUEsY0FBQSxVQUVBLEVBQUEsTUFBQSxNQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsWUFBQSxPQUVBLEVBQUEsS0FBQSxZQUFBLEdBRUEsRUFBQSxFQUFBLGNBQUEsTUFFQSxFQUFBLEtBQUEsWUFBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLE1BSUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxnQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLGlEQUdBLE9BQUEsR0FBQSxLQUFBLEdLdkRBLElBQUEsR0FBQSxFQUNBLElBRUEsSUFDQSxPQUFBLE1BQ0EsWUFBQSxPQUNBLGFBQUEsT0FDQSxJQUFBLEVBQUEsU0FBQSxHQUNBLE1BQUEsS0FDQSxLQUFBLEtBQ0EsTUFBQSxFQUNBLFFBQUEsRUFDQSxNQUFBLEdBR0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxPQUFBLEdBQUEsSUFBQSxLQUlBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsR0FDQSxHQUFBLEdBQUEsZUFNQSxJQUpBLEVBQUEsRUFBQSxRQUNBLFFBQUEsR0FDQSxFQUFBLElBRUEsRUFBQSxFQUFBLGFBQ0EsS0FBQSxJQUFBLE9BQUEsK0JBQ0EsS0FBQSxFQUFBLEVBQUEsY0FDQSxLQUFBLElBQUEsT0FBQSxnQ0FHQSxHQUFBLFNBQUEsT0FBQSxPQUFBLFFBQUEsRUFBQSxPQUFBLGlCQUNBLEVBQUEsTUFBQSxFQUFBLElBQUEsUUFBQSxLQUFBLElBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsT0FDQSxFQUFBLElBQUEsRUFBQSxJQUFBLFFBQUEsV0FBQSxPQUdBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLFdBQ0EsR0FBQSxFQUVBLEdBQUEsUUFBQSxLQUFBLEVBQUEsT0FBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsY0FBQSxHQUNBLEVBQUEsUUFBQSxLQUFBLEVBQUEsUUFBQSxJQUVBLEVBQUEsTUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxhQUlBLEVBQUEsUUFBQSxXQUNBLEVBQUEsTUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxlQUdBLE9BQUEsT0FBQSxRQUFBLEVBQUEsT0FBQSxnQkFDQSxFQUFBLGlCQUFBLGVBQUEsb0RBR0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsYUFBQSxLQUFBLEVBQUEsRUFBQSxNQUFBLElBR0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLE9KcEVBLEVBQUEsWUFBQSxTQUNBLEVBQUEsYUFBQSxTQUVBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLGtCQUFBLEtBQ0EsRUFBQSxFQUNBLEdBQUEsR0FHQSxFQUFBLEdBQUEsRUFFQSxJQUNBLEVBQUEsR0FBQSxJQUlBLEVBQUEsaUJBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQ0EsRUFBQSxNQVlBLE9BVkEsSUFDQSxFQUFBLEtBQUEsa0JBQUEsaUJBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLEdBQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxRQUVBLEdBQUEsZ0JBQUEsSUFBQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFFBSUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxFQUFBLEtBR0EsRUFBQSxpQkFBQSxPQUFBLG1CQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFVBQUEsS0FHQSxFQUFBLGlCQUFBLE9BQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsQ0FFQSxPQUFBLElBSUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLGVBQUEscUJBRUEsRUFBQSxnQkFBQSxVQUFBLEVBRUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsU0FBQSxJQUVBLEdBVkEsRUFBQSxZQWFBLEVBQUEsaUJBQUEsTUFBQSxXQUFBLEdBQ0EsRUFBQSxpQkFBQSxNQUFBLGtCQUFBLEdLdERBLEVBQUEsR0FBQSxLQURBLFdBQUEsR0FBQSxLQUNBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsS0FBQSxPQUFBLENBSUEsR0FBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLEdBQUEsT0FDQSxJQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxRQUFBLEVBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFFBQUEsR0FBQSxDQUdBLE9BQUEsUUFHQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxHQUVBLElBQUEsS0FBQSxPQUFBLENBSUEsR0FBQSxTQUFBLEVBT0EsTUFOQSxTQUVBLFFBQUEsS0FBQSxLQUFBLEdBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLFFBR0EsQ0FDQSxJQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxXQUFBLEVBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFFBQUEsR0FBQSxDQUdBLE9BQUEsUUM3Q0EsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLGlCQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxvQkFBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLE1BQUEsRUFBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsSUFBQSxjQUFBLFNBQUEsV0FRQSxRQU5BLEVBQUEsUUFBQSxFQUFBLFlBQ0EsV0FBQSxFQUFBLEdBRUEsRUFBQSxpQkFBQSxtQkFBQSxHQUdBLE1BR0EsRUFBQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLEtBQ0EsRUFBQSxHQUFBLE9BQUEsR0FBQSxPQUNBLEVBQUEsR0FBQSxhQUFBLEVBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLFlBQUEsZUFDQSxFQUFBLGdCQUFBLEdBQUEsR0FBQSxFQUFBLEdBR0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsY0FBQSxFQUdBLE9BQUEsT0w3QkEsRUFBQSxHQUFBLEdBQUEsV0FDQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLElBS0EsT0FIQSxHQUFBLEVBQUEsU0FBQSxFQUFBLGlCQUFBLEVBQUEsa0JBQ0EsRUFBQSxHQUFBLEVBQUEsb0JBQUEsRUFBQSx1QkFBQSxFQUFBLGlCQUVBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsY0FBQSxJQUNBLElBQUEsU0FDQSxFQUFBLENBQ0EsTUFFQSxLQUFBLFdBQ0EsRUFBQSxDQUNBLE1BRUEsS0FBQSxTQUNBLEtBQUEsWUFBQSxjQUdBLEtBQUEsSUFBQSxPQUFBLHFDQUZBLEdBQUEsQ0FJQSxTQUNBLEtBQUEsSUFBQSxPQUFBLHNDQUlBLEtBQUEsRUFBQSxFQUFBLElBR0EsR0FGQSxFQUFBLEVBQUEsS0FBQSxHQUFBLEdBR0EsTUFBQSxFQUlBLFFBQUEsTU1oREEsRUFBQSxHQUFBLEtBQUEsRUFBQSxXQUVBLE1BREEsTUFBQSxNQUFBLFFBQUEsT0FDQSxPQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsV0FFQSxNQURBLE1BQUEsTUFBQSxRQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBTUEsTUFKQSxTQUFBLEdBQUEsT0FBQSxLQUNBLEdBQUEsR0FHQSxFQUFBLEtBQUEsT0FBQSxJQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsVUFBQSxFQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLFNBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFVBQUEsQ0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxXQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxZQUFBLENBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsT0FBQSxNQUFBLElBQUEsS0FBQSxHQUFBLGFBQUEsSUFHQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FDQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSw0Q0FJQSxPQURBLE1BQUEsYUFBQSxFQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsRUFDQSxLQUFBLFFBQUEsSUFHQSxLQUFBLFFBQUEsRUFBQSxHQUNBLE9BR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsTUFBQSxVQUFBLElBR0EsYUFBQSxHQUFBLGlCQUNBLEVBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsVUFBQSxJQUFBLEtBR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxVQUFBLE9BQUEsS0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxHQUNBLEtBQUEsVUFBQSxPQUFBLEdBQ0EsU0FHQSxLQUFBLFVBQUEsRUFBQSxNQUFBLFVBQUEsR0FBQSxZQUdBLEVBQUEsR0FBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsV0FBQSxJQUFBLElBR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxXQUFBLEtBQUEsVUFBQSxRQUFBLEdBQUEsUUFBQSxVQUFBLEVBQUEsVUFBQSxLQUFBLE9BR0EsRUFBQSxHQUFBLFlBQUEsU0FBQSxFQUFBLEdBRUEsTUFEQSxNQUFBLEVBQUEsV0FBQSxlQUFBLEdBQ0EsTUxwSEEsSUFBQSxHQUNBLElNREEsR0FBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSxrRUFDQSxLQUFBLEdBQUEsa0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw0REFHQSxPQUFBLEVBQUEsS0FDQSxFQUFBLElBQUEsR0FHQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBR0EsRUFBQSxpQkFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxjQUFBLE1BR0EsRUFBQSxpQkFBQSxTQUFBLFdBR0EsUUFBQSxHQUFBLEdBQ0EsT0FBQSxFQUFBLFFBQUEsRUFBQSxTQUhBLEdBQUEsR0FBQSwrQkFBQSxNQUFBLElBTUEsT0FBQSxVQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFJQSxPQUZBLEdBQUEsS0FBQSxNQUFBLEtBQUEsT0FBQSxLQUFBLEtBQUEsaUJBQUEsR0FBQSxJQUVBLE9DL0JBLEVBQUEsR0FBQSxPQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEsYUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLHFCQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEseUJBR0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxXQUNBLFNBQUEsT0FBQSxLQUFBLEtBQUEsV0FBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsTUFDQSxRTm1DQSxFQUFBLFdBQUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxDQVVBLEtBUkEsZ0JBQUEsSUFDQSxFQUFBLE1BQ0EsRUFBQSxNQUVBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxFQUNBLEVBQUEsVUFBQSxRQUdBLEVBQUEsVUFBQSxPQUFBLElBR0EsR0FGQSxFQUFBLFVBQUEsR0FNQSxJQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsZUFBQSxLQUNBLEdBQUEsZ0JBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBRUEsRUFBQSxHQUFBLEVBQUEsR0FNQSxPQUFBLElBR0EsRUFBQSxPQUFBLFdBRUEsU0FEQSxRQUFBLEtBQUEsVUFBQSxHQUNBLEVBQUEsV0FBQSxNQUFBLEtBQUEsWUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFNBQUEsR0FFQSxNQURBLEdBQUEsS0FBQSxLQUFBLE1BQ0EsT0FHQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsRUFDQSxJQUVBLEtBQUEsSUFBQSxHQUNBLEVBQUEsZUFBQSxLQUVBLEVBREEsRUFDQSxFQUFBLElBQUEsRUFBQSxJQUVBLEVBR0EsRUFBQSxFQUFBLEdBRUEsR0FBQSxnQkFBQSxHQUNBLEVBQUEsS0FBQSxZQUFBLEVBQUEsSUFFQSxFQUFBLEtBQUEsbUJBQUEsR0FBQSxJQUFBLG1CQUFBLElBS0EsT0FBQSxHQUFBLEtBQUEsT09uSEEsT0FBQSIsImZpbGUiOiJ6LnNtLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiB6LmpzIEphdmFTY3JpcHQgTGlicmFyeSB2QFZFUlNJT05cclxuICogaHR0cHM6Ly9naXRodWIuY29tL05FVVJTL3ouanNcclxuICpcclxuICogQ29weXJpZ2h0IDIwMTQgTkVVUlMgTExDLCBLZXZpbiBKLiBNYXJ0aW4sIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ORVVSUy96LmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcclxuICpcclxuICogRGF0ZTogQERBVEVcclxuICovXHJcbjsoZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcclxuIiwidmFyIHpBcnJheSwgX3dpbmRvdywgX2RvY3VtZW50LCBpZnJhbWU7XHJcblxyXG5mdW5jdGlvbiB6KGVsZW0sIHNjb3BlKSB7XHJcblx0aWYgKGVsZW0gaW5zdGFuY2VvZiB6QXJyYXkpIHtcclxuXHRcdHJldHVybiBlbGVtO1xyXG5cdH0gZWxzZSBpZiAoZWxlbSBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XHJcblx0XHRyZXR1cm4gbmV3IHpBcnJheShlbGVtKTtcclxuXHR9IGVsc2UgaWYgKGVsZW0gPT09IHVuZGVmaW5lZCB8fCBlbGVtID09PSBudWxsKSB7XHJcblx0XHRyZXR1cm4gbmV3IHpBcnJheSgpO1xyXG5cdH0gZWxzZSBpZiAodHlwZW9mIGVsZW0gIT09IFwic3RyaW5nXCIpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBpcyBpbnZhbGlkXCIpO1xyXG5cdH1cclxuXHJcblx0aWYgKHNjb3BlKSB7XHJcblx0XHRpZiAoIV9jaGVja1ZhbGlkRWxlbWVudChzY29wZSkpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBpcyBpbnZhbGlkXCIpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNjb3BlID0geihzY29wZSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHNjb3BlID0gX2RvY3VtZW50O1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIF9maW5kKHNjb3BlLCBlbGVtKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbm9vcCgpe31cclxuXHJcbnRyeSB7XHJcblx0aWZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcclxuXHJcblx0aWZyYW1lLnN0eWxlLndpZHRoXHRcdFx0PSAwO1xyXG5cdGlmcmFtZS5zdHlsZS5oZWlnaHRcdFx0XHQ9IDA7XHJcblx0aWZyYW1lLnN0eWxlLmJvcmRlclN0eWxlXHQ9IFwibm9uZVwiO1xyXG5cclxuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGlmcmFtZSk7XHJcblxyXG5cdHpBcnJheSA9IGlmcmFtZS5jb250ZW50V2luZG93LkFycmF5O1xyXG5cclxuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XHJcbn0gY2F0Y2ggKGUpIHtcclxuXHR6QXJyYXkgPSBBcnJheTtcclxufVxyXG5cclxuLy93aW5kb3cuJFx0PSB6O1xyXG53aW5kb3cuelx0PSB6O1xyXG56LmZuXHRcdD0gekFycmF5LnByb3RvdHlwZTtcclxuX3dpbmRvd1x0XHQ9IHood2luZG93KTtcclxuX2RvY3VtZW50XHQ9IHooZG9jdW1lbnQpO1xyXG5cclxuei5mbi5maW5kID0gZnVuY3Rpb24gKHN0ckVsZW0pIHtcclxuXHRpZiAodHlwZW9mIHN0ckVsZW0gIT09IFwic3RyaW5nXCIpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtYXRlciBvZiB6I2ZpbmQoKSBzaG91bGQgYmUgYSBzdHJpbmdcIik7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gX2ZpbmQodGhpcywgc3RyRWxlbSk7XHJcbn07XHJcbiIsInZhciBhamF4RGVmYXVsdHMsIGFqYXhUeXBlcyxcclxuXHRhamF4TWltZXNcdD0ge31cclxuXHJcbmFqYXhEZWZhdWx0cyA9IHtcclxuXHRtZXRob2Q6IFwiR0VUXCIsXHJcblx0cmVxdWVzdFR5cGU6IFwidGV4dFwiLFxyXG5cdHJlc3BvbnNlVHlwZTogXCJ0ZXh0XCIsXHJcblx0dXJsOiB3aW5kb3cubG9jYXRpb24gKyBcIlwiLFxyXG5cdHF1ZXJ5OiBudWxsLFxyXG5cdGRhdGE6IG51bGwsXHJcblx0c2V0dXA6IG5vb3AsXHJcblx0c3VjY2Vzczogbm9vcCxcclxuXHRlcnJvcjogbm9vcFxyXG59O1xyXG5cclxuYWpheFR5cGVzID0ge1xyXG5cdHRleHQ6IGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRyZXR1cm4gKGRhdGEgfHwgXCJcIikgKyBcIlwiO1xyXG5cdH1cclxufTtcclxuXHJcbnouYWpheCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblx0dmFyIGRhdGEsXHJcblx0XHRyZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcblx0b3B0aW9ucyA9IHouZXh0ZW5kKHtcclxuXHRcdGNvbnRleHQ6IHJlcVxyXG5cdH0sIGFqYXhEZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG5cdGlmICghYWpheFR5cGVzW29wdGlvbnMucmVxdWVzdFR5cGVdKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBgcmVxdWVzdFR5cGVgXCIpO1xyXG5cdH0gZWxzZSBpZiAoIWFqYXhUeXBlc1tvcHRpb25zLnJlc3BvbnNlVHlwZV0pIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3B0aW9uIGByZXNwb25zZVR5cGVgXCIpO1xyXG5cdH1cclxuXHJcblx0aWYgKG9wdGlvbnMucXVlcnkgJiYgfltcIkhFQURcIiwgXCJHRVRcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpKSkge1xyXG5cdFx0b3B0aW9ucy51cmxcdCs9IH5vcHRpb25zLnVybC5pbmRleE9mKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XHJcblx0XHRvcHRpb25zLnVybFx0Kz0gei5xdWVyeVN0cmluZyhvcHRpb25zLnF1ZXJ5KTtcclxuXHRcdG9wdGlvbnMudXJsXHQ9IG9wdGlvbnMudXJsLnJlcGxhY2UoLyhcXD98JikmL2csIFwiJDFcIik7XHJcblx0fVxyXG5cclxuXHRyZXEub3BlbihvcHRpb25zLm1ldGhvZCwgb3B0aW9ucy51cmwsIHRydWUpO1xyXG5cclxuXHRyZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0dmFyIHJlc3A7XHJcblxyXG5cdFx0aWYgKHJlcS5zdGF0dXMgPj0gMjAwICYmIHJlcS5zdGF0dXMgPCA0MDApIHtcclxuXHRcdFx0cmVzcCA9IGFqYXhUeXBlc1tvcHRpb25zLnJlc3BvbnNlVHlwZV0uY2FsbChyZXEsIHJlcS5yZXNwb25zZVRleHQsIHRydWUpO1xyXG5cdFx0XHRvcHRpb25zLnN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlc3ApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0b3B0aW9ucy5lcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgcmVxLnN0YXR1cywgcmVxLnN0YXR1c1RleHQpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0b3B0aW9ucy5lcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgcmVxLnN0YXR1cywgcmVxLnN0YXR1c1RleHQpO1xyXG5cdH07XHJcblxyXG5cdGlmICghfltcIkhFQURcIiwgXCJHRVRcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpKSkge1xyXG5cdFx0cmVxLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIik7XHJcblx0fVxyXG5cclxuXHRpZiAob3B0aW9ucy5kYXRhKSB7XHJcblx0XHRvcHRpb25zLmRhdGEgPSBhamF4VHlwZXNbb3B0aW9ucy5yZXF1ZXN0VHlwZV0uY2FsbChyZXEsIG9wdGlvbnMuZGF0YSwgZmFsc2UpO1xyXG5cdH1cclxuXHJcblx0b3B0aW9ucy5zZXR1cC5jYWxsKHJlcSwgcmVxKTtcclxuXHJcblx0cmVxLnNlbmQob3B0aW9ucy5kYXRhKTtcclxufTtcclxuIiwiYWpheERlZmF1bHRzLnJlcXVlc3RUeXBlXHQ9IFwiZGV0ZWN0XCI7XHJcbmFqYXhEZWZhdWx0cy5yZXNwb25zZVR5cGVcdD0gXCJkZXRlY3RcIjtcclxuXHJcbnoucmVnaXN0ZXJBamF4VHlwZSA9IGZ1bmN0aW9uICh0eXBlLCBtaW1lLCBmbikge1xyXG5cdGlmICghZm4gJiYgdHlwZW9mIG1pbWUgPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0Zm5cdFx0PSBtaW1lO1xyXG5cdFx0bWltZVx0PSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGFqYXhUeXBlc1t0eXBlXSA9IGZuO1xyXG5cclxuXHRpZiAobWltZSkge1xyXG5cdFx0YWpheE1pbWVzW21pbWVdID0gdHlwZTtcclxuXHR9XHJcbn07XHJcblxyXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJkZXRlY3RcIiwgZnVuY3Rpb24gKGRhdGEsIGlzUmVzcG9uc2UpIHtcclxuXHR2YXIgaGVhZGVyLFxyXG5cdFx0dHlwZSA9IFwidGV4dFwiO1xyXG5cclxuXHRpZiAoaXNSZXNwb25zZSkge1xyXG5cdFx0aGVhZGVyXHQ9IHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikgfHwgXCJcIixcclxuXHRcdGhlYWRlclx0PSBoZWFkZXIuc3BsaXQoXCI7XCIpWzBdLnRyaW0oKTtcclxuXHRcdHR5cGVcdD0gYWpheE1pbWVzW2hlYWRlcl0gfHwgXCJ0ZXh0XCI7XHJcblx0fSBlbHNlIHtcclxuXHRcdGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIGRhdGEudG9TdHJpbmcgPT09ICh7fSkudG9TdHJpbmcpIHtcclxuXHRcdFx0dHlwZSA9IFwianNvblwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIGFqYXhUeXBlc1t0eXBlXS5jYWxsKHRoaXMsIGRhdGEsIGlzUmVzcG9uc2UpO1xyXG59KTtcclxuXHJcbnoucmVnaXN0ZXJBamF4VHlwZShcImpzb25cIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGZ1bmN0aW9uIChkYXRhLCBpc1Jlc3BvbnNlKSB7XHJcblx0cmV0dXJuIGlzUmVzcG9uc2UgPyBKU09OLnBhcnNlKGRhdGEpIDogSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn0pO1xyXG5cclxuei5yZWdpc3RlckFqYXhUeXBlKFwiaHRtbFwiLCBcInRleHQvaHRtbFwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xyXG5cdHZhciBkb2MsIGFycjtcclxuXHJcblx0aWYgKCFpc1Jlc3BvbnNlKSB7XHJcblx0XHRyZXR1cm4gZGF0YS5vdXRlckhUTUw7XHJcblx0fVxyXG5cclxuXHRhcnJcdD0gbmV3IHpBcnJheSgpO1xyXG5cdGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpO1xyXG5cclxuXHRkb2MuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGRhdGE7XHJcblxyXG5cdGFyci5wdXNoLmFwcGx5KGFyciwgYXJyLnNsaWNlLmNhbGwoZG9jLmJvZHkuY2hpbGRyZW4sIDApKTtcclxuXHJcblx0cmV0dXJuIGFycjtcclxufSk7XHJcblxyXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJ4bWxcIiwgXCJ0ZXh0L3htbFwiLCBhamF4WE1MUGFyc2VyKTtcclxuei5yZWdpc3RlckFqYXhUeXBlKFwieG1sXCIsIFwiYXBwbGljYXRpb24veG1sXCIsIGFqYXhYTUxQYXJzZXIpO1xyXG5cclxuZnVuY3Rpb24gYWpheFhNTFBhcnNlcihkYXRhLCBpc1Jlc3BvbnNlKSB7XHJcblx0dmFyIHBhcnNlcjtcclxuXHJcblx0aWYgKCFpc1Jlc3BvbnNlKSB7XHJcblx0XHRwYXJzZXIgPSBuZXcgWE1MU2VyaWFsaXplcigpO1xyXG5cdFx0cmV0dXJuIHBhcnNlci5zZXJpYWxpemVUb1N0cmluZyhkYXRhKTtcclxuXHR9XHJcblxyXG5cdGlmICh0aGlzLnJlc3BvbnNlWE1MKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZVhNTDtcclxuXHR9XHJcblxyXG5cdHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuXHRyZXR1cm4gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhkYXRhLCBcImFwcGxpY2F0aW9uL3htbFwiKTtcclxufVxyXG4iLCJpZiAoXCJkYXRhc2V0XCIgaW4gZG9jdW1lbnQuYm9keSkge1xyXG5cdHouZm4uZGF0YSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcblx0XHR2YXIgaSwgbDtcclxuXHJcblx0XHRpZiAoIXRoaXMubGVuZ3RoKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXNbMF0uZGF0YXNldDtcclxuXHRcdH0gZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpc1swXS5kYXRhc2V0W2tleV07XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHRcdHRoaXNbaV0uZGF0YXNldFtrZXldID0gdmFsdWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fTtcclxufSBlbHNlIHtcclxuXHR6LmZuLmRhdGEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG5cdFx0dmFyIGksIGwsXHJcblx0XHRcdGRhdGFLZXkgPSBcImRhdGEtXCIgKyAoa2V5IHx8IFwiXCIpO1xyXG5cclxuXHRcdGlmICghdGhpcy5sZW5ndGgpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRpID0ge307XHJcblxyXG5cdFx0XHRbXS5mb3JFYWNoLmNhbGwodGhpc1swXS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoYXR0cikge1xyXG5cdFx0XHRcdHJldHVybiBpW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBpO1xyXG5cdFx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzWzBdLmF0dHJpYnV0ZXNbZGF0YUtleV07XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHRcdHRoaXNbaV0uZGF0YXNldFtkYXRhS2V5XSA9IHZhbHVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH07XHJcbn1cclxuIiwiei5mbi5vbiA9IHouZm4uYmluZCA9IF9lYWNoKGZ1bmN0aW9uIF9vbihldmVudFR5cGUsIGZuKSB7XHJcblx0dGhpcy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZm4sIGZhbHNlKTtcclxufSk7XHJcblxyXG56LmZuLm9mZiA9IHouZm4udW5iaW5kID0gX2VhY2goZnVuY3Rpb24gX29mZihldmVudFR5cGUsIGZuKSB7XHJcblx0dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZm4sIGZhbHNlKTtcclxufSk7XHJcblxyXG56LnJlYWR5ID0gei5mbi5yZWFkeSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgdmFyIHN0YXRlcyA9IFtcImludGVyYWN0aXZlXCIsIFwibG9hZGVkXCIsIFwiY29tcGxldGVcIl07XHJcblxyXG4gICAgaWYgKH5zdGF0ZXMuaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKSkge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZm4pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuei5mbi50cmlnZ2VyID0gZnVuY3Rpb24gKGV2ZW50VHlwZSwgZGF0YSkge1xyXG5cdHZhciBldmVudCwgX2RhdGEsXHJcblx0XHRpID0gMCxcclxuXHRcdGwgPSB0aGlzLmxlbmd0aDtcclxuXHJcblx0dHJ5IHtcclxuXHRcdF9kYXRhXHQ9IGRhdGEgPyB7ZGV0YWlsOiBkYXRhfSA6IHVuZGVmaW5lZDtcclxuXHRcdGV2ZW50XHQ9IG5ldyBDdXN0b21FdmVudChldmVudFR5cGUsIF9kYXRhKTtcclxuXHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdGV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcblx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCBkYXRhKTtcclxuXHR9XHJcblxyXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHR0aGlzW2ldLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4iLCJmdW5jdGlvbiBfaXNXaXRoRnVuY3Rpb24oZWxlbSwgZm4pIHtcclxuXHRyZXR1cm4gZm4uY2FsbChlbGVtLCBlbGVtKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2lzV2l0aEVsZW1lbnQoZWxlbTEsIGVsZW0yKSB7XHJcblx0cmV0dXJuIGVsZW0xID09PSBlbGVtMjtcclxufVxyXG5cclxuei5mbi5pcyA9IChmdW5jdGlvbiBfaXMoKSB7XHJcblx0dmFyIG1hdGNoZXMsXHJcblx0XHRib2R5ID0gZG9jdW1lbnQuYm9keTtcclxuXHJcblx0bWF0Y2hlc1x0PSBib2R5Lm1hdGNoZXMgfHwgYm9keS5tYXRjaGVzU2VsZWN0b3IgfHwgYm9keS5tc01hdGNoZXNTZWxlY3RvcjtcclxuXHRtYXRjaGVzID0gbWF0Y2hlcyB8fCBib2R5Lm1vek1hdGNoZXNTZWxlY3RvciB8fCBib2R5LndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBib2R5Lm9NYXRjaGVzU2VsZWN0b3I7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuXHRcdHZhciBfaXNXaXRoLCByZXQsXHJcblx0XHRcdGlcdD0gMCxcclxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aDtcclxuXHJcblx0XHRzd2l0Y2ggKHR5cGVvZiBzZWxlY3Rvcikge1xyXG5cdFx0XHRjYXNlIFwic3RyaW5nXCI6XHJcblx0XHRcdFx0X2lzV2l0aCA9IG1hdGNoZXM7XHJcblx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XHJcblx0XHRcdFx0X2lzV2l0aCA9IF9pc1dpdGhGdW5jdGlvbjtcclxuXHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRjYXNlIFwib2JqZWN0XCI6XHJcblx0XHRcdFx0aWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgRXZlbnRUYXJnZXQpIHtcclxuXHRcdFx0XHRcdF9pc1dpdGggPSBfaXNXaXRoRWxlbWVudDtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojaXMgaXMgaW52YWxpZFwiKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojaXMgaXMgaW52YWxpZFwiKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcclxuXHRcdFx0cmV0ID0gX2lzV2l0aCh0aGlzW2ldLCBzZWxlY3Rvcik7XHJcblxyXG5cdFx0XHRpZiAocmV0KSB7XHJcblx0XHRcdFx0cmV0dXJuIHJldDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9O1xyXG59KSgpO1xyXG4iLCJ6LmZuLmhpZGUgPSBfZWFjaChmdW5jdGlvbiBoaWRlKCkge1xyXG5cdHRoaXMuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdHJldHVybiB0aGlzO1xyXG59KTtcclxuXHJcbnouZm4uc2hvdyA9IF9lYWNoKGZ1bmN0aW9uIHNob3coKSB7XHJcblx0dGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcclxuXHRyZXR1cm4gdGhpcztcclxufSk7XHJcblxyXG56LmZuLmNsb25lID0gZnVuY3Rpb24gKGRlZXApIHtcclxuXHR2YXIgaSA9IDA7XHJcblxyXG5cdGlmIChkZWVwID09PSB1bmRlZmluZWQgfHwgZGVlcCA9PT0gbnVsbCkge1xyXG5cdFx0ZGVlcCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Zm9yICg7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR0aGlzW2ldID0gdGhpc1tpXS5jbG9uZU5vZGUoZGVlcCk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGhpcztcclxufTtcclxuXHJcbnouZm4uaHRtbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdHZhciBpLCBsO1xyXG5cclxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuaW5uZXJIVE1MO1xyXG5cdH1cclxuXHJcblx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHR0aGlzW2ldLmlubmVySFRNTCA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG56LmZuLnRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHR2YXIgaSwgbDtcclxuXHJcblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuXHRcdHJldHVybiB0aGlzLnRleHRDb250ZW50O1xyXG5cdH1cclxuXHJcblx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHR0aGlzW2ldLnRleHRDb250ZW50ID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gdGhpcztcclxufTtcclxuXHJcbnouZm4uZ2V0QXR0ciA9IGZ1bmN0aW9uIChrZXkpIHtcclxuXHRpZiAoIWtleSkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojZ2V0QXR0ciBpcyByZXF1aXJlZFwiKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB0aGlzWzBdICYmIHRoaXNbMF0uZ2V0QXR0cmlidXRlKGtleSk7XHJcbn07XHJcblxyXG56LmZuLnNldEF0dHIgPSBfZWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG5cdGlmICgha2V5KSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNzZXRBdHRyIGlzIHJlcXVpcmVkXCIpO1xyXG5cdH0gZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBvZiB6I3NldEF0dHIgaXMgcmVxdWlyZWRcIik7XHJcblx0fVxyXG5cclxuXHR0aGlzLnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKTtcclxuXHRyZXR1cm4gdGhpcztcclxufSk7XHJcblxyXG56LmZuLmF0dHIgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xyXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRBdHRyKGtleSk7XHJcblx0fVxyXG5cclxuXHR0aGlzLnNldEF0dHIoa2V5LCB2YWx1ZSk7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG56LmZuLnJlcGxhY2VXaXRoID0gei5mbi5yZXBsYWNlID0gX2VhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3JlcGxhY2UgaXMgcmVxdWlyZWRcIik7XHJcblx0fVxyXG5cclxuXHR0aGlzLm91dGVySFRNTCA9IHZhbHVlO1xyXG59KTtcclxuXHJcbmlmIChcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xyXG5cdHouZm4uYWRkQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcclxuXHRcdHRoaXMuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xyXG5cdH0pO1xyXG5cclxuXHR6LmZuLnJlbW92ZUNsYXNzID0gX2VhY2goZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKSB7XHJcblx0XHR0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcclxuXHR9KTtcclxuXHJcblx0ei5mbi50b2dnbGVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgZm9yY2UpIHtcclxuXHRcdGlmIChmb3JjZSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHRoaXMuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5jbGFzc0xpc3RbZm9yY2UgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oY2xhc3NOYW1lKTtcclxuXHR9KTtcclxufSBlbHNlIHtcclxuXHR6LmZuLmFkZENsYXNzID0gX2VhY2goZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XHJcblx0XHR0aGlzLmNsYXNzTmFtZSArPSBcIiBcIiArIGNsYXNzTmFtZTtcclxuXHR9KTtcclxuXHJcblx0ei5mbi5yZW1vdmVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xyXG5cdFx0dGhpcy5jbGFzc05hbWUgKz0gdGhpcy5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXGIpXCIgKyBjbGFzc05hbWUgKyBcIihcXFxcYnwkKVwiLCBcImdcIiksIFwiIFwiKTtcclxuXHR9KTtcclxuXHJcblx0ei5mbi50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIGZvcmNlKSB7XHJcblx0XHR0aGlzW2ZvcmNlID8gXCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiXShjbGFzc05hbWUpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fTtcclxufVxyXG4iLCJ2YXIgX3NlbGVjdG9yc0NhY2hlLFxyXG5cdF9zZWxlY3RvcnMgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIF9maW5kKHNjb3BlLCBzdHJFbGVtKSB7XHJcblx0dmFyIHJldCA9IG5ldyB6QXJyYXkoKTtcclxuXHJcblx0c2NvcGUuZm9yRWFjaChmdW5jdGlvbiBfZmluZEZvckVhY2goc2NvcGVkRWxlbSkge1xyXG5cdFx0cmV0LnB1c2guYXBwbHkocmV0LCBfc2VsZWN0KHNjb3BlZEVsZW0sIHN0ckVsZW0pKTtcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIHJldDtcclxufVxyXG5cclxuZnVuY3Rpb24gX3NlbGVjdChzY29wZWRFbGVtLCBzdHJFbGVtKSB7XHJcblx0aWYgKCF+c3RyRWxlbS5pbmRleE9mKFwiOlwiKSB8fCBfc2VsZWN0b3JzQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0cmV0dXJuIHNjb3BlZEVsZW0ucXVlcnlTZWxlY3RvckFsbChzdHJFbGVtKTtcclxuXHR9XHJcblxyXG5cdGlmIChfc2VsZWN0b3JzQ2FjaGUgPT09IGZhbHNlKSB7XHJcblx0XHRfZ2VuZXJhdGVTZWxlY3RvcnNDYWNoZSgpO1xyXG5cdH1cclxuXHJcblx0aWYgKCFzdHJFbGVtLm1hdGNoKF9zZWxlY3RvcnNDYWNoZSkpIHtcclxuXHRcdHJldHVybiBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoc3RyRWxlbSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gX3NlbGVjdDIoc2NvcGVkRWxlbSwgc3RyRWxlbSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9zZWxlY3QyKHNjb3BlZEVsZW0sIHN0ckVsZW0pIHtcclxuXHR2YXIgZW50cnksIHNlbGVjdG9ycyxcclxuXHRcdHNjb3BlXHQ9IG5ldyB6QXJyYXkoc2NvcGVkRWxlbSksXHJcblx0XHRjdXJyZW50XHQ9IFwiXCIsXHJcblx0XHRlbnRyaWVzXHQ9IHN0ckVsZW0uc3BsaXQoL1xccysvKTtcclxuXHJcblx0d2hpbGUgKGVudHJ5ID0gZW50cmllcy5zaGlmdCgpKSB7XHJcblx0XHRzZWxlY3RvcnMgPSBlbnRyeS5tYXRjaChfc2VsZWN0b3JzQ2FjaGUpO1xyXG5cclxuXHRcdGlmICghc2VsZWN0b3JzKSB7XHJcblx0XHRcdGN1cnJlbnQgKz0gZW50cnkgKyBcIiBcIjtcclxuXHRcdFx0Y29udGludWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Y3VycmVudFx0Kz0gZW50cnkucmVwbGFjZShfc2VsZWN0b3JzQ2FjaGUsIFwiXCIpIHx8IFwiKlwiO1xyXG5cdFx0ZW50cnlcdD0gbmV3IHpBcnJheSgpO1xyXG5cclxuXHRcdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gX3NlbGVjdEZvckVhY2goc2NvcGVkRWxlbSkge1xyXG5cdFx0XHR2YXIgcmV0ID0gbmV3IHpBcnJheSgpO1xyXG5cclxuXHRcdFx0c2VsZWN0b3JzLmZvckVhY2goZnVuY3Rpb24gc2VsZWN0b3JzRm9yRWFjaChzZWxlY3Rvcikge1xyXG5cdFx0XHRcdHJldC5wdXNoLmFwcGx5KHJldCwgX3NlbGVjdG9yc1tzZWxlY3Rvcl0uY2FsbChzY29wZWRFbGVtLCBjdXJyZW50KSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0ZW50cnkucHVzaC5hcHBseShlbnRyeSwgcmV0KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNjb3BlXHQ9IGVudHJ5O1xyXG5cdFx0Y3VycmVudFx0PSBcIlwiO1xyXG5cdH1cclxuXHJcblx0aWYgKGN1cnJlbnQpIHtcclxuXHRcdGVudHJ5ID0gbmV3IHpBcnJheSgpO1xyXG5cclxuXHRcdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gY3VycmVudEZvckVhY2goc2NvcGVkRWxlbSkge1xyXG5cdFx0XHRlbnRyeS5wdXNoLmFwcGx5KGVudHJ5LCBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoY3VycmVudCkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2NvcGUgPSBlbnRyeTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBzY29wZTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2dlbmVyYXRlU2VsZWN0b3JzQ2FjaGUoKSB7XHJcblx0dmFyIHNlbGVjdG9yc1x0PSBPYmplY3Qua2V5cyhfc2VsZWN0b3JzKS5qb2luKFwifFwiKS5yZXBsYWNlKC86L2csIFwiXCIpO1xyXG5cdF9zZWxlY3RvcnNDYWNoZVx0PSBuZXcgUmVnRXhwKFwiOihcIiArIHNlbGVjdG9ycyArIFwiKVwiLCBcImdcIik7XHJcbn1cclxuIiwiei5yZWdpc3RlclNlbGVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBmbikge1xyXG5cdGlmICghc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNyZWdpc3RlclNlbGVjdG9yIG11c3QgYmUgYSBzdHJpbmcgc2VsZWN0b3JcIik7XHJcblx0fSBlbHNlIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBwYXJhbWV0ZXIgb2YgeiNyZWdpc3RlclNlbGVjdG9yIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcclxuXHR9XHJcblxyXG5cdGlmIChzZWxlY3RvclswXSAhPT0gXCI6XCIpIHtcclxuXHRcdHNlbGVjdG9yID0gXCI6XCIgKyBzZWxlY3RvcjtcclxuXHR9XHJcblxyXG5cdF9zZWxlY3RvcnNDYWNoZVx0XHRcdD0gZmFsc2U7XHJcblx0X3NlbGVjdG9yc1tzZWxlY3Rvcl1cdD0gZm47XHJcbn07XHJcblxyXG56LnJlZ2lzdGVyU2VsZWN0b3IoXCI6Zmlyc3RcIiwgZnVuY3Rpb24gc2VsZWN0b3JGaXJzdChxdWVyeSkge1xyXG5cdHJldHVybiB6KHRoaXMucXVlcnlTZWxlY3RvcihxdWVyeSkpO1xyXG59KTtcclxuXHJcbnoucmVnaXN0ZXJTZWxlY3RvcihcIjppbnB1dFwiLCAoZnVuY3Rpb24gc2VsZWN0b3JGaXJzdCgpIHtcclxuXHR2YXIgdGFncyA9IFwiSU5QVVQsVEVYVEFSRUEsU0VMRUNULEJVVFRPTlwiLnNwbGl0KFwiLFwiKTtcclxuXHJcblx0ZnVuY3Rpb24gZmlsdGVyKGVsZW1lbnQpIHtcclxuXHRcdHJldHVybiB+dGFncy5pbmRleE9mKGVsZW1lbnQudGFnTmFtZSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gc2VsZWN0b3JJbnB1dChxdWVyeSkge1xyXG5cdFx0dmFyIGVsZW1lbnRzID0gbmV3IHpBcnJheSgpO1xyXG5cclxuXHRcdGVsZW1lbnRzLnB1c2guYXBwbHkoZWxlbWVudHMsIFtdLmZpbHRlci5jYWxsKHRoaXMucXVlcnlTZWxlY3RvckFsbChxdWVyeSksIGZpbHRlcikpO1xyXG5cclxuXHRcdHJldHVybiBlbGVtZW50cztcclxuXHR9O1xyXG59KSgpKTtcclxuIiwiei5mbi5wYXJlbnQgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XHJcblx0cmV0dXJuIHRoaXMucGFyZW50Tm9kZTtcclxufSk7XHJcblxyXG56LmZuLm5leHQgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XHJcblx0cmV0dXJuIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG59KTtcclxuXHJcbnouZm4ucHJldiA9IHouZm4ucHJldmlvdXMgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XHJcblx0cmV0dXJuIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZztcclxufSk7XHJcblxyXG56LmZuLnNpYmxpbmdzID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xyXG5cdHJldHVybiBbXS5maWx0ZXIuY2FsbCh0aGlzLnBhcmVudE5vZGUuY2hpbGRyZW4sIGZ1bmN0aW9uKGNoaWxkKSB7XHJcblx0XHRyZXR1cm4gY2hpbGQgIT09IHRoaXM7XHJcblx0fSwgdGhpcyk7XHJcbn0pO1xyXG4iLCJmdW5jdGlvbiBfY2hlY2tWYWxpZEVsZW1lbnQoZWxlbSkge1xyXG5cdGlmIChlbGVtIGluc3RhbmNlb2YgekFycmF5KSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGlmIChlbGVtIGluc3RhbmNlb2YgRXZlbnRUYXJnZXQpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0aWYgKHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9lYWNoKGZuKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uIHJ1bkVhY2goKSB7XHJcblx0XHR2YXIgaVx0PSAwLFxyXG5cdFx0XHRsXHQ9IHRoaXMubGVuZ3RoO1xyXG5cclxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XHJcblx0XHRcdGZuLmFwcGx5KHRoaXNbaV0sIGFyZ3VtZW50cyk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2VhY2hOZXcoZm4pIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24gcnVuRWFjaCgpIHtcclxuXHRcdHZhciByZXQsXHJcblx0XHRcdGlcdD0gMCxcclxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aCxcclxuXHRcdFx0YXJyXHQ9IG5ldyB6QXJyYXkoKTtcclxuXHJcblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xyXG5cdFx0XHRyZXQgPSBmbi5hcHBseSh0aGlzW2ldLCBhcmd1bWVudHMpO1xyXG5cclxuXHRcdFx0aWYgKHJldCkge1xyXG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHJldCkgJiYgcmV0Lmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0YXJyLnB1c2guYXBwbHkoYXJyLCByZXQpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRhcnIucHVzaChyZXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhcnI7XHJcblx0fTtcclxufVxyXG5cclxuei5kZWVwRXh0ZW5kID0gZnVuY3Rpb24gX2V4dGVuZChkZWVwKSB7XHJcblx0dmFyIG9iaiwgdGFyZ2V0LFxyXG5cdFx0aSA9IDI7XHJcblxyXG5cdGlmICh0eXBlb2YgZGVlcCA9PT0gXCJvYmplY3RcIikge1xyXG5cdFx0dGFyZ2V0XHQ9IGRlZXAgfHwge307XHJcblx0XHRkZWVwXHQ9IEluZmluaXR5O1xyXG5cdH0gZWxzZSB7XHJcblx0XHRkZWVwXHQ9IGRlZXAgPT09IHRydWUgPyBJbmZpbml0eSA6IChkZWVwIHwgMCk7XHJcblx0XHR0YXJnZXRcdD0gYXJndW1lbnRzWzFdIHx8IHt9O1xyXG5cdH1cclxuXHJcblx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdG9iaiA9IGFyZ3VtZW50c1tpXTtcclxuXHJcblx0XHRpZiAoIW9iaikge1xyXG5cdFx0XHRjb250aW51ZTtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcblx0XHRcdGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG5cdFx0XHRcdGlmIChkZWVwICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gXCJvYmplY3RcIikge1xyXG5cdFx0XHRcdFx0X2V4dGVuZChkZWVwIC0gMSwgdGFyZ2V0W2tleV0sIG9ialtrZXldKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGFyZ2V0W2tleV0gPSBvYmpba2V5XTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiB0YXJnZXQ7XHJcbn07XHJcblxyXG56LmV4dGVuZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRbXS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCAwKTtcclxuXHRyZXR1cm4gei5kZWVwRXh0ZW5kLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XHJcbn07XHJcblxyXG56LmZuLmVhY2ggPSBfZWFjaChmdW5jdGlvbiBlYWNoKGZuKSB7XHJcblx0Zm4uY2FsbCh0aGlzLCB0aGlzKTtcclxuXHRyZXR1cm4gdGhpcztcclxufSk7XHJcblxyXG56LnF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKG9iaiwgcHJlZml4KSB7XHJcblx0dmFyIGksIGtleSwgdmFsLFxyXG5cdFx0c3RyaW5ncyA9IFtdO1xyXG5cclxuXHRmb3IgKGkgaW4gb2JqKSB7XHJcblx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XHJcblx0XHRcdGlmIChwcmVmaXgpIHtcclxuXHRcdFx0XHRrZXkgPSBwcmVmaXggKyBcIltcIiArIGkgKyBcIl1cIjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRrZXkgPSBpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YWwgPSBvYmpbaV07XHJcblxyXG5cdFx0XHRpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcclxuXHRcdFx0XHRzdHJpbmdzLnB1c2gocXVlcnlTdHJpbmcodmFsLCBrZXkpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzdHJpbmdzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHN0cmluZ3Muam9pbihcIiZcIik7XHJcbn07XHJcbiIsIn0pKHdpbmRvdywgZG9jdW1lbnQpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=