!function(t,e){function r(t,e){if(t instanceof d)return t;if(t instanceof EventTarget)return new d(t);if(void 0===t||null===t)return new d;if("string"!=typeof t)throw new Error("First parameter is invalid");if(e){if(!l(e))throw new Error("Second parameter is invalid");e=r(e)}else e=g;return a(e,t)}function n(){}function i(t,e){var r;return e?this.responseXML?this.responseXML:(r=new DOMParser,r.parseFromString(t,"application/xml")):(r=new XMLSerializer,r.serializeToString(t))}function o(t,e){return e.call(t,t)}function s(t,e){return t===e}function a(t,e){var r=new d;return t.forEach(function(t){r.push.apply(r,u(t,e))}),r}function u(t,e){return~e.indexOf(":")&&void 0!==T?(T===!1&&c(),e.match(T)?f(t,e):t.querySelectorAll(e)):t.querySelectorAll(e)}function f(t,e){for(var r,n,i=new d(t),o="",s=e.split(/\s+/);r=s.shift();)n=r.match(T),n?(o+=r.replace(T,"")||"*",r=new d,i.forEach(function(t){var e=new d;n.forEach(function(r){e.push.apply(e,S[r].call(t,o))}),r.push.apply(r,e)}),i=r,o=""):o+=r+" ";return o&&(r=new d,i.forEach(function(t){r.push.apply(r,t.querySelectorAll(o))}),i=r),i}function c(){var t=Object.keys(S).join("|").replace(/:/g,"");T=new RegExp(":("+t+")","g")}function l(t){return t instanceof d?!0:t instanceof EventTarget?!0:"string"==typeof t?!0:void 0}function h(t){return function(){for(var e=0,r=this.length;r>e;e++)t.apply(this[e],arguments);return this}}function p(t){return function(){for(var e,r=0,n=this.length,i=new d;n>r;r++)e=t.apply(this[r],arguments),e&&(Array.isArray(e)&&e.length?i.push.apply(i,e):i.push(e));return i}}var d,y,g,v;try{v=e.createElement("iframe"),v.style.width=0,v.style.height=0,v.style.borderStyle="none",e.body.appendChild(v),d=v.contentWindow.Array,e.body.removeChild(v)}catch(m){d=Array}t.z=r,r.fn=d.prototype,y=r(t),g=r(e),r.fn.find=function(t){if("string"!=typeof t)throw new Error("First paramater of z#find() should be a string");return a(this,t)};var w,E,x={};w={method:"GET",requestType:"text",responseType:"text",url:t.location+"",query:null,data:null,setup:n,success:n,error:n},E={text:function(t){return(t||"")+""}},r.ajax=function(t){var e=new XMLHttpRequest;if(t=r.extend({context:e},w,t),!E[t.requestType])throw new Error("Invalid option `requestType`");if(!E[t.responseType])throw new Error("Invalid option `responseType`");t.query&&~["HEAD","GET"].indexOf(t.method.toUpperCase())&&(t.url+=~t.url.indexOf("?")?"&":"?",t.url+=r.queryString(t.query),t.url=t.url.replace(/(\?|&)&/g,"$1")),e.open(t.method,t.url,!0),e.onload=function(){var r;e.status>=200&&e.status<400?(r=E[t.responseType].call(e,e.responseText,!0),t.success.call(t.context,r)):t.error.call(t.context,e.status,e.statusText)},e.onerror=function(){t.error.call(t.context,e.status,e.statusText)},~["HEAD","GET"].indexOf(t.method.toUpperCase())||e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.data&&(t.data=E[t.requestType].call(e,t.data,!1)),t.setup.call(e,e),e.send(t.data)},w.requestType="detect",w.responseType="detect",r.registerAjaxType=function(t,e,r){r||"function"!=typeof e||(r=e,e=!1),E[t]=r,e&&(x[e]=t)},r.registerAjaxType("detect",function(t,e){var r,n="text";return e?(r=this.getResponseHeader("Content-Type")||"",r=r.split(";")[0].trim(),n=x[r]||"text"):t&&"object"==typeof t&&t.toString==={}.toString&&(n="json"),E[n].call(this,t,e)}),r.registerAjaxType("json","application/json",function(t,e){return e?JSON.parse(t):JSON.stringify(t)}),r.registerAjaxType("html","text/html",function(t,r){var n,i;return r?(i=new d,n=e.implementation.createHTMLDocument(),n.documentElement.innerHTML=t,i.push.apply(i,i.slice.call(n.body.children,0)),i):t.outerHTML}),r.registerAjaxType("xml","text/xml",i),r.registerAjaxType("xml","application/xml",i),r.fn.data="dataset"in e.body?function(t,e){var r,n;if(this.length){if(void 0===t)return this[0].dataset;if(void 0===e)return this[0].dataset[t];for(r=0,n=this.length;n>r;r++)this[r].dataset[t]=e;return this}}:function(t,e){var r,n,i="data-"+(t||"");if(this.length){if(void 0===t)return r={},[].forEach.call(this[0].attributes,function(t){return r[t.name]=t.value}),r;if(void 0===e)return this[0].attributes[i];for(r=0,n=this.length;n>r;r++)this[r].dataset[i]=e;return this}},r.fn.on=r.fn.bind=h(function(t,e){this.addEventListener(t,e,!1)}),r.fn.off=r.fn.unbind=h(function(t,e){this.removeEventListener(t,e,!1)}),r.fn.trigger=function(t,r){var n,i,o=0,s=this.length;try{i=r?{detail:r}:void 0,n=new CustomEvent(t,i)}catch(a){n=e.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)}for(;s>o;o++)this[o].dispatchEvent(n);return this},r.fn.is=function(){var t,r=e.body;return t=r.matches||r.matchesSelector||r.msMatchesSelector,t=t||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector,function(e){var r,n,i=0,a=this.length;switch(typeof e){case"string":r=t;break;case"function":r=o;break;case"object":if(!(e instanceof EventTarget))throw new Error("First parameter of z#is is invalid");r=s;default:throw new Error("First parameter of z#is is invalid")}for(;a>i;i++)if(n=r(this[i],e))return n;return!1}}(),r.fn.hide=h(function(){return this.style.display="none",this}),r.fn.show=h(function(){return this.style.display="",this}),r.fn.clone=function(t){var e=0;for((void 0===t||null===t)&&(t=!1);e<this.length;e++)this[e]=this[e].cloneNode(t);return this},r.fn.html=function(t){var e,r;if(void 0===t)return this.innerHTML;for(e=0,r=this.length;r>e;e++)this[e].innerHTML=t;return this},r.fn.text=function(t){var e,r;if(void 0===t)return this.textContent;for(e=0,r=this.length;r>e;e++)this[e].textContent=t;return this},r.fn.getAttr=function(t){if(!t)throw new Error("First parameter of z#getAttr is required");return this[0]&&this[0].getAttribute(t)},r.fn.setAttr=h(function(t,e){if(!t)throw new Error("First parameter of z#setAttr is required");if(void 0===e)throw new Error("Second parameter of z#setAttr is required");return this.setAttribute(t,e),this}),r.fn.attr=function(t,e){return void 0===e?this.getAttr(t):(this.setAttr(t,e),this)},r.fn.replaceWith=r.fn.replace=h(function(t){if(void 0===t)throw new Error("First parameter of z#replace is required");this.outerHTML=t}),"classList"in e.documentElement?(r.fn.addClass=h(function(t){this.classList.add(t)}),r.fn.removeClass=h(function(t){this.classList.remove(t)}),r.fn.toggleClass=h(function(t,e){return void 0===e?void this.classList.toggle(t):void this.classList[e?"add":"remove"](t)})):(r.fn.addClass=h(function(t){this.className+=" "+t}),r.fn.removeClass=h(function(t){this.className+=this.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","g")," ")}),r.fn.toggleClass=function(t,e){return this[e?"addClass":"removeClass"](t),this});var T,S={};r.registerSelector=function(t,e){if(!t||"string"!=typeof t)throw new Error("First parameter of z#registerSelector must be a string selector");if(!e||"function"!=typeof e)throw new Error("Second parameter of z#registerSelector must be a function");":"!==t[0]&&(t=":"+t),T=!1,S[t]=e},r.registerSelector(":first",function(t){return r(this.querySelector(t))}),r.registerSelector(":input",function(){function t(t){return~e.indexOf(t.tagName)}var e="INPUT,TEXTAREA,SELECT,BUTTON".split(",");return function(e){var r=new d;return r.push.apply(r,[].filter.call(this.querySelectorAll(e),t)),r}}()),r.fn.parent=p(function(){return this.parentNode}),r.fn.next=p(function(){return this.nextElementSibling}),r.fn.prev=r.fn.previous=p(function(){return this.previousElementSibling}),r.fn.siblings=p(function(){return[].filter.call(this.parentNode.children,function(t){return t!==this},this)}),r.deepExtend=function b(t){var e,r,n=2;for("object"==typeof t?(r=t||{},t=1/0):(t=t===!0?1/0:0|t,r=arguments[1]||{});n<arguments.length;n++)if(e=arguments[n])for(var i in e)e.hasOwnProperty(i)&&(t&&"object"==typeof e[i]?b(t-1,r[i],e[i]):r[i]=e[i]);return r},r.extend=function(){return[].unshift.call(arguments,0),r.deepExtend.apply(null,arguments)},r.fn.each=h(function(t){return t.call(this,this),this}),r.queryString=function(t,e){var r,n,i,o=[];for(r in t)t.hasOwnProperty(r)&&(n=e?e+"["+r+"]":r,i=t[r],o.push(i&&"object"==typeof i?queryString(i,n):encodeURIComponent(n)+"="+encodeURIComponent(i)));return o.join("&")}}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiei5zbS5taW4uanMiLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJfYmFzZS5qcyIsImFqYXguanMiLCJhamF4X3R5cGVzLmpzIiwiZGF0YS5qcyIsImV2ZW50cy5qcyIsImZpbHRlcmluZy5qcyIsIm1hbmlwdWxhdGlvbi5qcyIsInNlbGVjdG9ycy5qcyIsInNlbGVjdG9yc19jdXN0b20uanMiLCJ0cmF2ZXJzaW5nLmpzIiwidXRpbHMuanMiLCJfZm9vdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQVVBLFNBQUEsRUFBQSxHQ1JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsWUFBQSxhQUNBLE1BQUEsSUFBQSxHQUFBLEVBQ0EsSUFBQSxTQUFBLEdBQUEsT0FBQSxFQUNBLE1BQUEsSUFBQSxFQUNBLElBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw2QkFHQSxJQUFBLEVBQUEsQ0FDQSxJQUFBLEVBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw4QkFHQSxHQUFBLEVBQUEsT0FFQSxHQUFBLENBR0EsT0FBQSxHQUFBLEVBQUEsR0FHQSxRQUFBLE1DK0JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxFQUVBLE9BQUEsR0FLQSxLQUFBLFlBQ0EsS0FBQSxhQUdBLEVBQUEsR0FBQSxXQUNBLEVBQUEsZ0JBQUEsRUFBQSxxQkFUQSxFQUFBLEdBQUEsZUFDQSxFQUFBLGtCQUFBLElDOURBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsRUFBQSxHQUdBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsTUFBQSxLQUFBLEVDRkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQU1BLE9BSkEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsRUFBQSxNQUdBLEVBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxPQUFBLEVBQUEsUUFBQSxNQUFBLFNBQUEsR0FJQSxLQUFBLEdBQ0EsSUFHQSxFQUFBLE1BQUEsR0FJQSxFQUFBLEVBQUEsR0FIQSxFQUFBLGlCQUFBLElBUkEsRUFBQSxpQkFBQSxHQWNBLFFBQUEsR0FBQSxFQUFBLEdBTUEsSUFMQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FBQSxHQUNBLEVBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxPQUVBLEVBQUEsRUFBQSxTQUNBLEVBQUEsRUFBQSxNQUFBLEdBRUEsR0FLQSxHQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsSUFDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBRUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsTUFHQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEtBR0EsRUFBQSxFQUNBLEVBQUEsSUFsQkEsR0FBQSxFQUFBLEdBK0JBLE9BVkEsS0FDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxpQkFBQSxNQUdBLEVBQUEsR0FHQSxFQUdBLFFBQUEsS0FDQSxHQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsS0FBQSxLQUFBLFFBQUEsS0FBQSxHQUNBLEdBQUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxJQUFBLEtDM0VBLFFBQUEsR0FBQSxHQUNBLE1BQUEsYUFBQSxJQUNBLEVBR0EsWUFBQSxjQUNBLEVBR0EsZ0JBQUEsSUFDQSxFQURBLE9BS0EsUUFBQSxHQUFBLEdBQ0EsTUFBQSxZQUlBLElBSEEsR0FBQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE9BRUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxNQUFBLEtBQUEsR0FBQSxVQUdBLE9BQUEsT0FJQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFlBTUEsSUFMQSxHQUFBLEdBQ0EsRUFBQSxFQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsRUFBQSxJQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxXQUVBLElBQ0EsTUFBQSxRQUFBLElBQUEsRUFBQSxPQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsR0FLQSxPQUFBLElKOUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsQ0E0QkEsS0FDQSxFQUFBLEVBQUEsY0FBQSxVQUVBLEVBQUEsTUFBQSxNQUFBLEVBQ0EsRUFBQSxNQUFBLE9BQUEsRUFDQSxFQUFBLE1BQUEsWUFBQSxPQUVBLEVBQUEsS0FBQSxZQUFBLEdBRUEsRUFBQSxFQUFBLGNBQUEsTUFFQSxFQUFBLEtBQUEsWUFBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLE1BSUEsRUFBQSxFQUFBLEVBQ0EsRUFBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsR0FFQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxnQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLGlEQUdBLE9BQUEsR0FBQSxLQUFBLEdLdkRBLElBQUEsR0FBQSxFQUNBLElBRUEsSUFDQSxPQUFBLE1BQ0EsWUFBQSxPQUNBLGFBQUEsT0FDQSxJQUFBLEVBQUEsU0FBQSxHQUNBLE1BQUEsS0FDQSxLQUFBLEtBQ0EsTUFBQSxFQUNBLFFBQUEsRUFDQSxNQUFBLEdBR0EsR0FDQSxLQUFBLFNBQUEsR0FDQSxPQUFBLEdBQUEsSUFBQSxLQUlBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsR0FDQSxHQUFBLEdBQUEsZUFNQSxJQUpBLEVBQUEsRUFBQSxRQUNBLFFBQUEsR0FDQSxFQUFBLElBRUEsRUFBQSxFQUFBLGFBQ0EsS0FBQSxJQUFBLE9BQUEsK0JBQ0EsS0FBQSxFQUFBLEVBQUEsY0FDQSxLQUFBLElBQUEsT0FBQSxnQ0FHQSxHQUFBLFNBQUEsT0FBQSxPQUFBLFFBQUEsRUFBQSxPQUFBLGlCQUNBLEVBQUEsTUFBQSxFQUFBLElBQUEsUUFBQSxLQUFBLElBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsT0FDQSxFQUFBLElBQUEsRUFBQSxJQUFBLFFBQUEsV0FBQSxPQUdBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEdBRUEsRUFBQSxPQUFBLFdBQ0EsR0FBQSxFQUVBLEdBQUEsUUFBQSxLQUFBLEVBQUEsT0FBQSxLQUNBLEVBQUEsRUFBQSxFQUFBLGNBQUEsS0FBQSxFQUFBLEVBQUEsY0FBQSxHQUNBLEVBQUEsUUFBQSxLQUFBLEVBQUEsUUFBQSxJQUVBLEVBQUEsTUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxhQUlBLEVBQUEsUUFBQSxXQUNBLEVBQUEsTUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLE9BQUEsRUFBQSxlQUdBLE9BQUEsT0FBQSxRQUFBLEVBQUEsT0FBQSxnQkFDQSxFQUFBLGlCQUFBLGVBQUEsb0RBR0EsRUFBQSxPQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsYUFBQSxLQUFBLEVBQUEsRUFBQSxNQUFBLElBR0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxFQUFBLE9KcEVBLEVBQUEsWUFBQSxTQUNBLEVBQUEsYUFBQSxTQUVBLEVBQUEsaUJBQUEsU0FBQSxFQUFBLEVBQUEsR0FDQSxHQUFBLGtCQUFBLEtBQ0EsRUFBQSxFQUNBLEdBQUEsR0FHQSxFQUFBLEdBQUEsRUFFQSxJQUNBLEVBQUEsR0FBQSxJQUlBLEVBQUEsaUJBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQ0EsRUFBQSxNQVlBLE9BVkEsSUFDQSxFQUFBLEtBQUEsa0JBQUEsaUJBQUEsR0FDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLEdBQUEsT0FDQSxFQUFBLEVBQUEsSUFBQSxRQUVBLEdBQUEsZ0JBQUEsSUFBQSxFQUFBLGNBQUEsV0FDQSxFQUFBLFFBSUEsRUFBQSxHQUFBLEtBQUEsS0FBQSxFQUFBLEtBR0EsRUFBQSxpQkFBQSxPQUFBLG1CQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLE1BQUEsR0FBQSxLQUFBLFVBQUEsS0FHQSxFQUFBLGlCQUFBLE9BQUEsWUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsQ0FFQSxPQUFBLElBSUEsRUFBQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLGVBQUEscUJBRUEsRUFBQSxnQkFBQSxVQUFBLEVBRUEsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEtBQUEsU0FBQSxJQUVBLEdBVkEsRUFBQSxZQWFBLEVBQUEsaUJBQUEsTUFBQSxXQUFBLEdBQ0EsRUFBQSxpQkFBQSxNQUFBLGtCQUFBLEdLdERBLEVBQUEsR0FBQSxLQURBLFdBQUEsR0FBQSxLQUNBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsS0FBQSxPQUFBLENBSUEsR0FBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLEdBQUEsT0FDQSxJQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxRQUFBLEVBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFFBQUEsR0FBQSxDQUdBLE9BQUEsUUFHQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLFNBQUEsR0FBQSxHQUVBLElBQUEsS0FBQSxPQUFBLENBSUEsR0FBQSxTQUFBLEVBT0EsTUFOQSxTQUVBLFFBQUEsS0FBQSxLQUFBLEdBQUEsV0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLFFBR0EsQ0FDQSxJQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxXQUFBLEVBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFFBQUEsR0FBQSxDQUdBLE9BQUEsUUM3Q0EsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLGlCQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsS0FBQSxvQkFBQSxFQUFBLEdBQUEsS0FHQSxFQUFBLEdBQUEsUUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsS0FDQSxFQUFBLEdBQUEsT0FBQSxHQUFBLE9BQ0EsRUFBQSxHQUFBLGFBQUEsRUFBQSxHQUNBLE1BQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FBQSxHQUFBLEVBQUEsR0FHQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxjQUFBLEVBR0EsT0FBQSxPTGpCQSxFQUFBLEdBQUEsR0FBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLEVBQUEsSUFLQSxPQUhBLEdBQUEsRUFBQSxTQUFBLEVBQUEsaUJBQUEsRUFBQSxrQkFDQSxFQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLHVCQUFBLEVBQUEsaUJBRUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxjQUFBLElBQ0EsSUFBQSxTQUNBLEVBQUEsQ0FDQSxNQUVBLEtBQUEsV0FDQSxFQUFBLENBQ0EsTUFFQSxLQUFBLFNBQ0EsS0FBQSxZQUFBLGNBR0EsS0FBQSxJQUFBLE9BQUEscUNBRkEsR0FBQSxDQUlBLFNBQ0EsS0FBQSxJQUFBLE9BQUEsc0NBSUEsS0FBQSxFQUFBLEVBQUEsSUFHQSxHQUZBLEVBQUEsRUFBQSxLQUFBLEdBQUEsR0FHQSxNQUFBLEVBSUEsUUFBQSxNTWhEQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFdBRUEsTUFEQSxNQUFBLE1BQUEsUUFBQSxPQUNBLE9BR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxXQUVBLE1BREEsTUFBQSxNQUFBLFFBQUEsR0FDQSxPQUdBLEVBQUEsR0FBQSxNQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FNQSxNQUpBLFNBQUEsR0FBQSxPQUFBLEtBQ0EsR0FBQSxHQUdBLEVBQUEsS0FBQSxPQUFBLElBQ0EsS0FBQSxHQUFBLEtBQUEsR0FBQSxVQUFBLEVBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsQ0FFQSxJQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsU0FHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsVUFBQSxDQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLFdBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFlBQUEsQ0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxPQUFBLE1BQUEsSUFBQSxLQUFBLEdBQUEsYUFBQSxJQUdBLEVBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDJDQUNBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDRDQUlBLE9BREEsTUFBQSxhQUFBLEVBQUEsR0FDQSxPQUdBLEVBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxFQUNBLEtBQUEsUUFBQSxJQUdBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxNQUFBLFVBQUEsSUFHQSxhQUFBLEdBQUEsaUJBQ0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxVQUFBLElBQUEsS0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFVBQUEsT0FBQSxLQUdBLEVBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE1BQ0EsTUFBQSxVQUFBLE9BQUEsT0FJQSxNQUFBLFVBQUEsRUFBQSxNQUFBLFVBQUEsT0FHQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFdBQUEsSUFBQSxJQUdBLEVBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsV0FBQSxLQUFBLFVBQUEsUUFBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLFVBQUEsS0FBQSxPQUdBLEVBQUEsR0FBQSxZQUFBLFNBQUEsRUFBQSxHQUVBLE1BREEsTUFBQSxFQUFBLFdBQUEsZUFBQSxHQUNBLE1McEhBLElBQUEsR0FDQSxJTURBLEdBQUEsaUJBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxHQUFBLGdCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsa0VBQ0EsS0FBQSxHQUFBLGtCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsNERBR0EsT0FBQSxFQUFBLEtBQ0EsRUFBQSxJQUFBLEdBR0EsR0FBQSxFQUNBLEVBQUEsR0FBQSxHQUdBLEVBQUEsaUJBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsY0FBQSxNQUdBLEVBQUEsaUJBQUEsU0FBQSxXQUdBLFFBQUEsR0FBQSxHQUNBLE9BQUEsRUFBQSxRQUFBLEVBQUEsU0FIQSxHQUFBLEdBQUEsK0JBQUEsTUFBQSxJQU1BLE9BQUEsVUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBSUEsT0FGQSxHQUFBLEtBQUEsTUFBQSxLQUFBLE9BQUEsS0FBQSxLQUFBLGlCQUFBLEdBQUEsSUFFQSxPQy9CQSxFQUFBLEdBQUEsT0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLGFBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxXQUNBLE1BQUEsTUFBQSxxQkFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLHlCQUdBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FDQSxTQUFBLE9BQUEsS0FBQSxLQUFBLFdBQUEsU0FBQSxTQUFBLEdBQ0EsTUFBQSxLQUFBLE1BQ0EsUU5tQ0EsRUFBQSxXQUFBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsQ0FVQSxLQVJBLGdCQUFBLElBQ0EsRUFBQSxNQUNBLEVBQUEsTUFFQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsRUFDQSxFQUFBLFVBQUEsUUFHQSxFQUFBLFVBQUEsT0FBQSxJQUdBLEdBRkEsRUFBQSxVQUFBLEdBTUEsSUFBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsS0FDQSxHQUFBLGdCQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsR0FBQSxFQUFBLEdBTUEsT0FBQSxJQUdBLEVBQUEsT0FBQSxXQUVBLFNBREEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLFdBQUEsTUFBQSxLQUFBLFlBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsS0FBQSxNQUNBLE9BR0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFFQSxLQUFBLElBQUEsR0FDQSxFQUFBLGVBQUEsS0FFQSxFQURBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsSUFFQSxFQUdBLEVBQUEsRUFBQSxHQUdBLEVBQUEsS0FEQSxHQUFBLGdCQUFBLEdBQ0EsWUFBQSxFQUFBLEdBRUEsbUJBQUEsR0FBQSxJQUFBLG1CQUFBLElBS0EsT0FBQSxHQUFBLEtBQUEsT09uSEEsT0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogei5qcyBKYXZhU2NyaXB0IExpYnJhcnkgdkBWRVJTSU9OXG4gKiBodHRwczovL2dpdGh1Yi5jb20vTkVVUlMvei5qc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IE5FVVJTIExMQywgS2V2aW4gSi4gTWFydGluLCBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ORVVSUy96LmpzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqXG4gKiBEYXRlOiBAREFURVxuICovXG47KGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50KSB7XG4iLCJ2YXIgekFycmF5LCBfd2luZG93LCBfZG9jdW1lbnQsIGlmcmFtZTtcblxuZnVuY3Rpb24geihlbGVtLCBzY29wZSkge1xuXHRpZiAoZWxlbSBpbnN0YW5jZW9mIHpBcnJheSkge1xuXHRcdHJldHVybiBlbGVtO1xuXHR9IGVsc2UgaWYgKGVsZW0gaW5zdGFuY2VvZiBFdmVudFRhcmdldCkge1xuXHRcdHJldHVybiBuZXcgekFycmF5KGVsZW0pO1xuXHR9IGVsc2UgaWYgKGVsZW0gPT09IHVuZGVmaW5lZCB8fCBlbGVtID09PSBudWxsKSB7XG5cdFx0cmV0dXJuIG5ldyB6QXJyYXkoKTtcblx0fSBlbHNlIGlmICh0eXBlb2YgZWxlbSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBpcyBpbnZhbGlkXCIpO1xuXHR9XG5cblx0aWYgKHNjb3BlKSB7XG5cdFx0aWYgKCFfY2hlY2tWYWxpZEVsZW1lbnQoc2NvcGUpKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIGlzIGludmFsaWRcIik7XG5cdFx0fVxuXG5cdFx0c2NvcGUgPSB6KHNjb3BlKTtcblx0fSBlbHNlIHtcblx0XHRzY29wZSA9IF9kb2N1bWVudDtcblx0fVxuXG5cdHJldHVybiBfZmluZChzY29wZSwgZWxlbSk7XG59XG5cbmZ1bmN0aW9uIG5vb3AoKXt9XG5cbnRyeSB7XG5cdGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG5cblx0aWZyYW1lLnN0eWxlLndpZHRoXHRcdFx0PSAwO1xuXHRpZnJhbWUuc3R5bGUuaGVpZ2h0XHRcdFx0PSAwO1xuXHRpZnJhbWUuc3R5bGUuYm9yZGVyU3R5bGVcdD0gXCJub25lXCI7XG5cblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpZnJhbWUpO1xuXG5cdHpBcnJheSA9IGlmcmFtZS5jb250ZW50V2luZG93LkFycmF5O1xuXG5cdGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaWZyYW1lKTtcbn0gY2F0Y2ggKGUpIHtcblx0ekFycmF5ID0gQXJyYXk7XG59XG5cbi8vd2luZG93LiRcdD0gejtcbndpbmRvdy56XHQ9IHo7XG56LmZuXHRcdD0gekFycmF5LnByb3RvdHlwZTtcbl93aW5kb3dcdFx0PSB6KHdpbmRvdyk7XG5fZG9jdW1lbnRcdD0geihkb2N1bWVudCk7XG5cbnouZm4uZmluZCA9IGZ1bmN0aW9uIChzdHJFbGVtKSB7XG5cdGlmICh0eXBlb2Ygc3RyRWxlbSAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtYXRlciBvZiB6I2ZpbmQoKSBzaG91bGQgYmUgYSBzdHJpbmdcIik7XG5cdH1cblxuXHRyZXR1cm4gX2ZpbmQodGhpcywgc3RyRWxlbSk7XG59O1xuIiwidmFyIGFqYXhEZWZhdWx0cywgYWpheFR5cGVzLFxuXHRhamF4TWltZXNcdD0ge31cblxuYWpheERlZmF1bHRzID0ge1xuXHRtZXRob2Q6IFwiR0VUXCIsXG5cdHJlcXVlc3RUeXBlOiBcInRleHRcIixcblx0cmVzcG9uc2VUeXBlOiBcInRleHRcIixcblx0dXJsOiB3aW5kb3cubG9jYXRpb24gKyBcIlwiLFxuXHRxdWVyeTogbnVsbCxcblx0ZGF0YTogbnVsbCxcblx0c2V0dXA6IG5vb3AsXG5cdHN1Y2Nlc3M6IG5vb3AsXG5cdGVycm9yOiBub29wXG59O1xuXG5hamF4VHlwZXMgPSB7XG5cdHRleHQ6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0cmV0dXJuIChkYXRhIHx8IFwiXCIpICsgXCJcIjtcblx0fVxufTtcblxuei5hamF4ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0dmFyIGRhdGEsXG5cdFx0cmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0b3B0aW9ucyA9IHouZXh0ZW5kKHtcblx0XHRjb250ZXh0OiByZXFcblx0fSwgYWpheERlZmF1bHRzLCBvcHRpb25zKTtcblxuXHRpZiAoIWFqYXhUeXBlc1tvcHRpb25zLnJlcXVlc3RUeXBlXSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3B0aW9uIGByZXF1ZXN0VHlwZWBcIik7XG5cdH0gZWxzZSBpZiAoIWFqYXhUeXBlc1tvcHRpb25zLnJlc3BvbnNlVHlwZV0pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBgcmVzcG9uc2VUeXBlYFwiKTtcblx0fVxuXG5cdGlmIChvcHRpb25zLnF1ZXJ5ICYmIH5bXCJIRUFEXCIsIFwiR0VUXCJdLmluZGV4T2Yob3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSkpIHtcblx0XHRvcHRpb25zLnVybFx0Kz0gfm9wdGlvbnMudXJsLmluZGV4T2YoXCI/XCIpID8gXCImXCIgOiBcIj9cIjtcblx0XHRvcHRpb25zLnVybFx0Kz0gei5xdWVyeVN0cmluZyhvcHRpb25zLnF1ZXJ5KTtcblx0XHRvcHRpb25zLnVybFx0PSBvcHRpb25zLnVybC5yZXBsYWNlKC8oXFw/fCYpJi9nLCBcIiQxXCIpO1xuXHR9XG5cblx0cmVxLm9wZW4ob3B0aW9ucy5tZXRob2QsIG9wdGlvbnMudXJsLCB0cnVlKTtcblxuXHRyZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdHZhciByZXNwO1xuXG5cdFx0aWYgKHJlcS5zdGF0dXMgPj0gMjAwICYmIHJlcS5zdGF0dXMgPCA0MDApIHtcblx0XHRcdHJlc3AgPSBhamF4VHlwZXNbb3B0aW9ucy5yZXNwb25zZVR5cGVdLmNhbGwocmVxLCByZXEucmVzcG9uc2VUZXh0LCB0cnVlKTtcblx0XHRcdG9wdGlvbnMuc3VjY2Vzcy5jYWxsKG9wdGlvbnMuY29udGV4dCwgcmVzcCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG9wdGlvbnMuZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlcS5zdGF0dXMsIHJlcS5zdGF0dXNUZXh0KTtcblx0XHR9XG5cdH07XG5cblx0cmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cdFx0b3B0aW9ucy5lcnJvci5jYWxsKG9wdGlvbnMuY29udGV4dCwgcmVxLnN0YXR1cywgcmVxLnN0YXR1c1RleHQpO1xuXHR9O1xuXG5cdGlmICghfltcIkhFQURcIiwgXCJHRVRcIl0uaW5kZXhPZihvcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpKSkge1xuXHRcdHJlcS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsIFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIpO1xuXHR9XG5cblx0aWYgKG9wdGlvbnMuZGF0YSkge1xuXHRcdG9wdGlvbnMuZGF0YSA9IGFqYXhUeXBlc1tvcHRpb25zLnJlcXVlc3RUeXBlXS5jYWxsKHJlcSwgb3B0aW9ucy5kYXRhLCBmYWxzZSk7XG5cdH1cblxuXHRvcHRpb25zLnNldHVwLmNhbGwocmVxLCByZXEpO1xuXG5cdHJlcS5zZW5kKG9wdGlvbnMuZGF0YSk7XG59O1xuIiwiYWpheERlZmF1bHRzLnJlcXVlc3RUeXBlXHQ9IFwiZGV0ZWN0XCI7XG5hamF4RGVmYXVsdHMucmVzcG9uc2VUeXBlXHQ9IFwiZGV0ZWN0XCI7XG5cbnoucmVnaXN0ZXJBamF4VHlwZSA9IGZ1bmN0aW9uICh0eXBlLCBtaW1lLCBmbikge1xuXHRpZiAoIWZuICYmIHR5cGVvZiBtaW1lID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRmblx0XHQ9IG1pbWU7XG5cdFx0bWltZVx0PSBmYWxzZTtcblx0fVxuXG5cdGFqYXhUeXBlc1t0eXBlXSA9IGZuO1xuXG5cdGlmIChtaW1lKSB7XG5cdFx0YWpheE1pbWVzW21pbWVdID0gdHlwZTtcblx0fVxufTtcblxuei5yZWdpc3RlckFqYXhUeXBlKFwiZGV0ZWN0XCIsIGZ1bmN0aW9uIChkYXRhLCBpc1Jlc3BvbnNlKSB7XG5cdHZhciBoZWFkZXIsXG5cdFx0dHlwZSA9IFwidGV4dFwiO1xuXG5cdGlmIChpc1Jlc3BvbnNlKSB7XG5cdFx0aGVhZGVyXHQ9IHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikgfHwgXCJcIixcblx0XHRoZWFkZXJcdD0gaGVhZGVyLnNwbGl0KFwiO1wiKVswXS50cmltKCk7XG5cdFx0dHlwZVx0PSBhamF4TWltZXNbaGVhZGVyXSB8fCBcInRleHRcIjtcblx0fSBlbHNlIHtcblx0XHRpZiAoZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gXCJvYmplY3RcIiAmJiBkYXRhLnRvU3RyaW5nID09PSAoe30pLnRvU3RyaW5nKSB7XG5cdFx0XHR0eXBlID0gXCJqc29uXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGFqYXhUeXBlc1t0eXBlXS5jYWxsKHRoaXMsIGRhdGEsIGlzUmVzcG9uc2UpO1xufSk7XG5cbnoucmVnaXN0ZXJBamF4VHlwZShcImpzb25cIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGZ1bmN0aW9uIChkYXRhLCBpc1Jlc3BvbnNlKSB7XG5cdHJldHVybiBpc1Jlc3BvbnNlID8gSlNPTi5wYXJzZShkYXRhKSA6IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xufSk7XG5cbnoucmVnaXN0ZXJBamF4VHlwZShcImh0bWxcIiwgXCJ0ZXh0L2h0bWxcIiwgZnVuY3Rpb24gKGRhdGEsIGlzUmVzcG9uc2UpIHtcblx0dmFyIGRvYywgYXJyO1xuXG5cdGlmICghaXNSZXNwb25zZSkge1xuXHRcdHJldHVybiBkYXRhLm91dGVySFRNTDtcblx0fVxuXG5cdGFyclx0PSBuZXcgekFycmF5KCk7XG5cdGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpO1xuXG5cdGRvYy5kb2N1bWVudEVsZW1lbnQuaW5uZXJIVE1MID0gZGF0YTtcblxuXHRhcnIucHVzaC5hcHBseShhcnIsIGFyci5zbGljZS5jYWxsKGRvYy5ib2R5LmNoaWxkcmVuLCAwKSk7XG5cblx0cmV0dXJuIGFycjtcbn0pO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJ4bWxcIiwgXCJ0ZXh0L3htbFwiLCBhamF4WE1MUGFyc2VyKTtcbnoucmVnaXN0ZXJBamF4VHlwZShcInhtbFwiLCBcImFwcGxpY2F0aW9uL3htbFwiLCBhamF4WE1MUGFyc2VyKTtcblxuZnVuY3Rpb24gYWpheFhNTFBhcnNlcihkYXRhLCBpc1Jlc3BvbnNlKSB7XG5cdHZhciBwYXJzZXI7XG5cblx0aWYgKCFpc1Jlc3BvbnNlKSB7XG5cdFx0cGFyc2VyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcblx0XHRyZXR1cm4gcGFyc2VyLnNlcmlhbGl6ZVRvU3RyaW5nKGRhdGEpO1xuXHR9XG5cblx0aWYgKHRoaXMucmVzcG9uc2VYTUwpIHtcblx0XHRyZXR1cm4gdGhpcy5yZXNwb25zZVhNTDtcblx0fVxuXG5cdHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcblx0cmV0dXJuIHBhcnNlci5wYXJzZUZyb21TdHJpbmcoZGF0YSwgXCJhcHBsaWNhdGlvbi94bWxcIik7XG59XG4iLCJpZiAoXCJkYXRhc2V0XCIgaW4gZG9jdW1lbnQuYm9keSkge1xuXHR6LmZuLmRhdGEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdHZhciBpLCBsO1xuXG5cdFx0aWYgKCF0aGlzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIHRoaXNbMF0uZGF0YXNldDtcblx0XHR9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzWzBdLmRhdGFzZXRba2V5XTtcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uZGF0YXNldFtrZXldID0gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59IGVsc2Uge1xuXHR6LmZuLmRhdGEgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRcdHZhciBpLCBsLFxuXHRcdFx0ZGF0YUtleSA9IFwiZGF0YS1cIiArIChrZXkgfHwgXCJcIik7XG5cblx0XHRpZiAoIXRoaXMubGVuZ3RoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRpID0ge307XG5cblx0XHRcdFtdLmZvckVhY2guY2FsbCh0aGlzWzBdLmF0dHJpYnV0ZXMsIGZ1bmN0aW9uIChhdHRyKSB7XG5cdFx0XHRcdHJldHVybiBpW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBpO1xuXHRcdH0gZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmV0dXJuIHRoaXNbMF0uYXR0cmlidXRlc1tkYXRhS2V5XTtcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uZGF0YXNldFtkYXRhS2V5XSA9IHZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufVxuIiwiei5mbi5vbiA9IHouZm4uYmluZCA9IF9lYWNoKGZ1bmN0aW9uIF9vbihldmVudFR5cGUsIGZuKSB7XG5cdHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGZuLCBmYWxzZSk7XG59KTtcblxuei5mbi5vZmYgPSB6LmZuLnVuYmluZCA9IF9lYWNoKGZ1bmN0aW9uIF9vZmYoZXZlbnRUeXBlLCBmbikge1xuXHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmbiwgZmFsc2UpO1xufSk7XG5cbnouZm4udHJpZ2dlciA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGRhdGEpIHtcblx0dmFyIGV2ZW50LCBfZGF0YSxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0dHJ5IHtcblx0XHRfZGF0YVx0PSBkYXRhID8ge2RldGFpbDogZGF0YX0gOiB1bmRlZmluZWQ7XG5cdFx0ZXZlbnRcdD0gbmV3IEN1c3RvbUV2ZW50KGV2ZW50VHlwZSwgX2RhdGEpO1xuXHR9IGNhdGNoIChlcnIpIHtcblx0XHRldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuXHRcdGV2ZW50LmluaXRDdXN0b21FdmVudChldmVudFR5cGUsIHRydWUsIHRydWUsIGRhdGEpO1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuIiwiZnVuY3Rpb24gX2lzV2l0aEZ1bmN0aW9uKGVsZW0sIGZuKSB7XG5cdHJldHVybiBmbi5jYWxsKGVsZW0sIGVsZW0pO1xufVxuXG5mdW5jdGlvbiBfaXNXaXRoRWxlbWVudChlbGVtMSwgZWxlbTIpIHtcblx0cmV0dXJuIGVsZW0xID09PSBlbGVtMjtcbn1cblxuei5mbi5pcyA9IChmdW5jdGlvbiBfaXMoKSB7XG5cdHZhciBtYXRjaGVzLFxuXHRcdGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG5cdG1hdGNoZXNcdD0gYm9keS5tYXRjaGVzIHx8IGJvZHkubWF0Y2hlc1NlbGVjdG9yIHx8IGJvZHkubXNNYXRjaGVzU2VsZWN0b3I7XG5cdG1hdGNoZXMgPSBtYXRjaGVzIHx8IGJvZHkubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGJvZHkud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGJvZHkub01hdGNoZXNTZWxlY3RvcjtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG5cdFx0dmFyIF9pc1dpdGgsIHJldCxcblx0XHRcdGlcdD0gMCxcblx0XHRcdGxcdD0gdGhpcy5sZW5ndGg7XG5cblx0XHRzd2l0Y2ggKHR5cGVvZiBzZWxlY3Rvcikge1xuXHRcdFx0Y2FzZSBcInN0cmluZ1wiOlxuXHRcdFx0XHRfaXNXaXRoID0gbWF0Y2hlcztcblx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFwiZnVuY3Rpb25cIjpcblx0XHRcdFx0X2lzV2l0aCA9IF9pc1dpdGhGdW5jdGlvbjtcblx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIFwib2JqZWN0XCI6XG5cdFx0XHRcdGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XG5cdFx0XHRcdFx0X2lzV2l0aCA9IF9pc1dpdGhFbGVtZW50O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2lzIGlzIGludmFsaWRcIik7XG5cdFx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2lzIGlzIGludmFsaWRcIik7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cmV0ID0gX2lzV2l0aCh0aGlzW2ldLCBzZWxlY3Rvcik7XG5cblx0XHRcdGlmIChyZXQpIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG59KSgpO1xuIiwiei5mbi5oaWRlID0gX2VhY2goZnVuY3Rpb24gaGlkZSgpIHtcblx0dGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnouZm4uc2hvdyA9IF9lYWNoKGZ1bmN0aW9uIHNob3coKSB7XG5cdHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnouZm4uY2xvbmUgPSBmdW5jdGlvbiAoZGVlcCkge1xuXHR2YXIgaSA9IDA7XG5cblx0aWYgKGRlZXAgPT09IHVuZGVmaW5lZCB8fCBkZWVwID09PSBudWxsKSB7XG5cdFx0ZGVlcCA9IGZhbHNlO1xuXHR9XG5cblx0Zm9yICg7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpc1tpXSA9IHRoaXNbaV0uY2xvbmVOb2RlKGRlZXApO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLmh0bWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGksIGw7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gdGhpcy5pbm5lckhUTUw7XG5cdH1cblxuXHRmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmlubmVySFRNTCA9IHZhbHVlO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLnRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGksIGw7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gdGhpcy50ZXh0Q29udGVudDtcblx0fVxuXG5cdGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdHRoaXNbaV0udGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuei5mbi5nZXRBdHRyID0gZnVuY3Rpb24gKGtleSkge1xuXHRpZiAoIWtleSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2dldEF0dHIgaXMgcmVxdWlyZWRcIik7XG5cdH1cblxuXHRyZXR1cm4gdGhpc1swXSAmJiB0aGlzWzBdLmdldEF0dHJpYnV0ZShrZXkpO1xufTtcblxuei5mbi5zZXRBdHRyID0gX2VhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0aWYgKCFrZXkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNzZXRBdHRyIGlzIHJlcXVpcmVkXCIpO1xuXHR9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIG9mIHojc2V0QXR0ciBpcyByZXF1aXJlZFwiKTtcblx0fVxuXG5cdHRoaXMuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuXHRyZXR1cm4gdGhpcztcbn0pO1xuXG56LmZuLmF0dHIgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB0aGlzLmdldEF0dHIoa2V5KTtcblx0fVxuXG5cdHRoaXMuc2V0QXR0cihrZXksIHZhbHVlKTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLnJlcGxhY2VXaXRoID0gei5mbi5yZXBsYWNlID0gX2VhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojcmVwbGFjZSBpcyByZXF1aXJlZFwiKTtcblx0fVxuXG5cdHRoaXMub3V0ZXJIVE1MID0gdmFsdWU7XG59KTtcblxuaWYgKFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG5cdHouZm4uYWRkQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0fSk7XG5cblx0ei5mbi5yZW1vdmVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuXHRcdHRoaXMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHR9KTtcblxuXHR6LmZuLnRvZ2dsZUNsYXNzID0gX2VhY2goZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCBmb3JjZSkge1xuXHRcdGlmIChmb3JjZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmNsYXNzTGlzdFtmb3JjZSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShjbGFzc05hbWUpO1xuXHR9KTtcbn0gZWxzZSB7XG5cdHouZm4uYWRkQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTmFtZSArPSBcIiBcIiArIGNsYXNzTmFtZTtcblx0fSk7XG5cblx0ei5mbi5yZW1vdmVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuXHRcdHRoaXMuY2xhc3NOYW1lICs9IHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxiKVwiICsgY2xhc3NOYW1lICsgXCIoXFxcXGJ8JClcIiwgXCJnXCIpLCBcIiBcIik7XG5cdH0pO1xuXG5cdHouZm4udG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lLCBmb3JjZSkge1xuXHRcdHRoaXNbZm9yY2UgPyBcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCJdKGNsYXNzTmFtZSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG4iLCJ2YXIgX3NlbGVjdG9yc0NhY2hlLFxuXHRfc2VsZWN0b3JzID0ge307XG5cbmZ1bmN0aW9uIF9maW5kKHNjb3BlLCBzdHJFbGVtKSB7XG5cdHZhciByZXQgPSBuZXcgekFycmF5KCk7XG5cblx0c2NvcGUuZm9yRWFjaChmdW5jdGlvbiBfZmluZEZvckVhY2goc2NvcGVkRWxlbSkge1xuXHRcdHJldC5wdXNoLmFwcGx5KHJldCwgX3NlbGVjdChzY29wZWRFbGVtLCBzdHJFbGVtKSk7XG5cdH0pO1xuXG5cdHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIF9zZWxlY3Qoc2NvcGVkRWxlbSwgc3RyRWxlbSkge1xuXHRpZiAoIX5zdHJFbGVtLmluZGV4T2YoXCI6XCIpIHx8IF9zZWxlY3RvcnNDYWNoZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIHNjb3BlZEVsZW0ucXVlcnlTZWxlY3RvckFsbChzdHJFbGVtKTtcblx0fVxuXG5cdGlmIChfc2VsZWN0b3JzQ2FjaGUgPT09IGZhbHNlKSB7XG5cdFx0X2dlbmVyYXRlU2VsZWN0b3JzQ2FjaGUoKTtcblx0fVxuXG5cdGlmICghc3RyRWxlbS5tYXRjaChfc2VsZWN0b3JzQ2FjaGUpKSB7XG5cdFx0cmV0dXJuIHNjb3BlZEVsZW0ucXVlcnlTZWxlY3RvckFsbChzdHJFbGVtKTtcblx0fVxuXG5cdHJldHVybiBfc2VsZWN0MihzY29wZWRFbGVtLCBzdHJFbGVtKTtcbn1cblxuZnVuY3Rpb24gX3NlbGVjdDIoc2NvcGVkRWxlbSwgc3RyRWxlbSkge1xuXHR2YXIgZW50cnksIHNlbGVjdG9ycyxcblx0XHRzY29wZVx0PSBuZXcgekFycmF5KHNjb3BlZEVsZW0pLFxuXHRcdGN1cnJlbnRcdD0gXCJcIixcblx0XHRlbnRyaWVzXHQ9IHN0ckVsZW0uc3BsaXQoL1xccysvKTtcblxuXHR3aGlsZSAoZW50cnkgPSBlbnRyaWVzLnNoaWZ0KCkpIHtcblx0XHRzZWxlY3RvcnMgPSBlbnRyeS5tYXRjaChfc2VsZWN0b3JzQ2FjaGUpO1xuXG5cdFx0aWYgKCFzZWxlY3RvcnMpIHtcblx0XHRcdGN1cnJlbnQgKz0gZW50cnkgKyBcIiBcIjtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGN1cnJlbnRcdCs9IGVudHJ5LnJlcGxhY2UoX3NlbGVjdG9yc0NhY2hlLCBcIlwiKSB8fCBcIipcIjtcblx0XHRlbnRyeVx0PSBuZXcgekFycmF5KCk7XG5cblx0XHRzY29wZS5mb3JFYWNoKGZ1bmN0aW9uIF9zZWxlY3RGb3JFYWNoKHNjb3BlZEVsZW0pIHtcblx0XHRcdHZhciByZXQgPSBuZXcgekFycmF5KCk7XG5cblx0XHRcdHNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIHNlbGVjdG9yc0ZvckVhY2goc2VsZWN0b3IpIHtcblx0XHRcdFx0cmV0LnB1c2guYXBwbHkocmV0LCBfc2VsZWN0b3JzW3NlbGVjdG9yXS5jYWxsKHNjb3BlZEVsZW0sIGN1cnJlbnQpKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRlbnRyeS5wdXNoLmFwcGx5KGVudHJ5LCByZXQpO1xuXHRcdH0pO1xuXG5cdFx0c2NvcGVcdD0gZW50cnk7XG5cdFx0Y3VycmVudFx0PSBcIlwiO1xuXHR9XG5cblx0aWYgKGN1cnJlbnQpIHtcblx0XHRlbnRyeSA9IG5ldyB6QXJyYXkoKTtcblxuXHRcdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gY3VycmVudEZvckVhY2goc2NvcGVkRWxlbSkge1xuXHRcdFx0ZW50cnkucHVzaC5hcHBseShlbnRyeSwgc2NvcGVkRWxlbS5xdWVyeVNlbGVjdG9yQWxsKGN1cnJlbnQpKTtcblx0XHR9KTtcblxuXHRcdHNjb3BlID0gZW50cnk7XG5cdH1cblxuXHRyZXR1cm4gc2NvcGU7XG59XG5cbmZ1bmN0aW9uIF9nZW5lcmF0ZVNlbGVjdG9yc0NhY2hlKCkge1xuXHR2YXIgc2VsZWN0b3JzXHQ9IE9iamVjdC5rZXlzKF9zZWxlY3RvcnMpLmpvaW4oXCJ8XCIpLnJlcGxhY2UoLzovZywgXCJcIik7XG5cdF9zZWxlY3RvcnNDYWNoZVx0PSBuZXcgUmVnRXhwKFwiOihcIiArIHNlbGVjdG9ycyArIFwiKVwiLCBcImdcIik7XG59XG4iLCJ6LnJlZ2lzdGVyU2VsZWN0b3IgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIGZuKSB7XG5cdGlmICghc2VsZWN0b3IgfHwgdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojcmVnaXN0ZXJTZWxlY3RvciBtdXN0IGJlIGEgc3RyaW5nIHNlbGVjdG9yXCIpO1xuXHR9IGVsc2UgaWYgKCFmbiB8fCB0eXBlb2YgZm4gIT09IFwiZnVuY3Rpb25cIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBwYXJhbWV0ZXIgb2YgeiNyZWdpc3RlclNlbGVjdG9yIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcblx0fVxuXG5cdGlmIChzZWxlY3RvclswXSAhPT0gXCI6XCIpIHtcblx0XHRzZWxlY3RvciA9IFwiOlwiICsgc2VsZWN0b3I7XG5cdH1cblxuXHRfc2VsZWN0b3JzQ2FjaGVcdFx0XHQ9IGZhbHNlO1xuXHRfc2VsZWN0b3JzW3NlbGVjdG9yXVx0PSBmbjtcbn07XG5cbnoucmVnaXN0ZXJTZWxlY3RvcihcIjpmaXJzdFwiLCBmdW5jdGlvbiBzZWxlY3RvckZpcnN0KHF1ZXJ5KSB7XG5cdHJldHVybiB6KHRoaXMucXVlcnlTZWxlY3RvcihxdWVyeSkpO1xufSk7XG5cbnoucmVnaXN0ZXJTZWxlY3RvcihcIjppbnB1dFwiLCAoZnVuY3Rpb24gc2VsZWN0b3JGaXJzdCgpIHtcblx0dmFyIHRhZ3MgPSBcIklOUFVULFRFWFRBUkVBLFNFTEVDVCxCVVRUT05cIi5zcGxpdChcIixcIik7XG5cblx0ZnVuY3Rpb24gZmlsdGVyKGVsZW1lbnQpIHtcblx0XHRyZXR1cm4gfnRhZ3MuaW5kZXhPZihlbGVtZW50LnRhZ05hbWUpO1xuXHR9XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHNlbGVjdG9ySW5wdXQocXVlcnkpIHtcblx0XHR2YXIgZWxlbWVudHMgPSBuZXcgekFycmF5KCk7XG5cblx0XHRlbGVtZW50cy5wdXNoLmFwcGx5KGVsZW1lbnRzLCBbXS5maWx0ZXIuY2FsbCh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwocXVlcnkpLCBmaWx0ZXIpKTtcblxuXHRcdHJldHVybiBlbGVtZW50cztcblx0fTtcbn0pKCkpO1xuIiwiei5mbi5wYXJlbnQgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLnBhcmVudE5vZGU7XG59KTtcblxuei5mbi5uZXh0ID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmc7XG59KTtcblxuei5mbi5wcmV2ID0gei5mbi5wcmV2aW91cyA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMucHJldmlvdXNFbGVtZW50U2libGluZztcbn0pO1xuXG56LmZuLnNpYmxpbmdzID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gW10uZmlsdGVyLmNhbGwodGhpcy5wYXJlbnROb2RlLmNoaWxkcmVuLCBmdW5jdGlvbihjaGlsZCkge1xuXHRcdHJldHVybiBjaGlsZCAhPT0gdGhpcztcblx0fSwgdGhpcyk7XG59KTtcbiIsImZ1bmN0aW9uIF9jaGVja1ZhbGlkRWxlbWVudChlbGVtKSB7XG5cdGlmIChlbGVtIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAoZWxlbSBpbnN0YW5jZW9mIEV2ZW50VGFyZ2V0KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAodHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBfZWFjaChmbikge1xuXHRyZXR1cm4gZnVuY3Rpb24gcnVuRWFjaCgpIHtcblx0XHR2YXIgaVx0PSAwLFxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aDtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRmbi5hcHBseSh0aGlzW2ldLCBhcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBfZWFjaE5ldyhmbikge1xuXHRyZXR1cm4gZnVuY3Rpb24gcnVuRWFjaCgpIHtcblx0XHR2YXIgcmV0LFxuXHRcdFx0aVx0PSAwLFxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aCxcblx0XHRcdGFyclx0PSBuZXcgekFycmF5KCk7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cmV0ID0gZm4uYXBwbHkodGhpc1tpXSwgYXJndW1lbnRzKTtcblxuXHRcdFx0aWYgKHJldCkge1xuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShyZXQpICYmIHJldC5sZW5ndGgpIHtcblx0XHRcdFx0XHRhcnIucHVzaC5hcHBseShhcnIsIHJldCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXJyLnB1c2gocmV0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBhcnI7XG5cdH07XG59XG5cbnouZGVlcEV4dGVuZCA9IGZ1bmN0aW9uIF9leHRlbmQoZGVlcCkge1xuXHR2YXIgb2JqLCB0YXJnZXQsXG5cdFx0aSA9IDI7XG5cblx0aWYgKHR5cGVvZiBkZWVwID09PSBcIm9iamVjdFwiKSB7XG5cdFx0dGFyZ2V0XHQ9IGRlZXAgfHwge307XG5cdFx0ZGVlcFx0PSBJbmZpbml0eTtcblx0fSBlbHNlIHtcblx0XHRkZWVwXHQ9IGRlZXAgPT09IHRydWUgPyBJbmZpbml0eSA6IChkZWVwIHwgMCk7XG5cdFx0dGFyZ2V0XHQ9IGFyZ3VtZW50c1sxXSB8fCB7fTtcblx0fVxuXG5cdGZvciAoOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0b2JqID0gYXJndW1lbnRzW2ldO1xuXG5cdFx0aWYgKCFvYmopIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0XHRcdGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRpZiAoZGVlcCAmJiB0eXBlb2Ygb2JqW2tleV0gPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRfZXh0ZW5kKGRlZXAgLSAxLCB0YXJnZXRba2V5XSwgb2JqW2tleV0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRhcmdldFtrZXldID0gb2JqW2tleV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxuei5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdFtdLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsIDApO1xuXHRyZXR1cm4gei5kZWVwRXh0ZW5kLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG59O1xuXG56LmZuLmVhY2ggPSBfZWFjaChmdW5jdGlvbiBlYWNoKGZuKSB7XG5cdGZuLmNhbGwodGhpcywgdGhpcyk7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnoucXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAob2JqLCBwcmVmaXgpIHtcblx0dmFyIGksIGtleSwgdmFsLFxuXHRcdHN0cmluZ3MgPSBbXTtcblxuXHRmb3IgKGkgaW4gb2JqKSB7XG5cdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0aWYgKHByZWZpeCkge1xuXHRcdFx0XHRrZXkgPSBwcmVmaXggKyBcIltcIiArIGkgKyBcIl1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGtleSA9IGk7XG5cdFx0XHR9XG5cblx0XHRcdHZhbCA9IG9ialtpXTtcblxuXHRcdFx0aWYgKHZhbCAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdHN0cmluZ3MucHVzaChxdWVyeVN0cmluZyh2YWwsIGtleSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RyaW5ncy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0cmluZ3Muam9pbihcIiZcIik7XG59O1xuIiwifSkod2luZG93LCBkb2N1bWVudCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=