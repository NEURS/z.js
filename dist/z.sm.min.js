!function(t,e){function n(t,e){if(t instanceof g)return t;if(t instanceof Element||t instanceof Window||t instanceof Document)return new g(t);if(void 0===t||null===t)return new g;if("string"!=typeof t)throw new Error("First parameter is invalid");if(e){if(!p(e))throw new Error("Second parameter is invalid");e=n(e)}else e=w;return u(e,t)}function r(){}function i(t,e){var n;return e?this.responseXML?this.responseXML:(n=new DOMParser,n.parseFromString(t,"application/xml")):(n=new XMLSerializer,n.serializeToString(t))}function s(t,e){return e.call(t,t)}function o(t,e){return t===e}function a(t){var e,r=0,i=[];for(t=n(t),e=t.find("script");r<e.length;r++)i.push({src:e[r].src,text:e[r].textContent}),e[r].remove();return i}function f(t){for(var n,r=0;r<t.length;r++)n=e.createElement("script"),t[r].src?n.src=t[r].src:t[r].text&&(n.text=t[r].text),e.head.appendChild(n).parentNode.removeChild(n)}function u(t,e){var n=new g;return t.forEach(function(t){n.push.apply(n,c(t,e))}),n}function c(t,e){return~e.indexOf(":")&&void 0!==b?(b===!1&&h(),e.match(b)?l(t,e):t.querySelectorAll(e)):t.querySelectorAll(e)}function l(t,e){for(var n,r,i=new g(t),s="",o=e.split(/\s+/);n=o.shift();)r=n.match(b),r?(s+=n.replace(b,"")||"*",n=new g,i.forEach(function(t){var e=new g;r.forEach(function(n){e.push.apply(e,A[n].call(t,s))}),n.push.apply(n,e)}),i=n,s=""):s+=n+" ";return s&&(n=new g,i.forEach(function(t){n.push.apply(n,t.querySelectorAll(s))}),i=n),i}function h(){var t=Object.keys(A).join("|").replace(/:/g,"");b=new RegExp(":("+t+")","g")}function p(t){return t instanceof g?!0:t instanceof Element||t instanceof Window||t instanceof Document?!0:"string"==typeof t?!0:void 0}function d(t){return function(){for(var e=0,n=this.length;n>e;e++)t.apply(this[e],arguments);return this}}function v(t){return function(){for(var e,n=0,r=this.length,i=new g;r>n;n++)e=t.apply(this[n],arguments),e&&(Array.isArray(e)&&e.length||e instanceof HTMLCollection?i.push.apply(i,e):i.push(e));return i}}function m(t,e){for(var n=new g;t[e]&&1===t.nodeType;)t=t[e],n.push(t);return n}var g,y,w,E;try{E=e.createElement("iframe"),E.style.width=0,E.style.height=0,E.style.borderStyle="none",e.body.appendChild(E),g=E.contentWindow.Array,e.body.removeChild(E)}catch(x){g=Array}t.z=n,n.fn=g.prototype,y=n(t),w=n(e),n.fn.find=function(t){if("string"!=typeof t)throw new Error("First paramater of z#find() should be a string");return u(this,t)};var T,C,S={};T={method:"GET",requestType:"text",responseType:"text",url:t.location+"",query:null,data:null,setup:r,success:r,error:r},C={text:function(t){return(t||"")+""}},n.ajax=function(t){var e=new XMLHttpRequest;if(t=n.extend({context:e},T,t),!C[t.requestType])throw new Error("Invalid option `requestType`");if(!C[t.responseType])throw new Error("Invalid option `responseType`");t.query&&~["HEAD","GET"].indexOf(t.method.toUpperCase())&&(t.url+=~t.url.indexOf("?")?"&":"?",t.url+=n.queryString(t.query),t.url=t.url.replace(/(\?|&)&/g,"$1")),e.open(t.method,t.url,!0),e.onload=function(){var n;e.status>=200&&e.status<400?(n=C[t.responseType].call(e,e.responseText,!0),t.success.call(t.context,n)):t.error.call(t.context,e.status,e.statusText)},e.onerror=function(){t.error.call(t.context,e.status,e.statusText)},~["HEAD","GET"].indexOf(t.method.toUpperCase())||e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.data&&(t.data=C[t.requestType].call(e,t.data,!1)),t.setup.call(e,e),e.send(t.data)},T.requestType="detect",T.responseType="detect",n.registerAjaxType=function(t,e,n){n||"function"!=typeof e||(n=e,e=!1),C[t]=n,e&&(S[e]=t)},n.registerAjaxType("detect",function(t,e){var n,r="text";return e?(n=this.getResponseHeader("Content-Type")||"",n=n.split(";")[0].trim(),r=S[n]||"text"):t&&"object"==typeof t&&t.toString==={}.toString&&(r="json"),C[r].call(this,t,e)}),n.registerAjaxType("json","application/json",function(t,e){return e?JSON.parse(t):JSON.stringify(t)}),n.registerAjaxType("html","text/html",function(t,n){var r,i;return n?(i=new g,r=e.implementation.createHTMLDocument(),r.documentElement.innerHTML=t,i.push.apply(i,i.slice.call(r.body.children,0)),i):t.outerHTML}),n.registerAjaxType("xml","text/xml",i),n.registerAjaxType("xml","application/xml",i),n.fn.data="dataset"in e.body?function(t,e){var n,r;if(this.length){if(void 0===t)return this[0].dataset;if(void 0===e)return this[0].dataset[t];for(n=0,r=this.length;r>n;n++)this[n].dataset[t]=e;return this}}:function(t,e){var n,r,i="data-"+(t||"");if(this.length){if(void 0===t)return n={},[].forEach.call(this[0].attributes,function(t){return n[t.name]=t.value}),n;if(void 0===e)return this[0].attributes[i];for(n=0,r=this.length;r>n;n++)this[n].dataset[i]=e;return this}},n.data=function(t,e,r){n(t).data(e,r)},n.fn.on=n.fn.bind=d(function(t,e){this.addEventListener(t,e,!1)}),n.fn.one=d(function(t,e){var r=!1;n(this).on(t,function i(s){r||(r=!0,n(this).off(t,i),e.call(this,s))})}),n.fn.off=n.fn.unbind=d(function(t,e){this.removeEventListener(t,e,!1)}),n.fn.trigger=function(t,n){var r,i=0,s=this.length;void 0===n&&(n={}),n.event=n;try{r=new CustomEvent(t,{detail:n})}catch(o){r=e.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,n)}for(;s>i;i++)this[i].dispatchEvent(r);return this},n.fn.is=function(){var t,n=e.body;return t=n.matches||n.matchesSelector||n.msMatchesSelector,t=t||n.mozMatchesSelector||n.webkitMatchesSelector||n.oMatchesSelector,function(e){var n,r,i=0,a=this.length;switch(typeof e){case"string":n=t;break;case"function":n=s;break;case"object":if(!(e instanceof Element||e instanceof Window||e instanceof Document))throw new Error("First parameter of z#is is invalid");n=o;default:throw new Error("First parameter of z#is is invalid")}for(;a>i;i++)if(r=n(this[i],e))return r;return!1}}(),n.fn.hide=d(function(){return this.style.display="none",this}),n.fn.show=d(function(){return this.style.display="",this}),n.fn.clone=function(t){var e=0;for((void 0===t||null===t)&&(t=!1);e<this.length;e++)this[e]=this[e].cloneNode(t);return this},n.fn.html=function(t){var e,n;if(void 0===t)return this[0].innerHTML;for(e=0,n=this.length;n>e;e++)this[e].innerHTML=t;return this},n.fn.text=function(t){var e,n;if(void 0===t)return this.textContent;for(e=0,n=this.length;n>e;e++)this[e].textContent=t;return this},n.fn.getAttr=function(t){if(!t)throw new Error("First parameter of z#getAttr is required");return this[0]&&this[0].getAttribute(t)},n.fn.setAttr=d(function(t,e){if(!t)throw new Error("First parameter of z#setAttr is required");if(void 0===e)throw new Error("Second parameter of z#setAttr is required");return this.setAttribute(t,e),this}),n.fn.attr=function(t,e){return void 0===e?this.getAttr(t):(this.setAttr(t,e),this)},n.fn.replaceWith=n.fn.replace=d(function(t){var e;void 0===t||null===t?this.remove():t instanceof g||t instanceof EventTarget?(e=a(t),t instanceof g&&(t=t[0]),this.parentNode.replaceChild(t,this),f(e)):this.outerHTML=t}),"classList"in e.documentElement?(n.fn.addClass=d(function(t){this.classList.add(t)}),n.fn.removeClass=d(function(t){this.classList.remove(t)}),n.fn.toggleClass=d(function(t,e){return void 0===e?void this.classList.toggle(t):void this.classList[e?"add":"remove"](t)}),n.fn.hasClass=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e].classList.contains(t))return!0;return!1}):(n.fn.addClass=d(function(t){this.className+=" "+t}),n.fn.removeClass=d(function(t){this.className+=this.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","g")," ")}),n.fn.toggleClass=function(t,e){return this[e?"addClass":"removeClass"](t),this},n.fn.hasClass=function(t){for(var e=0,n=this.length,r=new RegExp("(^| )"+t+"( |$)","gi");n>e;e++)if(r.test(this[e].className))return!0;return!1}),n.fn.append=function(t){var e=0,n=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;n>e;e++)this[e].insertAdjacentHTML("beforeend",t);return this}for(t instanceof g&&(t=t[0]);n>e;e++)this[e].appendChild(t);return this},n.fn.prepend=function(t){var e=0,n=this.length;if(void 0===t)throw new Error("First parameter of z#prepend is required.");if("string"==typeof t){for(;n>e;e++)this[e].insertAdjacentHTML("afterbegin",t);return this}for(t instanceof g&&(t=t[0]);n>e;e++)this[e].insertBefore(t,this[e].firstChild);return this},n.fn.after=function(t){var e=0,n=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;n>e;e++)this[e].insertAdjacentHTML("afterend",t);return this}for(t instanceof g&&(t=t[0]);n>e;e++)this[e].insertAdjacentHTML("afterend",t.outerHTML);return this},n.fn.css=function(t,e){var n=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#css is required.");if(void 0===e)return getComputedStyle(this[0])[t];for(t=t.replace(/-./g,function(t){return t.substr(1).toUpperCase()});r>n;n++)this[n].style[t]=e;return this},n.fn.remove=d(function(){this.parentNode.removeChild(this)}),n.fn.empty=d(function(){this.innerHTML=""});var b,A={};n.registerSelector=function(t,e){if(!t||"string"!=typeof t)throw new Error("First parameter of z#registerSelector must be a string selector");if(!e||"function"!=typeof e)throw new Error("Second parameter of z#registerSelector must be a function");":"!==t[0]&&(t=":"+t),b=!1,A[t]=e},n.registerSelector(":first",function(t){return n(this.querySelector(t))}),n.registerSelector(":input",function(){function t(t){return~e.indexOf(t.tagName)}var e="INPUT,TEXTAREA,SELECT,BUTTON".split(",");return function(e){var n=new g;return n.push.apply(n,[].filter.call(this.querySelectorAll(e),t)),n}}()),n.fn.parent=v(function(){return this.parentNode}),n.fn.next=v(function(){return this.nextElementSibling}),n.fn.prev=n.fn.previous=v(function(){return this.previousElementSibling}),n.fn.siblings=v(function(){return[].filter.call(this.parentNode.children,function(t){return t!==this},this)}),n.fn.prevAll=v(function(){return m(this,"previousElementSibling")}),n.fn.children=v(function(){return this.children}),n.deepExtend=function L(t){var e,n,r=2;for("object"==typeof t?(n=t||{},t=1/0):(t=t===!0?1/0:0|t,n=arguments[1]||{});r<arguments.length;r++)if(e=arguments[r])for(var i in e)e.hasOwnProperty(i)&&(t&&"object"==typeof e[i]?L(t-1,n[i],e[i]):n[i]=e[i]);return n},n.extend=function(){return[].unshift.call(arguments,0),n.deepExtend.apply(null,arguments)},n.fn.each=d(function(t){return t.call(this,this),this}),n.queryString=function(t,e){var r,i,s,o=[];for(r in t)t.hasOwnProperty(r)&&(i=e?e+"["+r+"]":r,s=t[r],o.push(s&&"object"==typeof s?n.queryString(s,i):encodeURIComponent(i)+"="+encodeURIComponent(s)));return o.join("&")}}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiei5zbS5taW4uanMiLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJfYmFzZS5qcyIsImFqYXguanMiLCJhamF4X3R5cGVzLmpzIiwiZGF0YS5qcyIsImV2ZW50cy5qcyIsImZpbHRlcmluZy5qcyIsIm1hbmlwdWxhdGlvbi5qcyIsInNlbGVjdG9ycy5qcyIsInNlbGVjdG9yc19jdXN0b20uanMiLCJ0cmF2ZXJzaW5nLmpzIiwidXRpbHMuanMiLCJfZm9vdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQVVBLFNBQUEsRUFBQSxHQ1JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsWUFBQSxVQUFBLFlBQUEsU0FBQSxZQUFBLFVBQ0EsTUFBQSxJQUFBLEdBQUEsRUFDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLEVBQ0EsTUFBQSxJQUFBLEVBQ0EsSUFBQSxnQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLDZCQUdBLElBQUEsRUFBQSxDQUNBLElBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLDhCQUdBLEdBQUEsRUFBQSxPQUVBLEdBQUEsQ0FHQSxPQUFBLEdBQUEsRUFBQSxHQUdBLFFBQUEsTUMrQkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsT0FBQSxHQUtBLEtBQUEsWUFDQSxLQUFBLGFBR0EsRUFBQSxHQUFBLFdBQ0EsRUFBQSxnQkFBQSxFQUFBLHFCQVRBLEVBQUEsR0FBQSxlQUNBLEVBQUEsa0JBQUEsSUM5REEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUMrRkEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQUEsRUFDQSxJQUtBLEtBSEEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEtBQUEsVUFFQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsTUFDQSxJQUFBLEVBQUEsR0FBQSxJQUNBLEtBQUEsRUFBQSxHQUFBLGNBR0EsRUFBQSxHQUFBLFFBR0EsT0FBQSxHQUdBLFFBQUEsR0FBQSxHQUlBLElBSEEsR0FBQSxHQUNBLEVBQUEsRUFFQSxFQUFBLEVBQUEsT0FBQSxJQUNBLEVBQUEsRUFBQSxjQUFBLFVBRUEsRUFBQSxHQUFBLElBQ0EsRUFBQSxJQUFBLEVBQUEsR0FBQSxJQUNBLEVBQUEsR0FBQSxPQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsTUFHQSxFQUFBLEtBQUEsWUFBQSxHQUFBLFdBQUEsWUFBQSxHQ2xJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBTUEsT0FKQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLE1BR0EsRUFHQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxRQUFBLE1BQUEsU0FBQSxHQUlBLEtBQUEsR0FDQSxJQUdBLEVBQUEsTUFBQSxHQUlBLEVBQUEsRUFBQSxHQUhBLEVBQUEsaUJBQUEsSUFSQSxFQUFBLGlCQUFBLEdBY0EsUUFBQSxHQUFBLEVBQUEsR0FNQSxJQUxBLEdBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLE9BRUEsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE1BQUEsR0FFQSxHQUtBLEdBQUEsRUFBQSxRQUFBLEVBQUEsS0FBQSxJQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFFQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxNQUdBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FHQSxFQUFBLEVBQ0EsRUFBQSxJQWxCQSxHQUFBLEVBQUEsR0ErQkEsT0FWQSxLQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLGlCQUFBLE1BR0EsRUFBQSxHQUdBLEVBR0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxPQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsUUFBQSxLQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsS0FBQSxFQUFBLElBQUEsS0MzRUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxhQUFBLElBQ0EsRUFHQSxZQUFBLFVBQUEsWUFBQSxTQUFBLFlBQUEsV0FDQSxFQUdBLGdCQUFBLElBQ0EsRUFEQSxPQUtBLFFBQUEsR0FBQSxHQUNBLE1BQUEsWUFJQSxJQUhBLEdBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxPQUVBLEVBQUEsRUFBQSxJQUNBLEVBQUEsTUFBQSxLQUFBLEdBQUEsVUFHQSxPQUFBLE9BSUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxZQU1BLElBTEEsR0FBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLEdBQUEsR0FFQSxFQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsTUFBQSxLQUFBLEdBQUEsV0FFQSxJQUNBLE1BQUEsUUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLGdCQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsR0FLQSxPQUFBLElBSUEsUUFBQSxHQUFBLEVBQUEsR0FHQSxJQUZBLEdBQUEsR0FBQSxHQUFBLEdBRUEsRUFBQSxJQUFBLElBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxFQUdBLE9BQUEsR0wxREEsR0FBQSxHQUFBLEVBQUEsRUFBQSxDQTRCQSxLQUNBLEVBQUEsRUFBQSxjQUFBLFVBRUEsRUFBQSxNQUFBLE1BQUEsRUFDQSxFQUFBLE1BQUEsT0FBQSxFQUNBLEVBQUEsTUFBQSxZQUFBLE9BRUEsRUFBQSxLQUFBLFlBQUEsR0FFQSxFQUFBLEVBQUEsY0FBQSxNQUVBLEVBQUEsS0FBQSxZQUFBLEdBQ0EsTUFBQSxHQUNBLEVBQUEsTUFJQSxFQUFBLEVBQUEsRUFDQSxFQUFBLEdBQUEsRUFBQSxVQUNBLEVBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxHQUVBLEVBQUEsR0FBQSxLQUFBLFNBQUEsR0FDQSxHQUFBLGdCQUFBLEdBQ0EsS0FBQSxJQUFBLE9BQUEsaURBR0EsT0FBQSxHQUFBLEtBQUEsR012REEsSUFBQSxHQUFBLEVBQ0EsSUFFQSxJQUNBLE9BQUEsTUFDQSxZQUFBLE9BQ0EsYUFBQSxPQUNBLElBQUEsRUFBQSxTQUFBLEdBQ0EsTUFBQSxLQUNBLEtBQUEsS0FDQSxNQUFBLEVBQ0EsUUFBQSxFQUNBLE1BQUEsR0FHQSxHQUNBLEtBQUEsU0FBQSxHQUNBLE9BQUEsR0FBQSxJQUFBLEtBSUEsRUFBQSxLQUFBLFNBQUEsR0FDQSxHQUNBLEdBQUEsR0FBQSxlQU1BLElBSkEsRUFBQSxFQUFBLFFBQ0EsUUFBQSxHQUNBLEVBQUEsSUFFQSxFQUFBLEVBQUEsYUFDQSxLQUFBLElBQUEsT0FBQSwrQkFDQSxLQUFBLEVBQUEsRUFBQSxjQUNBLEtBQUEsSUFBQSxPQUFBLGdDQUdBLEdBQUEsU0FBQSxPQUFBLE9BQUEsUUFBQSxFQUFBLE9BQUEsaUJBQ0EsRUFBQSxNQUFBLEVBQUEsSUFBQSxRQUFBLEtBQUEsSUFBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLFlBQUEsRUFBQSxPQUNBLEVBQUEsSUFBQSxFQUFBLElBQUEsUUFBQSxXQUFBLE9BR0EsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsR0FFQSxFQUFBLE9BQUEsV0FDQSxHQUFBLEVBRUEsR0FBQSxRQUFBLEtBQUEsRUFBQSxPQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsY0FBQSxLQUFBLEVBQUEsRUFBQSxjQUFBLEdBQ0EsRUFBQSxRQUFBLEtBQUEsRUFBQSxRQUFBLElBRUEsRUFBQSxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLGFBSUEsRUFBQSxRQUFBLFdBQ0EsRUFBQSxNQUFBLEtBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxFQUFBLGVBR0EsT0FBQSxPQUFBLFFBQUEsRUFBQSxPQUFBLGdCQUNBLEVBQUEsaUJBQUEsZUFBQSxvREFHQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEVBQUEsRUFBQSxhQUFBLEtBQUEsRUFBQSxFQUFBLE1BQUEsSUFHQSxFQUFBLE1BQUEsS0FBQSxFQUFBLEdBRUEsRUFBQSxLQUFBLEVBQUEsT0xwRUEsRUFBQSxZQUFBLFNBQ0EsRUFBQSxhQUFBLFNBRUEsRUFBQSxpQkFBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEdBQUEsa0JBQUEsS0FDQSxFQUFBLEVBQ0EsR0FBQSxHQUdBLEVBQUEsR0FBQSxFQUVBLElBQ0EsRUFBQSxHQUFBLElBSUEsRUFBQSxpQkFBQSxTQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FDQSxFQUFBLE1BWUEsT0FWQSxJQUNBLEVBQUEsS0FBQSxrQkFBQSxpQkFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLEtBQUEsR0FBQSxPQUNBLEVBQUEsRUFBQSxJQUFBLFFBRUEsR0FBQSxnQkFBQSxJQUFBLEVBQUEsY0FBQSxXQUNBLEVBQUEsUUFJQSxFQUFBLEdBQUEsS0FBQSxLQUFBLEVBQUEsS0FHQSxFQUFBLGlCQUFBLE9BQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsTUFBQSxHQUFBLEtBQUEsVUFBQSxLQUdBLEVBQUEsaUJBQUEsT0FBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLE9BQUEsSUFJQSxFQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsZUFBQSxxQkFFQSxFQUFBLGdCQUFBLFVBQUEsRUFFQSxFQUFBLEtBQUEsTUFBQSxFQUFBLEVBQUEsTUFBQSxLQUFBLEVBQUEsS0FBQSxTQUFBLElBRUEsR0FWQSxFQUFBLFlBYUEsRUFBQSxpQkFBQSxNQUFBLFdBQUEsR0FDQSxFQUFBLGlCQUFBLE1BQUEsa0JBQUEsR010REEsRUFBQSxHQUFBLEtBREEsV0FBQSxHQUFBLEtBQ0EsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxLQUFBLE9BQUEsQ0FJQSxHQUFBLFNBQUEsRUFDQSxNQUFBLE1BQUEsR0FBQSxPQUNBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFFBQUEsRUFHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsUUFBQSxHQUFBLENBR0EsT0FBQSxRQUdBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsU0FBQSxHQUFBLEdBRUEsSUFBQSxLQUFBLE9BQUEsQ0FJQSxHQUFBLFNBQUEsRUFPQSxNQU5BLFNBRUEsUUFBQSxLQUFBLEtBQUEsR0FBQSxXQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsUUFHQSxDQUNBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFdBQUEsRUFHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsUUFBQSxHQUFBLENBR0EsT0FBQSxRQUlBLEVBQUEsS0FBQSxTQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsR0FBQSxLQUFBLEVBQUEsSUNsREEsRUFBQSxHQUFBLEdBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLGlCQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsR0FBQSxJQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxJQUFBLENBRUEsR0FBQSxNQUFBLEdBQUEsRUFBQSxRQUFBLEdBQUEsR0FDQSxJQUlBLEdBQUEsRUFDQSxFQUFBLE1BQUEsSUFBQSxFQUFBLEdBRUEsRUFBQSxLQUFBLEtBQUEsUUFJQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsT0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsb0JBQUEsRUFBQSxHQUFBLEtBR0EsRUFBQSxHQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxVQUFBLElBQ0EsTUFHQSxFQUFBLE1BQUEsQ0FFQSxLQUNBLEVBQUEsR0FBQSxhQUFBLEdBQ0EsT0FBQSxJQUVBLE1BQUEsR0FDQSxFQUFBLEVBQUEsWUFBQSxlQUNBLEVBQUEsZ0JBQUEsR0FBQSxHQUFBLEVBQUEsR0FHQSxLQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxjQUFBLEVBR0EsT0FBQSxPTnZDQSxFQUFBLEdBQUEsR0FBQSxXQUNBLEdBQUEsR0FDQSxFQUFBLEVBQUEsSUFLQSxPQUhBLEdBQUEsRUFBQSxTQUFBLEVBQUEsaUJBQUEsRUFBQSxrQkFDQSxFQUFBLEdBQUEsRUFBQSxvQkFBQSxFQUFBLHVCQUFBLEVBQUEsaUJBRUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxjQUFBLElBQ0EsSUFBQSxTQUNBLEVBQUEsQ0FDQSxNQUVBLEtBQUEsV0FDQSxFQUFBLENBQ0EsTUFFQSxLQUFBLFNBQ0EsS0FBQSxZQUFBLFVBQUEsWUFBQSxTQUFBLFlBQUEsV0FHQSxLQUFBLElBQUEsT0FBQSxxQ0FGQSxHQUFBLENBSUEsU0FDQSxLQUFBLElBQUEsT0FBQSxzQ0FJQSxLQUFBLEVBQUEsRUFBQSxJQUdBLEdBRkEsRUFBQSxFQUFBLEtBQUEsR0FBQSxHQUdBLE1BQUEsRUFJQSxRQUFBLE1DaERBLEVBQUEsR0FBQSxLQUFBLEVBQUEsV0FFQSxNQURBLE1BQUEsTUFBQSxRQUFBLE9BQ0EsT0FHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFdBRUEsTUFEQSxNQUFBLE1BQUEsUUFBQSxHQUNBLE9BR0EsRUFBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQU1BLE1BSkEsU0FBQSxHQUFBLE9BQUEsS0FDQSxHQUFBLEdBR0EsRUFBQSxLQUFBLE9BQUEsSUFDQSxLQUFBLEdBQUEsS0FBQSxHQUFBLFVBQUEsRUFHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLFNBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFVBQUEsQ0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxDQUVBLElBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxXQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxZQUFBLENBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxJQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsT0FBQSxNQUFBLElBQUEsS0FBQSxHQUFBLGFBQUEsSUFHQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FDQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSw0Q0FJQSxPQURBLE1BQUEsYUFBQSxFQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsRUFDQSxLQUFBLFFBQUEsSUFHQSxLQUFBLFFBQUEsRUFBQSxHQUNBLE9BR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUVBLFVBQUEsR0FBQSxPQUFBLEVBQ0EsS0FBQSxTQUNBLFlBQUEsSUFBQSxZQUFBLGNBQ0EsRUFBQSxFQUFBLEdBRUEsWUFBQSxLQUNBLEVBQUEsRUFBQSxJQUdBLEtBQUEsV0FBQSxhQUFBLEVBQUEsTUFFQSxFQUFBLElBRUEsS0FBQSxVQUFBLElBeUNBLGFBQUEsR0FBQSxpQkFDQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFVBQUEsSUFBQSxLQUdBLEVBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsVUFBQSxPQUFBLEtBR0EsRUFBQSxHQUFBLFlBQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLFVBQUEsTUFDQSxNQUFBLFVBQUEsT0FBQSxPQUlBLE1BQUEsVUFBQSxFQUFBLE1BQUEsVUFBQSxLQUdBLEVBQUEsR0FBQSxTQUFBLFNBQUEsR0FJQSxJQUhBLEdBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxPQUVBLEVBQUEsRUFBQSxJQUNBLEdBQUEsS0FBQSxHQUFBLFVBQUEsU0FBQSxHQUNBLE9BQUEsQ0FJQSxRQUFBLEtBR0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxXQUFBLElBQUEsSUFHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFdBQUEsS0FBQSxVQUFBLFFBQUEsR0FBQSxRQUFBLFVBQUEsRUFBQSxVQUFBLEtBQUEsT0FHQSxFQUFBLEdBQUEsWUFBQSxTQUFBLEVBQUEsR0FFQSxNQURBLE1BQUEsRUFBQSxXQUFBLGVBQUEsR0FDQSxNQUdBLEVBQUEsR0FBQSxTQUFBLFNBQUEsR0FLQSxJQUpBLEdBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxPQUNBLEVBQUEsR0FBQSxRQUFBLFFBQUEsRUFBQSxRQUFBLE1BRUEsRUFBQSxFQUFBLElBQ0EsR0FBQSxFQUFBLEtBQUEsS0FBQSxHQUFBLFdBQ0EsT0FBQSxDQUlBLFFBQUEsSUFJQSxFQUFBLEdBQUEsT0FBQSxTQUFBLEdBQ0EsR0FDQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsSUFBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsSUFBQSxnQkFBQSxHQUFBLENBQ0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsbUJBQUEsWUFBQSxFQUdBLE9BQUEsTUFPQSxJQUpBLFlBQUEsS0FDQSxFQUFBLEVBQUEsSUFHQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsWUFBQSxFQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FDQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsSUFBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsNENBR0EsSUFBQSxnQkFBQSxHQUFBLENBQ0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsbUJBQUEsYUFBQSxFQUdBLE9BQUEsTUFPQSxJQUpBLFlBQUEsS0FDQSxFQUFBLEVBQUEsSUFHQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsYUFBQSxFQUFBLEtBQUEsR0FBQSxXQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBQ0EsR0FDQSxHQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsSUFBQSxTQUFBLEVBQ0EsS0FBQSxJQUFBLE9BQUEsMkNBR0EsSUFBQSxnQkFBQSxHQUFBLENBQ0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsbUJBQUEsV0FBQSxFQUdBLE9BQUEsTUFPQSxJQUpBLFlBQUEsS0FDQSxFQUFBLEVBQUEsSUFHQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsbUJBQUEsV0FBQSxFQUFBLFVBR0EsT0FBQSxPQUdBLEVBQUEsR0FBQSxJQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLHdDQUdBLElBQUEsU0FBQSxFQUNBLE1BQUEsa0JBQUEsS0FBQSxJQUFBLEVBTUEsS0FKQSxFQUFBLEVBQUEsUUFBQSxNQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsT0FBQSxHQUFBLGdCQUdBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxNQUFBLEdBQUEsQ0FJQSxPQUFBLE9BR0EsRUFBQSxHQUFBLE9BQUEsRUFBQSxXQUNBLEtBQUEsV0FBQSxZQUFBLFFBR0EsRUFBQSxHQUFBLE1BQUEsRUFBQSxXQUNBLEtBQUEsVUFBQSxJQ3BUQSxJQUFBLEdBQ0EsSUtEQSxHQUFBLGlCQUFBLFNBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxnQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLGtFQUNBLEtBQUEsR0FBQSxrQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLDREQUdBLE9BQUEsRUFBQSxLQUNBLEVBQUEsSUFBQSxHQUdBLEdBQUEsRUFDQSxFQUFBLEdBQUEsR0FHQSxFQUFBLGlCQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxLQUFBLGNBQUEsTUFHQSxFQUFBLGlCQUFBLFNBQUEsV0FHQSxRQUFBLEdBQUEsR0FDQSxPQUFBLEVBQUEsUUFBQSxFQUFBLFNBSEEsR0FBQSxHQUFBLCtCQUFBLE1BQUEsSUFNQSxPQUFBLFVBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxFQUlBLE9BRkEsR0FBQSxLQUFBLE1BQUEsS0FBQSxPQUFBLEtBQUEsS0FBQSxpQkFBQSxHQUFBLElBRUEsT0MvQkEsRUFBQSxHQUFBLE9BQUEsRUFBQSxXQUNBLE1BQUEsTUFBQSxhQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEscUJBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxHQUFBLFNBQUEsRUFBQSxXQUNBLE1BQUEsTUFBQSx5QkFHQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFdBQ0EsU0FBQSxPQUFBLEtBQUEsS0FBQSxXQUFBLFNBQUEsU0FBQSxHQUNBLE1BQUEsS0FBQSxNQUNBLFFBR0EsRUFBQSxHQUFBLFFBQUEsRUFBQSxXQUNBLE1BQUEsR0FBQSxLQUFBLDRCQUdBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEsV0xzQ0EsRUFBQSxXQUFBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsQ0FVQSxLQVJBLGdCQUFBLElBQ0EsRUFBQSxNQUNBLEVBQUEsTUFFQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsRUFDQSxFQUFBLFVBQUEsUUFHQSxFQUFBLFVBQUEsT0FBQSxJQUdBLEdBRkEsRUFBQSxVQUFBLEdBTUEsSUFBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsS0FDQSxHQUFBLGdCQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsR0FBQSxFQUFBLEdBTUEsT0FBQSxJQUdBLEVBQUEsT0FBQSxXQUVBLFNBREEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLFdBQUEsTUFBQSxLQUFBLFlBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsS0FBQSxNQUNBLE9BR0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFFQSxLQUFBLElBQUEsR0FDQSxFQUFBLGVBQUEsS0FFQSxFQURBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsSUFFQSxFQUdBLEVBQUEsRUFBQSxHQUdBLEVBQUEsS0FEQSxHQUFBLGdCQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQUEsR0FFQSxtQkFBQSxHQUFBLElBQUEsbUJBQUEsSUFLQSxPQUFBLEdBQUEsS0FBQSxPTTlIQSxPQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiB6LmpzIEphdmFTY3JpcHQgTGlicmFyeSB2QFZFUlNJT05cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ORVVSUy96LmpzXG4gKlxuICogQ29weXJpZ2h0IDIwMTQgTkVVUlMgTExDLCBLZXZpbiBKLiBNYXJ0aW4sIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL05FVVJTL3ouanMvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICpcbiAqIERhdGU6IEBEQVRFXG4gKi9cbjsoZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcbiIsInZhciB6QXJyYXksIF93aW5kb3csIF9kb2N1bWVudCwgaWZyYW1lO1xuXG5mdW5jdGlvbiB6KGVsZW0sIHNjb3BlKSB7XG5cdGlmIChlbGVtIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH0gZWxzZSBpZiAoZWxlbSBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgZWxlbSBpbnN0YW5jZW9mIFdpbmRvdyB8fCBlbGVtIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcblx0XHRyZXR1cm4gbmV3IHpBcnJheShlbGVtKTtcblx0fSBlbHNlIGlmIChlbGVtID09PSB1bmRlZmluZWQgfHwgZWxlbSA9PT0gbnVsbCkge1xuXHRcdHJldHVybiBuZXcgekFycmF5KCk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGVsZW0gIT09IFwic3RyaW5nXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgaXMgaW52YWxpZFwiKTtcblx0fVxuXG5cdGlmIChzY29wZSkge1xuXHRcdGlmICghX2NoZWNrVmFsaWRFbGVtZW50KHNjb3BlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBpcyBpbnZhbGlkXCIpO1xuXHRcdH1cblxuXHRcdHNjb3BlID0geihzY29wZSk7XG5cdH0gZWxzZSB7XG5cdFx0c2NvcGUgPSBfZG9jdW1lbnQ7XG5cdH1cblxuXHRyZXR1cm4gX2ZpbmQoc2NvcGUsIGVsZW0pO1xufVxuXG5mdW5jdGlvbiBub29wKCl7fVxuXG50cnkge1xuXHRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXG5cdGlmcmFtZS5zdHlsZS53aWR0aFx0XHRcdD0gMDtcblx0aWZyYW1lLnN0eWxlLmhlaWdodFx0XHRcdD0gMDtcblx0aWZyYW1lLnN0eWxlLmJvcmRlclN0eWxlXHQ9IFwibm9uZVwiO1xuXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuXHR6QXJyYXkgPSBpZnJhbWUuY29udGVudFdpbmRvdy5BcnJheTtcblxuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG59IGNhdGNoIChlKSB7XG5cdHpBcnJheSA9IEFycmF5O1xufVxuXG4vL3dpbmRvdy4kXHQ9IHo7XG53aW5kb3cuelx0PSB6O1xuei5mblx0XHQ9IHpBcnJheS5wcm90b3R5cGU7XG5fd2luZG93XHRcdD0geih3aW5kb3cpO1xuX2RvY3VtZW50XHQ9IHooZG9jdW1lbnQpO1xuXG56LmZuLmZpbmQgPSBmdW5jdGlvbiAoc3RyRWxlbSkge1xuXHRpZiAodHlwZW9mIHN0ckVsZW0gIT09IFwic3RyaW5nXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWF0ZXIgb2YgeiNmaW5kKCkgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO1xuXHR9XG5cblx0cmV0dXJuIF9maW5kKHRoaXMsIHN0ckVsZW0pO1xufTtcbiIsInZhciBhamF4RGVmYXVsdHMsIGFqYXhUeXBlcyxcblx0YWpheE1pbWVzXHQ9IHt9XG5cbmFqYXhEZWZhdWx0cyA9IHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRyZXF1ZXN0VHlwZTogXCJ0ZXh0XCIsXG5cdHJlc3BvbnNlVHlwZTogXCJ0ZXh0XCIsXG5cdHVybDogd2luZG93LmxvY2F0aW9uICsgXCJcIixcblx0cXVlcnk6IG51bGwsXG5cdGRhdGE6IG51bGwsXG5cdHNldHVwOiBub29wLFxuXHRzdWNjZXNzOiBub29wLFxuXHRlcnJvcjogbm9vcFxufTtcblxuYWpheFR5cGVzID0ge1xuXHR0ZXh0OiBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdHJldHVybiAoZGF0YSB8fCBcIlwiKSArIFwiXCI7XG5cdH1cbn07XG5cbnouYWpheCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdHZhciBkYXRhLFxuXHRcdHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdG9wdGlvbnMgPSB6LmV4dGVuZCh7XG5cdFx0Y29udGV4dDogcmVxXG5cdH0sIGFqYXhEZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0aWYgKCFhamF4VHlwZXNbb3B0aW9ucy5yZXF1ZXN0VHlwZV0pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBgcmVxdWVzdFR5cGVgXCIpO1xuXHR9IGVsc2UgaWYgKCFhamF4VHlwZXNbb3B0aW9ucy5yZXNwb25zZVR5cGVdKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gYHJlc3BvbnNlVHlwZWBcIik7XG5cdH1cblxuXHRpZiAob3B0aW9ucy5xdWVyeSAmJiB+W1wiSEVBRFwiLCBcIkdFVFwiXS5pbmRleE9mKG9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCkpKSB7XG5cdFx0b3B0aW9ucy51cmxcdCs9IH5vcHRpb25zLnVybC5pbmRleE9mKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XG5cdFx0b3B0aW9ucy51cmxcdCs9IHoucXVlcnlTdHJpbmcob3B0aW9ucy5xdWVyeSk7XG5cdFx0b3B0aW9ucy51cmxcdD0gb3B0aW9ucy51cmwucmVwbGFjZSgvKFxcP3wmKSYvZywgXCIkMVwiKTtcblx0fVxuXG5cdHJlcS5vcGVuKG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgdHJ1ZSk7XG5cblx0cmVxLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcmVzcDtcblxuXHRcdGlmIChyZXEuc3RhdHVzID49IDIwMCAmJiByZXEuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHRyZXNwID0gYWpheFR5cGVzW29wdGlvbnMucmVzcG9uc2VUeXBlXS5jYWxsKHJlcSwgcmVxLnJlc3BvbnNlVGV4dCwgdHJ1ZSk7XG5cdFx0XHRvcHRpb25zLnN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlc3ApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvcHRpb25zLmVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCByZXEuc3RhdHVzLCByZXEuc3RhdHVzVGV4dCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXHRcdG9wdGlvbnMuZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlcS5zdGF0dXMsIHJlcS5zdGF0dXNUZXh0KTtcblx0fTtcblxuXHRpZiAoIX5bXCJIRUFEXCIsIFwiR0VUXCJdLmluZGV4T2Yob3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSkpIHtcblx0XHRyZXEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiKTtcblx0fVxuXG5cdGlmIChvcHRpb25zLmRhdGEpIHtcblx0XHRvcHRpb25zLmRhdGEgPSBhamF4VHlwZXNbb3B0aW9ucy5yZXF1ZXN0VHlwZV0uY2FsbChyZXEsIG9wdGlvbnMuZGF0YSwgZmFsc2UpO1xuXHR9XG5cblx0b3B0aW9ucy5zZXR1cC5jYWxsKHJlcSwgcmVxKTtcblxuXHRyZXEuc2VuZChvcHRpb25zLmRhdGEpO1xufTtcbiIsImFqYXhEZWZhdWx0cy5yZXF1ZXN0VHlwZVx0PSBcImRldGVjdFwiO1xuYWpheERlZmF1bHRzLnJlc3BvbnNlVHlwZVx0PSBcImRldGVjdFwiO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUgPSBmdW5jdGlvbiAodHlwZSwgbWltZSwgZm4pIHtcblx0aWYgKCFmbiAmJiB0eXBlb2YgbWltZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0Zm5cdFx0PSBtaW1lO1xuXHRcdG1pbWVcdD0gZmFsc2U7XG5cdH1cblxuXHRhamF4VHlwZXNbdHlwZV0gPSBmbjtcblxuXHRpZiAobWltZSkge1xuXHRcdGFqYXhNaW1lc1ttaW1lXSA9IHR5cGU7XG5cdH1cbn07XG5cbnoucmVnaXN0ZXJBamF4VHlwZShcImRldGVjdFwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xuXHR2YXIgaGVhZGVyLFxuXHRcdHR5cGUgPSBcInRleHRcIjtcblxuXHRpZiAoaXNSZXNwb25zZSkge1xuXHRcdGhlYWRlclx0PSB0aGlzLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpIHx8IFwiXCIsXG5cdFx0aGVhZGVyXHQ9IGhlYWRlci5zcGxpdChcIjtcIilbMF0udHJpbSgpO1xuXHRcdHR5cGVcdD0gYWpheE1pbWVzW2hlYWRlcl0gfHwgXCJ0ZXh0XCI7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiYgZGF0YS50b1N0cmluZyA9PT0gKHt9KS50b1N0cmluZykge1xuXHRcdFx0dHlwZSA9IFwianNvblwiO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhamF4VHlwZXNbdHlwZV0uY2FsbCh0aGlzLCBkYXRhLCBpc1Jlc3BvbnNlKTtcbn0pO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJqc29uXCIsIFwiYXBwbGljYXRpb24vanNvblwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xuXHRyZXR1cm4gaXNSZXNwb25zZSA/IEpTT04ucGFyc2UoZGF0YSkgOiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn0pO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJodG1sXCIsIFwidGV4dC9odG1sXCIsIGZ1bmN0aW9uIChkYXRhLCBpc1Jlc3BvbnNlKSB7XG5cdHZhciBkb2MsIGFycjtcblxuXHRpZiAoIWlzUmVzcG9uc2UpIHtcblx0XHRyZXR1cm4gZGF0YS5vdXRlckhUTUw7XG5cdH1cblxuXHRhcnJcdD0gbmV3IHpBcnJheSgpO1xuXHRkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcblxuXHRkb2MuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGRhdGE7XG5cblx0YXJyLnB1c2guYXBwbHkoYXJyLCBhcnIuc2xpY2UuY2FsbChkb2MuYm9keS5jaGlsZHJlbiwgMCkpO1xuXG5cdHJldHVybiBhcnI7XG59KTtcblxuei5yZWdpc3RlckFqYXhUeXBlKFwieG1sXCIsIFwidGV4dC94bWxcIiwgYWpheFhNTFBhcnNlcik7XG56LnJlZ2lzdGVyQWpheFR5cGUoXCJ4bWxcIiwgXCJhcHBsaWNhdGlvbi94bWxcIiwgYWpheFhNTFBhcnNlcik7XG5cbmZ1bmN0aW9uIGFqYXhYTUxQYXJzZXIoZGF0YSwgaXNSZXNwb25zZSkge1xuXHR2YXIgcGFyc2VyO1xuXG5cdGlmICghaXNSZXNwb25zZSkge1xuXHRcdHBhcnNlciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG5cdFx0cmV0dXJuIHBhcnNlci5zZXJpYWxpemVUb1N0cmluZyhkYXRhKTtcblx0fVxuXG5cdGlmICh0aGlzLnJlc3BvbnNlWE1MKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2VYTUw7XG5cdH1cblxuXHRwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdHJldHVybiBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGRhdGEsIFwiYXBwbGljYXRpb24veG1sXCIpO1xufVxuIiwiaWYgKFwiZGF0YXNldFwiIGluIGRvY3VtZW50LmJvZHkpIHtcblx0ei5mbi5kYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHR2YXIgaSwgbDtcblxuXHRcdGlmICghdGhpcy5sZW5ndGgpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzWzBdLmRhdGFzZXQ7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpc1swXS5kYXRhc2V0W2tleV07XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmRhdGFzZXRba2V5XSA9IHZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufSBlbHNlIHtcblx0ei5mbi5kYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHR2YXIgaSwgbCxcblx0XHRcdGRhdGFLZXkgPSBcImRhdGEtXCIgKyAoa2V5IHx8IFwiXCIpO1xuXG5cdFx0aWYgKCF0aGlzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aSA9IHt9O1xuXG5cdFx0XHRbXS5mb3JFYWNoLmNhbGwodGhpc1swXS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoYXR0cikge1xuXHRcdFx0XHRyZXR1cm4gaVthdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gaTtcblx0XHR9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzWzBdLmF0dHJpYnV0ZXNbZGF0YUtleV07XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmRhdGFzZXRbZGF0YUtleV0gPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcbn1cblxuei5kYXRhID0gZnVuY3Rpb24gKGVsZW0sIGtleSwgdmFsdWUpIHtcblx0eihlbGVtKS5kYXRhKGtleSwgdmFsdWUpO1xufTtcbiIsInouZm4ub24gPSB6LmZuLmJpbmQgPSBfZWFjaChmdW5jdGlvbiBfb24oZXZlbnRUeXBlLCBmbikge1xuXHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmbiwgZmFsc2UpO1xufSk7XG5cbnouZm4ub25lID0gX2VhY2goZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHR2YXIgY2FsbGVkID0gZmFsc2U7XG5cblx0eih0aGlzKS5vbihldmVudCwgZnVuY3Rpb24gb25jZUZuKGUpIHtcblx0XHRpZiAoY2FsbGVkKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHR6KHRoaXMpLm9mZihldmVudCwgb25jZUZuKTtcblxuXHRcdGZuLmNhbGwodGhpcywgZSk7XG5cdH0pO1xufSk7XG5cbnouZm4ub2ZmID0gei5mbi51bmJpbmQgPSBfZWFjaChmdW5jdGlvbiBfb2ZmKGV2ZW50VHlwZSwgZm4pIHtcblx0dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZm4sIGZhbHNlKTtcbn0pO1xuXG56LmZuLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnRUeXBlLCBkYXRhKSB7XG5cdHZhciBldmVudCxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdGRhdGEgPSB7fTtcblx0fVxuXG5cdGRhdGEuZXZlbnQgPSBkYXRhO1xuXG5cdHRyeSB7XG5cdFx0ZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB7XG5cdFx0XHRkZXRhaWw6IGRhdGFcblx0XHR9KTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcblx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCBkYXRhKTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcbiIsImZ1bmN0aW9uIF9pc1dpdGhGdW5jdGlvbihlbGVtLCBmbikge1xuXHRyZXR1cm4gZm4uY2FsbChlbGVtLCBlbGVtKTtcbn1cblxuZnVuY3Rpb24gX2lzV2l0aEVsZW1lbnQoZWxlbTEsIGVsZW0yKSB7XG5cdHJldHVybiBlbGVtMSA9PT0gZWxlbTI7XG59XG5cbnouZm4uaXMgPSAoZnVuY3Rpb24gX2lzKCkge1xuXHR2YXIgbWF0Y2hlcyxcblx0XHRib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuXHRtYXRjaGVzXHQ9IGJvZHkubWF0Y2hlcyB8fCBib2R5Lm1hdGNoZXNTZWxlY3RvciB8fCBib2R5Lm1zTWF0Y2hlc1NlbGVjdG9yO1xuXHRtYXRjaGVzID0gbWF0Y2hlcyB8fCBib2R5Lm1vek1hdGNoZXNTZWxlY3RvciB8fCBib2R5LndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBib2R5Lm9NYXRjaGVzU2VsZWN0b3I7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHRcdHZhciBfaXNXaXRoLCByZXQsXG5cdFx0XHRpXHQ9IDAsXG5cdFx0XHRsXHQ9IHRoaXMubGVuZ3RoO1xuXG5cdFx0c3dpdGNoICh0eXBlb2Ygc2VsZWN0b3IpIHtcblx0XHRcdGNhc2UgXCJzdHJpbmdcIjpcblx0XHRcdFx0X2lzV2l0aCA9IG1hdGNoZXM7XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdF9pc1dpdGggPSBfaXNXaXRoRnVuY3Rpb247XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIm9iamVjdFwiOlxuXHRcdFx0XHRpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBFbGVtZW50IHx8IHNlbGVjdG9yIGluc3RhbmNlb2YgV2luZG93IHx8IHNlbGVjdG9yIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcblx0XHRcdFx0XHRfaXNXaXRoID0gX2lzV2l0aEVsZW1lbnQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojaXMgaXMgaW52YWxpZFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojaXMgaXMgaW52YWxpZFwiKTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRyZXQgPSBfaXNXaXRoKHRoaXNbaV0sIHNlbGVjdG9yKTtcblxuXHRcdFx0aWYgKHJldCkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcbn0pKCk7XG4iLCJ6LmZuLmhpZGUgPSBfZWFjaChmdW5jdGlvbiBoaWRlKCkge1xuXHR0aGlzLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0cmV0dXJuIHRoaXM7XG59KTtcblxuei5mbi5zaG93ID0gX2VhY2goZnVuY3Rpb24gc2hvdygpIHtcblx0dGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0cmV0dXJuIHRoaXM7XG59KTtcblxuei5mbi5jbG9uZSA9IGZ1bmN0aW9uIChkZWVwKSB7XG5cdHZhciBpID0gMDtcblxuXHRpZiAoZGVlcCA9PT0gdW5kZWZpbmVkIHx8IGRlZXAgPT09IG51bGwpIHtcblx0XHRkZWVwID0gZmFsc2U7XG5cdH1cblxuXHRmb3IgKDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHR0aGlzW2ldID0gdGhpc1tpXS5jbG9uZU5vZGUoZGVlcCk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbnouZm4uaHRtbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHR2YXIgaSwgbDtcblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB0aGlzWzBdLmlubmVySFRNTDtcblx0fVxuXG5cdGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdHRoaXNbaV0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbnouZm4udGV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHR2YXIgaSwgbDtcblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB0aGlzLnRleHRDb250ZW50O1xuXHR9XG5cblx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLmdldEF0dHIgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdGlmICgha2V5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojZ2V0QXR0ciBpcyByZXF1aXJlZFwiKTtcblx0fVxuXG5cdHJldHVybiB0aGlzWzBdICYmIHRoaXNbMF0uZ2V0QXR0cmlidXRlKGtleSk7XG59O1xuXG56LmZuLnNldEF0dHIgPSBfZWFjaChmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRpZiAoIWtleSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3NldEF0dHIgaXMgcmVxdWlyZWRcIik7XG5cdH0gZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIlNlY29uZCBwYXJhbWV0ZXIgb2YgeiNzZXRBdHRyIGlzIHJlcXVpcmVkXCIpO1xuXHR9XG5cblx0dGhpcy5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnouZm4uYXR0ciA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0QXR0cihrZXkpO1xuXHR9XG5cblx0dGhpcy5zZXRBdHRyKGtleSwgdmFsdWUpO1xuXHRyZXR1cm4gdGhpcztcbn07XG5cbnouZm4ucmVwbGFjZVdpdGggPSB6LmZuLnJlcGxhY2UgPSBfZWFjaChmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIHNjcmlwdHM7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcblx0XHR0aGlzLnJlbW92ZSgpO1xuXHR9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgekFycmF5IHx8IHZhbHVlIGluc3RhbmNlb2YgRXZlbnRUYXJnZXQpIHtcblx0XHRzY3JpcHRzID0gX2V4dHJhY3RTY3JpcHRzKHZhbHVlKTtcblxuXHRcdGlmICh2YWx1ZSBpbnN0YW5jZW9mIHpBcnJheSkge1xuXHRcdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0XHR9XG5cblx0XHR0aGlzLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHZhbHVlLCB0aGlzKTtcblxuXHRcdF9hZGRTY3JpcHRzKHNjcmlwdHMpO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMub3V0ZXJIVE1MID0gdmFsdWU7XG5cdH1cbn0pO1xuXG5mdW5jdGlvbiBfZXh0cmFjdFNjcmlwdHMoZWxlbSkge1xuXHR2YXIgc2NyaXB0cyxcblx0XHRpXHQ9IDAsXG5cdFx0cmV0XHQ9IFtdO1xuXG5cdGVsZW1cdD0geihlbGVtKTtcblx0c2NyaXB0c1x0PSBlbGVtLmZpbmQoXCJzY3JpcHRcIik7XG5cblx0Zm9yICg7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0cmV0LnB1c2goe1xuXHRcdFx0c3JjOiBzY3JpcHRzW2ldLnNyYyxcblx0XHRcdHRleHQ6IHNjcmlwdHNbaV0udGV4dENvbnRlbnRcblx0XHR9KTtcblxuXHRcdHNjcmlwdHNbaV0ucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBfYWRkU2NyaXB0cyhzY3JpcHRzKSB7XG5cdHZhciBzY3JpcHQsXG5cdFx0aSA9IDA7XG5cblx0Zm9yICg7IGkgPCBzY3JpcHRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblxuXHRcdGlmIChzY3JpcHRzW2ldLnNyYykge1xuXHRcdFx0c2NyaXB0LnNyYyA9IHNjcmlwdHNbaV0uc3JjO1xuXHRcdH0gZWxzZSBpZiAoc2NyaXB0c1tpXS50ZXh0KSB7XG5cdFx0XHRzY3JpcHQudGV4dCA9IHNjcmlwdHNbaV0udGV4dDtcblx0XHR9XG5cblx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHR9XG59XG5cbmlmIChcImNsYXNzTGlzdFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkge1xuXHR6LmZuLmFkZENsYXNzID0gX2VhY2goZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdFx0dGhpcy5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdH0pO1xuXG5cdHouZm4ucmVtb3ZlQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiByZW1vdmVDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0fSk7XG5cblx0ei5mbi50b2dnbGVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgZm9yY2UpIHtcblx0XHRpZiAoZm9yY2UgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpcy5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzTmFtZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5jbGFzc0xpc3RbZm9yY2UgPyBcImFkZFwiIDogXCJyZW1vdmVcIl0oY2xhc3NOYW1lKTtcblx0fSk7XG5cblx0ei5mbi5oYXNDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0aWYgKHRoaXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xufSBlbHNlIHtcblx0ei5mbi5hZGRDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIGFkZENsYXNzKGNsYXNzTmFtZSkge1xuXHRcdHRoaXMuY2xhc3NOYW1lICs9IFwiIFwiICsgY2xhc3NOYW1lO1xuXHR9KTtcblxuXHR6LmZuLnJlbW92ZUNsYXNzID0gX2VhY2goZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdFx0dGhpcy5jbGFzc05hbWUgKz0gdGhpcy5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXGIpXCIgKyBjbGFzc05hbWUgKyBcIihcXFxcYnwkKVwiLCBcImdcIiksIFwiIFwiKTtcblx0fSk7XG5cblx0ei5mbi50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uIChjbGFzc05hbWUsIGZvcmNlKSB7XG5cdFx0dGhpc1tmb3JjZSA/IFwiYWRkQ2xhc3NcIiA6IFwicmVtb3ZlQ2xhc3NcIl0oY2xhc3NOYW1lKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHR6LmZuLmhhc0NsYXNzID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHIgPSBuZXcgUmVnRXhwKFwiKF58IClcIiArIGNsYXNzTmFtZSArIFwiKCB8JClcIiwgXCJnaVwiKTtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRpZiAoci50ZXN0KHRoaXNbaV0uY2xhc3NOYW1lKSkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG59XG5cbnouZm4uYXBwZW5kID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdHZhciBlbGVtZW50LFxuXHRcdGkgPSAwLFxuXHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2FwcGVuZCBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRpZiAodmFsdWUgaW5zdGFuY2VvZiB6QXJyYXkpIHtcblx0XHR2YWx1ZSA9IHZhbHVlWzBdO1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmFwcGVuZENoaWxkKHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufVxuXG56LmZuLnByZXBlbmQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGVsZW1lbnQsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojcHJlcGVuZCBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aWYgKHZhbHVlIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5pbnNlcnRCZWZvcmUodmFsdWUsIHRoaXNbaV0uZmlyc3RDaGlsZCk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn1cblxuei5mbi5hZnRlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHR2YXIgZWxlbWVudCxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNhcHBlbmQgaXMgcmVxdWlyZWQuXCIpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRpZiAodmFsdWUgaW5zdGFuY2VvZiB6QXJyYXkpIHtcblx0XHR2YWx1ZSA9IHZhbHVlWzBdO1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCB2YWx1ZS5vdXRlckhUTUwpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59XG5cbnouZm4uY3NzID0gZnVuY3Rpb24gKHJ1bGUsIHZhbHVlKSB7XG5cdHZhciBpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKHJ1bGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2NzcyBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXNbMF0pW3J1bGVdO1xuXHR9IGVsc2Uge1xuXHRcdHJ1bGUgPSBydWxlLnJlcGxhY2UoLy0uL2csIGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHQgICAgcmV0dXJuIHJlc3VsdC5zdWJzdHIoMSkudG9VcHBlckNhc2UoKTtcblx0XHR9KTtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLnN0eWxlW3J1bGVdID0gdmFsdWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59XG5cbnouZm4ucmVtb3ZlID0gX2VhY2goZnVuY3Rpb24gKCkge1xuXHR0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG59KTtcblxuei5mbi5lbXB0eSA9IF9lYWNoKGZ1bmN0aW9uICgpIHtcblx0dGhpcy5pbm5lckhUTUwgPSAnJztcbn0pO1xuIiwidmFyIF9zZWxlY3RvcnNDYWNoZSxcblx0X3NlbGVjdG9ycyA9IHt9O1xuXG5mdW5jdGlvbiBfZmluZChzY29wZSwgc3RyRWxlbSkge1xuXHR2YXIgcmV0ID0gbmV3IHpBcnJheSgpO1xuXG5cdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gX2ZpbmRGb3JFYWNoKHNjb3BlZEVsZW0pIHtcblx0XHRyZXQucHVzaC5hcHBseShyZXQsIF9zZWxlY3Qoc2NvcGVkRWxlbSwgc3RyRWxlbSkpO1xuXHR9KTtcblxuXHRyZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBfc2VsZWN0KHNjb3BlZEVsZW0sIHN0ckVsZW0pIHtcblx0aWYgKCF+c3RyRWxlbS5pbmRleE9mKFwiOlwiKSB8fCBfc2VsZWN0b3JzQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoc3RyRWxlbSk7XG5cdH1cblxuXHRpZiAoX3NlbGVjdG9yc0NhY2hlID09PSBmYWxzZSkge1xuXHRcdF9nZW5lcmF0ZVNlbGVjdG9yc0NhY2hlKCk7XG5cdH1cblxuXHRpZiAoIXN0ckVsZW0ubWF0Y2goX3NlbGVjdG9yc0NhY2hlKSkge1xuXHRcdHJldHVybiBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoc3RyRWxlbSk7XG5cdH1cblxuXHRyZXR1cm4gX3NlbGVjdDIoc2NvcGVkRWxlbSwgc3RyRWxlbSk7XG59XG5cbmZ1bmN0aW9uIF9zZWxlY3QyKHNjb3BlZEVsZW0sIHN0ckVsZW0pIHtcblx0dmFyIGVudHJ5LCBzZWxlY3RvcnMsXG5cdFx0c2NvcGVcdD0gbmV3IHpBcnJheShzY29wZWRFbGVtKSxcblx0XHRjdXJyZW50XHQ9IFwiXCIsXG5cdFx0ZW50cmllc1x0PSBzdHJFbGVtLnNwbGl0KC9cXHMrLyk7XG5cblx0d2hpbGUgKGVudHJ5ID0gZW50cmllcy5zaGlmdCgpKSB7XG5cdFx0c2VsZWN0b3JzID0gZW50cnkubWF0Y2goX3NlbGVjdG9yc0NhY2hlKTtcblxuXHRcdGlmICghc2VsZWN0b3JzKSB7XG5cdFx0XHRjdXJyZW50ICs9IGVudHJ5ICsgXCIgXCI7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjdXJyZW50XHQrPSBlbnRyeS5yZXBsYWNlKF9zZWxlY3RvcnNDYWNoZSwgXCJcIikgfHwgXCIqXCI7XG5cdFx0ZW50cnlcdD0gbmV3IHpBcnJheSgpO1xuXG5cdFx0c2NvcGUuZm9yRWFjaChmdW5jdGlvbiBfc2VsZWN0Rm9yRWFjaChzY29wZWRFbGVtKSB7XG5cdFx0XHR2YXIgcmV0ID0gbmV3IHpBcnJheSgpO1xuXG5cdFx0XHRzZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiBzZWxlY3RvcnNGb3JFYWNoKHNlbGVjdG9yKSB7XG5cdFx0XHRcdHJldC5wdXNoLmFwcGx5KHJldCwgX3NlbGVjdG9yc1tzZWxlY3Rvcl0uY2FsbChzY29wZWRFbGVtLCBjdXJyZW50KSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZW50cnkucHVzaC5hcHBseShlbnRyeSwgcmV0KTtcblx0XHR9KTtcblxuXHRcdHNjb3BlXHQ9IGVudHJ5O1xuXHRcdGN1cnJlbnRcdD0gXCJcIjtcblx0fVxuXG5cdGlmIChjdXJyZW50KSB7XG5cdFx0ZW50cnkgPSBuZXcgekFycmF5KCk7XG5cblx0XHRzY29wZS5mb3JFYWNoKGZ1bmN0aW9uIGN1cnJlbnRGb3JFYWNoKHNjb3BlZEVsZW0pIHtcblx0XHRcdGVudHJ5LnB1c2guYXBwbHkoZW50cnksIHNjb3BlZEVsZW0ucXVlcnlTZWxlY3RvckFsbChjdXJyZW50KSk7XG5cdFx0fSk7XG5cblx0XHRzY29wZSA9IGVudHJ5O1xuXHR9XG5cblx0cmV0dXJuIHNjb3BlO1xufVxuXG5mdW5jdGlvbiBfZ2VuZXJhdGVTZWxlY3RvcnNDYWNoZSgpIHtcblx0dmFyIHNlbGVjdG9yc1x0PSBPYmplY3Qua2V5cyhfc2VsZWN0b3JzKS5qb2luKFwifFwiKS5yZXBsYWNlKC86L2csIFwiXCIpO1xuXHRfc2VsZWN0b3JzQ2FjaGVcdD0gbmV3IFJlZ0V4cChcIjooXCIgKyBzZWxlY3RvcnMgKyBcIilcIiwgXCJnXCIpO1xufVxuIiwiei5yZWdpc3RlclNlbGVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBmbikge1xuXHRpZiAoIXNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3JlZ2lzdGVyU2VsZWN0b3IgbXVzdCBiZSBhIHN0cmluZyBzZWxlY3RvclwiKTtcblx0fSBlbHNlIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIG9mIHojcmVnaXN0ZXJTZWxlY3RvciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG5cdH1cblxuXHRpZiAoc2VsZWN0b3JbMF0gIT09IFwiOlwiKSB7XG5cdFx0c2VsZWN0b3IgPSBcIjpcIiArIHNlbGVjdG9yO1xuXHR9XG5cblx0X3NlbGVjdG9yc0NhY2hlXHRcdFx0PSBmYWxzZTtcblx0X3NlbGVjdG9yc1tzZWxlY3Rvcl1cdD0gZm47XG59O1xuXG56LnJlZ2lzdGVyU2VsZWN0b3IoXCI6Zmlyc3RcIiwgZnVuY3Rpb24gc2VsZWN0b3JGaXJzdChxdWVyeSkge1xuXHRyZXR1cm4geih0aGlzLnF1ZXJ5U2VsZWN0b3IocXVlcnkpKTtcbn0pO1xuXG56LnJlZ2lzdGVyU2VsZWN0b3IoXCI6aW5wdXRcIiwgKGZ1bmN0aW9uIHNlbGVjdG9yRmlyc3QoKSB7XG5cdHZhciB0YWdzID0gXCJJTlBVVCxURVhUQVJFQSxTRUxFQ1QsQlVUVE9OXCIuc3BsaXQoXCIsXCIpO1xuXG5cdGZ1bmN0aW9uIGZpbHRlcihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIH50YWdzLmluZGV4T2YoZWxlbWVudC50YWdOYW1lKTtcblx0fVxuXG5cdHJldHVybiBmdW5jdGlvbiBzZWxlY3RvcklucHV0KHF1ZXJ5KSB7XG5cdFx0dmFyIGVsZW1lbnRzID0gbmV3IHpBcnJheSgpO1xuXG5cdFx0ZWxlbWVudHMucHVzaC5hcHBseShlbGVtZW50cywgW10uZmlsdGVyLmNhbGwodGhpcy5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSwgZmlsdGVyKSk7XG5cblx0XHRyZXR1cm4gZWxlbWVudHM7XG5cdH07XG59KSgpKTtcbiIsInouZm4ucGFyZW50ID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5wYXJlbnROb2RlO1xufSk7XG5cbnouZm4ubmV4dCA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xufSk7XG5cbnouZm4ucHJldiA9IHouZm4ucHJldmlvdXMgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG59KTtcblxuei5mbi5zaWJsaW5ncyA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIFtdLmZpbHRlci5jYWxsKHRoaXMucGFyZW50Tm9kZS5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcblx0XHRyZXR1cm4gY2hpbGQgIT09IHRoaXM7XG5cdH0sIHRoaXMpO1xufSk7XG5cbnouZm4ucHJldkFsbCA9IF9lYWNoTmV3KGZ1bmN0aW9uKCl7XG5cdHJldHVybiBkaXIodGhpcywgXCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nXCIpO1xufSk7XG5cbnouZm4uY2hpbGRyZW4gPSBfZWFjaE5ldyhmdW5jdGlvbiAoc2VsZWN0b3IpIHtcblx0cmV0dXJuIHRoaXMuY2hpbGRyZW47XG59KTtcbiIsImZ1bmN0aW9uIF9jaGVja1ZhbGlkRWxlbWVudChlbGVtKSB7XG5cdGlmIChlbGVtIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAoZWxlbSBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgZWxlbSBpbnN0YW5jZW9mIFdpbmRvdyB8fCBlbGVtIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmICh0eXBlb2YgZWxlbSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIF9lYWNoKGZuKSB7XG5cdHJldHVybiBmdW5jdGlvbiBydW5FYWNoKCkge1xuXHRcdHZhciBpXHQ9IDAsXG5cdFx0XHRsXHQ9IHRoaXMubGVuZ3RoO1xuXG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdGZuLmFwcGx5KHRoaXNbaV0sIGFyZ3VtZW50cyk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG5cbmZ1bmN0aW9uIF9lYWNoTmV3KGZuKSB7XG5cdHJldHVybiBmdW5jdGlvbiBydW5FYWNoKCkge1xuXHRcdHZhciByZXQsXG5cdFx0XHRpXHQ9IDAsXG5cdFx0XHRsXHQ9IHRoaXMubGVuZ3RoLFxuXHRcdFx0YXJyXHQ9IG5ldyB6QXJyYXkoKTtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRyZXQgPSBmbi5hcHBseSh0aGlzW2ldLCBhcmd1bWVudHMpO1xuXG5cdFx0XHRpZiAocmV0KSB7XG5cdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHJldCkgJiYgcmV0Lmxlbmd0aCB8fCByZXQgaW5zdGFuY2VvZiBIVE1MQ29sbGVjdGlvbikge1xuXHRcdFx0XHRcdGFyci5wdXNoLmFwcGx5KGFyciwgcmV0KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRhcnIucHVzaChyZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFycjtcblx0fTtcbn1cblxuZnVuY3Rpb24gZGlyKGVsZW0sIGtleSkge1xuXHR2YXIgbWF0Y2hlZCA9IG5ldyB6QXJyYXkoKTtcblxuXHR3aGlsZSAoZWxlbVtrZXldICYmIGVsZW0ubm9kZVR5cGUgPT09IDEpIHtcblx0XHRlbGVtID0gZWxlbVtrZXldO1xuXHRcdG1hdGNoZWQucHVzaChlbGVtKTtcblx0fVxuXG5cdHJldHVybiBtYXRjaGVkO1xufVxuXG56LmRlZXBFeHRlbmQgPSBmdW5jdGlvbiBfZXh0ZW5kKGRlZXApIHtcblx0dmFyIG9iaiwgdGFyZ2V0LFxuXHRcdGkgPSAyO1xuXG5cdGlmICh0eXBlb2YgZGVlcCA9PT0gXCJvYmplY3RcIikge1xuXHRcdHRhcmdldFx0PSBkZWVwIHx8IHt9O1xuXHRcdGRlZXBcdD0gSW5maW5pdHk7XG5cdH0gZWxzZSB7XG5cdFx0ZGVlcFx0PSBkZWVwID09PSB0cnVlID8gSW5maW5pdHkgOiAoZGVlcCB8IDApO1xuXHRcdHRhcmdldFx0PSBhcmd1bWVudHNbMV0gfHwge307XG5cdH1cblxuXHRmb3IgKDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdG9iaiA9IGFyZ3VtZW50c1tpXTtcblxuXHRcdGlmICghb2JqKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdFx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0aWYgKGRlZXAgJiYgdHlwZW9mIG9ialtrZXldID09PSBcIm9iamVjdFwiKSB7XG5cdFx0XHRcdFx0X2V4dGVuZChkZWVwIC0gMSwgdGFyZ2V0W2tleV0sIG9ialtrZXldKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0YXJnZXRba2V5XSA9IG9ialtrZXldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn07XG5cbnouZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuXHRbXS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCAwKTtcblx0cmV0dXJuIHouZGVlcEV4dGVuZC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufTtcblxuei5mbi5lYWNoID0gX2VhY2goZnVuY3Rpb24gZWFjaChmbikge1xuXHRmbi5jYWxsKHRoaXMsIHRoaXMpO1xuXHRyZXR1cm4gdGhpcztcbn0pO1xuXG56LnF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKG9iaiwgcHJlZml4KSB7XG5cdHZhciBpLCBrZXksIHZhbCxcblx0XHRzdHJpbmdzID0gW107XG5cblx0Zm9yIChpIGluIG9iaikge1xuXHRcdGlmIChvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdGlmIChwcmVmaXgpIHtcblx0XHRcdFx0a2V5ID0gcHJlZml4ICsgXCJbXCIgKyBpICsgXCJdXCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRrZXkgPSBpO1xuXHRcdFx0fVxuXG5cdFx0XHR2YWwgPSBvYmpbaV07XG5cblx0XHRcdGlmICh2YWwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRzdHJpbmdzLnB1c2goei5xdWVyeVN0cmluZyh2YWwsIGtleSkpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RyaW5ncy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHN0cmluZ3Muam9pbihcIiZcIik7XG59O1xuIiwifSkod2luZG93LCBkb2N1bWVudCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=