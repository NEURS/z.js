!function(t,e){function r(t,e){if(t instanceof m)return t;if(t instanceof Element||t instanceof Window||t instanceof Document)return new m(t);if(void 0===t||null===t)return new m;if("string"!=typeof t)throw new Error("First parameter is invalid");if(e){if(!l(e))throw new Error("Second parameter is invalid");e=r(e)}else e=g;return a(e,t)}function n(){}function i(t,e){var r;return e?this.responseXML?this.responseXML:(r=new DOMParser,r.parseFromString(t,"application/xml")):(r=new XMLSerializer,r.serializeToString(t))}function o(t,e){return e.call(t,t)}function s(t,e){return t===e}function a(t,e){var r=new m;return t.forEach(function(t){r.push.apply(r,u(t,e))}),r}function u(t,e){return~e.indexOf(":")&&void 0!==S?(S===!1&&c(),e.match(S)?f(t,e):t.querySelectorAll(e)):t.querySelectorAll(e)}function f(t,e){for(var r,n,i=new m(t),o="",s=e.split(/\s+/);r=s.shift();)n=r.match(S),n?(o+=r.replace(S,"")||"*",r=new m,i.forEach(function(t){var e=new m;n.forEach(function(r){e.push.apply(e,b[r].call(t,o))}),r.push.apply(r,e)}),i=r,o=""):o+=r+" ";return o&&(r=new m,i.forEach(function(t){r.push.apply(r,t.querySelectorAll(o))}),i=r),i}function c(){var t=Object.keys(b).join("|").replace(/:/g,"");S=new RegExp(":("+t+")","g")}function l(t){return t instanceof m?!0:t instanceof Element?!0:"string"==typeof t?!0:void 0}function h(t){return function(){for(var e=0,r=this.length;r>e;e++)t.apply(this[e],arguments);return this}}function p(t){return function(){for(var e,r=0,n=this.length,i=new m;n>r;r++)e=t.apply(this[r],arguments),e&&(Array.isArray(e)&&e.length?i.push.apply(i,e):i.push(e));return i}}function d(t,e){for(var r=new m;t[e]&&1===t.nodeType;)t=t[e],r.push(t);return r}var m,v,g,y;try{y=e.createElement("iframe"),y.style.width=0,y.style.height=0,y.style.borderStyle="none",e.body.appendChild(y),m=y.contentWindow.Array,e.body.removeChild(y)}catch(w){m=Array}t.z=r,r.fn=m.prototype,v=r(t),g=r(e),r.fn.find=function(t){if("string"!=typeof t)throw new Error("First paramater of z#find() should be a string");return a(this,t)};var E,T,x={};E={method:"GET",requestType:"text",responseType:"text",url:t.location+"",query:null,data:null,setup:n,success:n,error:n},T={text:function(t){return(t||"")+""}},r.ajax=function(t){var e=new XMLHttpRequest;if(t=r.extend({context:e},E,t),!T[t.requestType])throw new Error("Invalid option `requestType`");if(!T[t.responseType])throw new Error("Invalid option `responseType`");t.query&&~["HEAD","GET"].indexOf(t.method.toUpperCase())&&(t.url+=~t.url.indexOf("?")?"&":"?",t.url+=r.queryString(t.query),t.url=t.url.replace(/(\?|&)&/g,"$1")),e.open(t.method,t.url,!0),e.onload=function(){var r;e.status>=200&&e.status<400?(r=T[t.responseType].call(e,e.responseText,!0),t.success.call(t.context,r)):t.error.call(t.context,e.status,e.statusText)},e.onerror=function(){t.error.call(t.context,e.status,e.statusText)},~["HEAD","GET"].indexOf(t.method.toUpperCase())||e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.data&&(t.data=T[t.requestType].call(e,t.data,!1)),t.setup.call(e,e),e.send(t.data)},E.requestType="detect",E.responseType="detect",r.registerAjaxType=function(t,e,r){r||"function"!=typeof e||(r=e,e=!1),T[t]=r,e&&(x[e]=t)},r.registerAjaxType("detect",function(t,e){var r,n="text";return e?(r=this.getResponseHeader("Content-Type")||"",r=r.split(";")[0].trim(),n=x[r]||"text"):t&&"object"==typeof t&&t.toString==={}.toString&&(n="json"),T[n].call(this,t,e)}),r.registerAjaxType("json","application/json",function(t,e){return e?JSON.parse(t):JSON.stringify(t)}),r.registerAjaxType("html","text/html",function(t,r){var n,i;return r?(i=new m,n=e.implementation.createHTMLDocument(),n.documentElement.innerHTML=t,i.push.apply(i,i.slice.call(n.body.children,0)),i):t.outerHTML}),r.registerAjaxType("xml","text/xml",i),r.registerAjaxType("xml","application/xml",i),r.fn.data="dataset"in e.body?function(t,e){var r,n;if(this.length){if(void 0===t)return this[0].dataset;if(void 0===e)return this[0].dataset[t];for(r=0,n=this.length;n>r;r++)this[r].dataset[t]=e;return this}}:function(t,e){var r,n,i="data-"+(t||"");if(this.length){if(void 0===t)return r={},[].forEach.call(this[0].attributes,function(t){return r[t.name]=t.value}),r;if(void 0===e)return this[0].attributes[i];for(r=0,n=this.length;n>r;r++)this[r].dataset[i]=e;return this}},r.data=function(t,e,n){r(t).data(e,n)},r.fn.on=r.fn.bind=h(function(t,e){this.addEventListener(t,e,!1)}),r.fn.off=r.fn.unbind=h(function(t,e){this.removeEventListener(t,e,!1)}),r.fn.trigger=function(t,r){var n,i=0,o=this.length;void 0===r&&(r={}),r.event=r;try{n=new CustomEvent(t,{detail:r})}catch(s){n=e.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,r)}for(;o>i;i++)this[i].dispatchEvent(n);return this},r.fn.is=function(){var t,r=e.body;return t=r.matches||r.matchesSelector||r.msMatchesSelector,t=t||r.mozMatchesSelector||r.webkitMatchesSelector||r.oMatchesSelector,function(e){var r,n,i=0,a=this.length;switch(typeof e){case"string":r=t;break;case"function":r=o;break;case"object":if(!(e instanceof Element))throw new Error("First parameter of z#is is invalid");r=s;default:throw new Error("First parameter of z#is is invalid")}for(;a>i;i++)if(n=r(this[i],e))return n;return!1}}(),r.fn.hide=h(function(){return this.style.display="none",this}),r.fn.show=h(function(){return this.style.display="",this}),r.fn.clone=function(t){var e=0;for((void 0===t||null===t)&&(t=!1);e<this.length;e++)this[e]=this[e].cloneNode(t);return this},r.fn.html=function(t){var e,r;if(void 0===t)return this[0].innerHTML;for(e=0,r=this.length;r>e;e++)this[e].innerHTML=t;return this},r.fn.text=function(t){var e,r;if(void 0===t)return this.textContent;for(e=0,r=this.length;r>e;e++)this[e].textContent=t;return this},r.fn.getAttr=function(t){if(!t)throw new Error("First parameter of z#getAttr is required");return this[0]&&this[0].getAttribute(t)},r.fn.setAttr=h(function(t,e){if(!t)throw new Error("First parameter of z#setAttr is required");if(void 0===e)throw new Error("Second parameter of z#setAttr is required");return this.setAttribute(t,e),this}),r.fn.attr=function(t,e){return void 0===e?this.getAttr(t):(this.setAttr(t,e),this)},r.fn.replaceWith=r.fn.replace=h(function(t){if(void 0===t)throw new Error("First parameter of z#replace is required");this.outerHTML=t}),"classList"in e.documentElement?(r.fn.addClass=h(function(t){this.classList.add(t)}),r.fn.removeClass=h(function(t){this.classList.remove(t)}),r.fn.toggleClass=h(function(t,e){return void 0===e?void this.classList.toggle(t):void this.classList[e?"add":"remove"](t)})):(r.fn.addClass=h(function(t){this.className+=" "+t}),r.fn.removeClass=h(function(t){this.className+=this.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","g")," ")}),r.fn.toggleClass=function(t,e){return this[e?"addClass":"removeClass"](t),this}),r.fn.append=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("beforeend",t);return this}for(t instanceof m&&(t=t[0]);r>e;e++)this[e].appendChild(t);return this},r.fn.prepend=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#prepend is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("afterbegin",t);return this}for(t instanceof m&&(t=t[0]);r>e;e++)this[e].insertBefore(t,this[e].firstChild);return this},r.fn.after=function(t){var e=0,r=this.length;if(void 0===t)throw new Error("First parameter of z#append is required.");if("string"==typeof t){for(;r>e;e++)this[e].insertAdjacentHTML("afterend",t);return this}for(t instanceof m&&(t=t[0]);r>e;e++)this[e].insertAdjacentHTML("afterend",t.outerHTML);return this},r.fn.css=function(t,e){var r=0,n=this.length;if(void 0===t)throw new Error("First parameter of z#css is required.");if(void 0===e)return getComputedStyle(this[0])[t];for(t=t.replace(/-./g,function(t){return t.substr(1).toUpperCase()});n>r;r++)this[r].style[t]=e;return this},r.fn.remove=h(function(){this.parentNode.removeChild(this)}),r.fn.empty=h(function(){this.innerHTML=""});var S,b={};r.registerSelector=function(t,e){if(!t||"string"!=typeof t)throw new Error("First parameter of z#registerSelector must be a string selector");if(!e||"function"!=typeof e)throw new Error("Second parameter of z#registerSelector must be a function");":"!==t[0]&&(t=":"+t),S=!1,b[t]=e},r.registerSelector(":first",function(t){return r(this.querySelector(t))}),r.registerSelector(":input",function(){function t(t){return~e.indexOf(t.tagName)}var e="INPUT,TEXTAREA,SELECT,BUTTON".split(",");return function(e){var r=new m;return r.push.apply(r,[].filter.call(this.querySelectorAll(e),t)),r}}()),r.fn.parent=p(function(){return this.parentNode}),r.fn.next=p(function(){return this.nextElementSibling}),r.fn.prev=r.fn.previous=p(function(){return this.previousElementSibling}),r.fn.siblings=p(function(){return[].filter.call(this.parentNode.children,function(t){return t!==this},this)}),r.fn.prevAll=p(function(){return d(this,"previousElementSibling")}),r.deepExtend=function A(t){var e,r,n=2;for("object"==typeof t?(r=t||{},t=1/0):(t=t===!0?1/0:0|t,r=arguments[1]||{});n<arguments.length;n++)if(e=arguments[n])for(var i in e)e.hasOwnProperty(i)&&(t&&"object"==typeof e[i]?A(t-1,r[i],e[i]):r[i]=e[i]);return r},r.extend=function(){return[].unshift.call(arguments,0),r.deepExtend.apply(null,arguments)},r.fn.each=h(function(t){return t.call(this,this),this}),r.queryString=function(t,e){var n,i,o,s=[];for(n in t)t.hasOwnProperty(n)&&(i=e?e+"["+n+"]":n,o=t[n],s.push(o&&"object"==typeof o?r.queryString(o,i):encodeURIComponent(i)+"="+encodeURIComponent(o)));return s.join("&")}}(window,document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiei5zbS5taW4uanMiLCJzb3VyY2VzIjpbIl9oZWFkZXIuanMiLCJfYmFzZS5qcyIsImFqYXguanMiLCJhamF4X3R5cGVzLmpzIiwiZGF0YS5qcyIsImV2ZW50cy5qcyIsImZpbHRlcmluZy5qcyIsIm1hbmlwdWxhdGlvbi5qcyIsInNlbGVjdG9ycy5qcyIsInNlbGVjdG9yc19jdXN0b20uanMiLCJ0cmF2ZXJzaW5nLmpzIiwidXRpbHMuanMiLCJfZm9vdGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQVVBLFNBQUEsRUFBQSxHQ1JBLFFBQUEsR0FBQSxFQUFBLEdBQ0EsR0FBQSxZQUFBLEdBQ0EsTUFBQSxFQUNBLElBQUEsWUFBQSxVQUFBLFlBQUEsU0FBQSxZQUFBLFVBQ0EsTUFBQSxJQUFBLEdBQUEsRUFDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLEVBQ0EsTUFBQSxJQUFBLEVBQ0EsSUFBQSxnQkFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLDZCQUdBLElBQUEsRUFBQSxDQUNBLElBQUEsRUFBQSxHQUNBLEtBQUEsSUFBQSxPQUFBLDhCQUdBLEdBQUEsRUFBQSxPQUVBLEdBQUEsQ0FHQSxPQUFBLEdBQUEsRUFBQSxHQUdBLFFBQUEsTUMrQkEsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBRUEsT0FBQSxHQUtBLEtBQUEsWUFDQSxLQUFBLGFBR0EsRUFBQSxHQUFBLFdBQ0EsRUFBQSxnQkFBQSxFQUFBLHFCQVRBLEVBQUEsR0FBQSxlQUNBLEVBQUEsa0JBQUEsSUM5REEsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxFQUFBLEdBR0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxNQUFBLEtBQUEsRUNGQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxHQUFBLEVBTUEsT0FKQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxFQUFBLE1BR0EsRUFHQSxRQUFBLEdBQUEsRUFBQSxHQUNBLE9BQUEsRUFBQSxRQUFBLE1BQUEsU0FBQSxHQUlBLEtBQUEsR0FDQSxJQUdBLEVBQUEsTUFBQSxHQUlBLEVBQUEsRUFBQSxHQUhBLEVBQUEsaUJBQUEsSUFSQSxFQUFBLGlCQUFBLEdBY0EsUUFBQSxHQUFBLEVBQUEsR0FNQSxJQUxBLEdBQUEsR0FBQSxFQUNBLEVBQUEsR0FBQSxHQUFBLEdBQ0EsRUFBQSxHQUNBLEVBQUEsRUFBQSxNQUFBLE9BRUEsRUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE1BQUEsR0FFQSxHQUtBLEdBQUEsRUFBQSxRQUFBLEVBQUEsS0FBQSxJQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFFQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxHQUFBLEtBQUEsRUFBQSxNQUdBLEVBQUEsS0FBQSxNQUFBLEVBQUEsS0FHQSxFQUFBLEVBQ0EsRUFBQSxJQWxCQSxHQUFBLEVBQUEsR0ErQkEsT0FWQSxLQUNBLEVBQUEsR0FBQSxHQUVBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxFQUFBLGlCQUFBLE1BR0EsRUFBQSxHQUdBLEVBR0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxPQUFBLEtBQUEsR0FBQSxLQUFBLEtBQUEsUUFBQSxLQUFBLEdBQ0EsR0FBQSxHQUFBLFFBQUEsS0FBQSxFQUFBLElBQUEsS0MzRUEsUUFBQSxHQUFBLEdBQ0EsTUFBQSxhQUFBLElBQ0EsRUFHQSxZQUFBLFVBQ0EsRUFHQSxnQkFBQSxJQUNBLEVBREEsT0FLQSxRQUFBLEdBQUEsR0FDQSxNQUFBLFlBSUEsSUFIQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEtBQUEsT0FFQSxFQUFBLEVBQUEsSUFDQSxFQUFBLE1BQUEsS0FBQSxHQUFBLFVBR0EsT0FBQSxPQUlBLFFBQUEsR0FBQSxHQUNBLE1BQUEsWUFNQSxJQUxBLEdBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxHQUFBLEdBRUEsRUFBQSxFQUFBLElBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLFdBRUEsSUFDQSxNQUFBLFFBQUEsSUFBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLE1BQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxHQUtBLE9BQUEsSUFJQSxRQUFBLEdBQUEsRUFBQSxHQUdBLElBRkEsR0FBQSxHQUFBLEdBQUEsR0FFQSxFQUFBLElBQUEsSUFBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLEVBR0EsT0FBQSxHSjFEQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBNEJBLEtBQ0EsRUFBQSxFQUFBLGNBQUEsVUFFQSxFQUFBLE1BQUEsTUFBQSxFQUNBLEVBQUEsTUFBQSxPQUFBLEVBQ0EsRUFBQSxNQUFBLFlBQUEsT0FFQSxFQUFBLEtBQUEsWUFBQSxHQUVBLEVBQUEsRUFBQSxjQUFBLE1BRUEsRUFBQSxLQUFBLFlBQUEsR0FDQSxNQUFBLEdBQ0EsRUFBQSxNQUlBLEVBQUEsRUFBQSxFQUNBLEVBQUEsR0FBQSxFQUFBLFVBQ0EsRUFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBRUEsRUFBQSxHQUFBLEtBQUEsU0FBQSxHQUNBLEdBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSxpREFHQSxPQUFBLEdBQUEsS0FBQSxHS3ZEQSxJQUFBLEdBQUEsRUFDQSxJQUVBLElBQ0EsT0FBQSxNQUNBLFlBQUEsT0FDQSxhQUFBLE9BQ0EsSUFBQSxFQUFBLFNBQUEsR0FDQSxNQUFBLEtBQ0EsS0FBQSxLQUNBLE1BQUEsRUFDQSxRQUFBLEVBQ0EsTUFBQSxHQUdBLEdBQ0EsS0FBQSxTQUFBLEdBQ0EsT0FBQSxHQUFBLElBQUEsS0FJQSxFQUFBLEtBQUEsU0FBQSxHQUNBLEdBQ0EsR0FBQSxHQUFBLGVBTUEsSUFKQSxFQUFBLEVBQUEsUUFDQSxRQUFBLEdBQ0EsRUFBQSxJQUVBLEVBQUEsRUFBQSxhQUNBLEtBQUEsSUFBQSxPQUFBLCtCQUNBLEtBQUEsRUFBQSxFQUFBLGNBQ0EsS0FBQSxJQUFBLE9BQUEsZ0NBR0EsR0FBQSxTQUFBLE9BQUEsT0FBQSxRQUFBLEVBQUEsT0FBQSxpQkFDQSxFQUFBLE1BQUEsRUFBQSxJQUFBLFFBQUEsS0FBQSxJQUFBLElBQ0EsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLE9BQ0EsRUFBQSxJQUFBLEVBQUEsSUFBQSxRQUFBLFdBQUEsT0FHQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxHQUVBLEVBQUEsT0FBQSxXQUNBLEdBQUEsRUFFQSxHQUFBLFFBQUEsS0FBQSxFQUFBLE9BQUEsS0FDQSxFQUFBLEVBQUEsRUFBQSxjQUFBLEtBQUEsRUFBQSxFQUFBLGNBQUEsR0FDQSxFQUFBLFFBQUEsS0FBQSxFQUFBLFFBQUEsSUFFQSxFQUFBLE1BQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsYUFJQSxFQUFBLFFBQUEsV0FDQSxFQUFBLE1BQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsZUFHQSxPQUFBLE9BQUEsUUFBQSxFQUFBLE9BQUEsZ0JBQ0EsRUFBQSxpQkFBQSxlQUFBLG9EQUdBLEVBQUEsT0FDQSxFQUFBLEtBQUEsRUFBQSxFQUFBLGFBQUEsS0FBQSxFQUFBLEVBQUEsTUFBQSxJQUdBLEVBQUEsTUFBQSxLQUFBLEVBQUEsR0FFQSxFQUFBLEtBQUEsRUFBQSxPSnBFQSxFQUFBLFlBQUEsU0FDQSxFQUFBLGFBQUEsU0FFQSxFQUFBLGlCQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsR0FBQSxrQkFBQSxLQUNBLEVBQUEsRUFDQSxHQUFBLEdBR0EsRUFBQSxHQUFBLEVBRUEsSUFDQSxFQUFBLEdBQUEsSUFJQSxFQUFBLGlCQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUNBLEVBQUEsTUFZQSxPQVZBLElBQ0EsRUFBQSxLQUFBLGtCQUFBLGlCQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLElBQUEsUUFFQSxHQUFBLGdCQUFBLElBQUEsRUFBQSxjQUFBLFdBQ0EsRUFBQSxRQUlBLEVBQUEsR0FBQSxLQUFBLEtBQUEsRUFBQSxLQUdBLEVBQUEsaUJBQUEsT0FBQSxtQkFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxVQUFBLEtBR0EsRUFBQSxpQkFBQSxPQUFBLFlBQUEsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsT0FBQSxJQUlBLEVBQUEsR0FBQSxHQUNBLEVBQUEsRUFBQSxlQUFBLHFCQUVBLEVBQUEsZ0JBQUEsVUFBQSxFQUVBLEVBQUEsS0FBQSxNQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsRUFBQSxLQUFBLFNBQUEsSUFFQSxHQVZBLEVBQUEsWUFhQSxFQUFBLGlCQUFBLE1BQUEsV0FBQSxHQUNBLEVBQUEsaUJBQUEsTUFBQSxrQkFBQSxHS3REQSxFQUFBLEdBQUEsS0FEQSxXQUFBLEdBQUEsS0FDQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsQ0FFQSxJQUFBLEtBQUEsT0FBQSxDQUlBLEdBQUEsU0FBQSxFQUNBLE1BQUEsTUFBQSxHQUFBLE9BQ0EsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLEdBQUEsUUFBQSxFQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxRQUFBLEdBQUEsQ0FHQSxPQUFBLFFBR0EsU0FBQSxFQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQ0EsRUFBQSxTQUFBLEdBQUEsR0FFQSxJQUFBLEtBQUEsT0FBQSxDQUlBLEdBQUEsU0FBQSxFQU9BLE1BTkEsU0FFQSxRQUFBLEtBQUEsS0FBQSxHQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxRQUdBLENBQ0EsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLEdBQUEsV0FBQSxFQUdBLEtBQUEsRUFBQSxFQUFBLEVBQUEsS0FBQSxPQUFBLEVBQUEsRUFBQSxJQUNBLEtBQUEsR0FBQSxRQUFBLEdBQUEsQ0FHQSxPQUFBLFFBSUEsRUFBQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxJQ2xEQSxFQUFBLEdBQUEsR0FBQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEtBQUEsaUJBQUEsRUFBQSxHQUFBLEtBR0EsRUFBQSxHQUFBLElBQUEsRUFBQSxHQUFBLE9BQUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxLQUFBLG9CQUFBLEVBQUEsR0FBQSxLQUdBLEVBQUEsR0FBQSxRQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsVUFBQSxJQUNBLE1BR0EsRUFBQSxNQUFBLENBRUEsS0FDQSxFQUFBLEdBQUEsYUFBQSxHQUNBLE9BQUEsSUFFQSxNQUFBLEdBQ0EsRUFBQSxFQUFBLFlBQUEsZUFDQSxFQUFBLGdCQUFBLEdBQUEsR0FBQSxFQUFBLEdBR0EsS0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsY0FBQSxFQUdBLE9BQUEsT0x4QkEsRUFBQSxHQUFBLEdBQUEsV0FDQSxHQUFBLEdBQ0EsRUFBQSxFQUFBLElBS0EsT0FIQSxHQUFBLEVBQUEsU0FBQSxFQUFBLGlCQUFBLEVBQUEsa0JBQ0EsRUFBQSxHQUFBLEVBQUEsb0JBQUEsRUFBQSx1QkFBQSxFQUFBLGlCQUVBLFNBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEVBQ0EsRUFBQSxLQUFBLE1BRUEsY0FBQSxJQUNBLElBQUEsU0FDQSxFQUFBLENBQ0EsTUFFQSxLQUFBLFdBQ0EsRUFBQSxDQUNBLE1BRUEsS0FBQSxTQUNBLEtBQUEsWUFBQSxVQUdBLEtBQUEsSUFBQSxPQUFBLHFDQUZBLEdBQUEsQ0FJQSxTQUNBLEtBQUEsSUFBQSxPQUFBLHNDQUlBLEtBQUEsRUFBQSxFQUFBLElBR0EsR0FGQSxFQUFBLEVBQUEsS0FBQSxHQUFBLEdBR0EsTUFBQSxFQUlBLFFBQUEsTU1oREEsRUFBQSxHQUFBLEtBQUEsRUFBQSxXQUVBLE1BREEsTUFBQSxNQUFBLFFBQUEsT0FDQSxPQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsV0FFQSxNQURBLE1BQUEsTUFBQSxRQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsTUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBTUEsTUFKQSxTQUFBLEdBQUEsT0FBQSxLQUNBLEdBQUEsR0FHQSxFQUFBLEtBQUEsT0FBQSxJQUNBLEtBQUEsR0FBQSxLQUFBLEdBQUEsVUFBQSxFQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLEdBQUEsU0FHQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEtBQUEsT0FBQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsVUFBQSxDQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLENBRUEsSUFBQSxTQUFBLEVBQ0EsTUFBQSxNQUFBLFdBR0EsS0FBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE9BQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFlBQUEsQ0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLElBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxPQUFBLE1BQUEsSUFBQSxLQUFBLEdBQUEsYUFBQSxJQUdBLEVBQUEsR0FBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDJDQUNBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDRDQUlBLE9BREEsTUFBQSxhQUFBLEVBQUEsR0FDQSxPQUdBLEVBQUEsR0FBQSxLQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsVUFBQSxFQUNBLEtBQUEsUUFBQSxJQUdBLEtBQUEsUUFBQSxFQUFBLEdBQ0EsT0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSwyQ0FHQSxNQUFBLFVBQUEsSUFHQSxhQUFBLEdBQUEsaUJBQ0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxTQUFBLEdBQ0EsS0FBQSxVQUFBLElBQUEsS0FHQSxFQUFBLEdBQUEsWUFBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFVBQUEsT0FBQSxLQUdBLEVBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxVQUFBLE1BQ0EsTUFBQSxVQUFBLE9BQUEsT0FJQSxNQUFBLFVBQUEsRUFBQSxNQUFBLFVBQUEsT0FHQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFNBQUEsR0FDQSxLQUFBLFdBQUEsSUFBQSxJQUdBLEVBQUEsR0FBQSxZQUFBLEVBQUEsU0FBQSxHQUNBLEtBQUEsV0FBQSxLQUFBLFVBQUEsUUFBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLFVBQUEsS0FBQSxPQUdBLEVBQUEsR0FBQSxZQUFBLFNBQUEsRUFBQSxHQUVBLE1BREEsTUFBQSxFQUFBLFdBQUEsZUFBQSxHQUNBLE9BSUEsRUFBQSxHQUFBLE9BQUEsU0FBQSxHQUNBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDJDQUdBLElBQUEsZ0JBQUEsR0FBQSxDQUNBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLG1CQUFBLFlBQUEsRUFHQSxPQUFBLE1BT0EsSUFKQSxZQUFBLEtBQ0EsRUFBQSxFQUFBLElBR0EsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLFlBQUEsRUFHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDRDQUdBLElBQUEsZ0JBQUEsR0FBQSxDQUNBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLG1CQUFBLGFBQUEsRUFHQSxPQUFBLE1BT0EsSUFKQSxZQUFBLEtBQ0EsRUFBQSxFQUFBLElBR0EsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLGFBQUEsRUFBQSxLQUFBLEdBQUEsV0FHQSxPQUFBLE9BR0EsRUFBQSxHQUFBLE1BQUEsU0FBQSxHQUNBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsS0FBQSxNQUVBLElBQUEsU0FBQSxFQUNBLEtBQUEsSUFBQSxPQUFBLDJDQUdBLElBQUEsZ0JBQUEsR0FBQSxDQUNBLEtBQUEsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLG1CQUFBLFdBQUEsRUFHQSxPQUFBLE1BT0EsSUFKQSxZQUFBLEtBQ0EsRUFBQSxFQUFBLElBR0EsRUFBQSxFQUFBLElBQ0EsS0FBQSxHQUFBLG1CQUFBLFdBQUEsRUFBQSxVQUdBLE9BQUEsT0FHQSxFQUFBLEdBQUEsSUFBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEtBQUEsTUFFQSxJQUFBLFNBQUEsRUFDQSxLQUFBLElBQUEsT0FBQSx3Q0FHQSxJQUFBLFNBQUEsRUFDQSxNQUFBLGtCQUFBLEtBQUEsSUFBQSxFQU1BLEtBSkEsRUFBQSxFQUFBLFFBQUEsTUFBQSxTQUFBLEdBQ0EsTUFBQSxHQUFBLE9BQUEsR0FBQSxnQkFHQSxFQUFBLEVBQUEsSUFDQSxLQUFBLEdBQUEsTUFBQSxHQUFBLENBSUEsT0FBQSxPQUdBLEVBQUEsR0FBQSxPQUFBLEVBQUEsV0FDQSxLQUFBLFdBQUEsWUFBQSxRQUdBLEVBQUEsR0FBQSxNQUFBLEVBQUEsV0FDQSxLQUFBLFVBQUEsSUx4T0EsSUFBQSxHQUNBLElNREEsR0FBQSxpQkFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLEdBQUEsZ0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSxrRUFDQSxLQUFBLEdBQUEsa0JBQUEsR0FDQSxLQUFBLElBQUEsT0FBQSw0REFHQSxPQUFBLEVBQUEsS0FDQSxFQUFBLElBQUEsR0FHQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLEdBR0EsRUFBQSxpQkFBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxjQUFBLE1BR0EsRUFBQSxpQkFBQSxTQUFBLFdBR0EsUUFBQSxHQUFBLEdBQ0EsT0FBQSxFQUFBLFFBQUEsRUFBQSxTQUhBLEdBQUEsR0FBQSwrQkFBQSxNQUFBLElBTUEsT0FBQSxVQUFBLEdBQ0EsR0FBQSxHQUFBLEdBQUEsRUFJQSxPQUZBLEdBQUEsS0FBQSxNQUFBLEtBQUEsT0FBQSxLQUFBLEtBQUEsaUJBQUEsR0FBQSxJQUVBLE9DL0JBLEVBQUEsR0FBQSxPQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEsYUFHQSxFQUFBLEdBQUEsS0FBQSxFQUFBLFdBQ0EsTUFBQSxNQUFBLHFCQUdBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FBQSxTQUFBLEVBQUEsV0FDQSxNQUFBLE1BQUEseUJBR0EsRUFBQSxHQUFBLFNBQUEsRUFBQSxXQUNBLFNBQUEsT0FBQSxLQUFBLEtBQUEsV0FBQSxTQUFBLFNBQUEsR0FDQSxNQUFBLEtBQUEsTUFDQSxRQUdBLEVBQUEsR0FBQSxRQUFBLEVBQUEsV0FDQSxNQUFBLEdBQUEsS0FBQSw0Qk4wQ0EsRUFBQSxXQUFBLFFBQUEsR0FBQSxHQUNBLEdBQUEsR0FBQSxFQUNBLEVBQUEsQ0FVQSxLQVJBLGdCQUFBLElBQ0EsRUFBQSxNQUNBLEVBQUEsTUFFQSxFQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsRUFDQSxFQUFBLFVBQUEsUUFHQSxFQUFBLFVBQUEsT0FBQSxJQUdBLEdBRkEsRUFBQSxVQUFBLEdBTUEsSUFBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsS0FDQSxHQUFBLGdCQUFBLEdBQUEsR0FDQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxJQUVBLEVBQUEsR0FBQSxFQUFBLEdBTUEsT0FBQSxJQUdBLEVBQUEsT0FBQSxXQUVBLFNBREEsUUFBQSxLQUFBLFVBQUEsR0FDQSxFQUFBLFdBQUEsTUFBQSxLQUFBLFlBR0EsRUFBQSxHQUFBLEtBQUEsRUFBQSxTQUFBLEdBRUEsTUFEQSxHQUFBLEtBQUEsS0FBQSxNQUNBLE9BR0EsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQ0EsSUFFQSxLQUFBLElBQUEsR0FDQSxFQUFBLGVBQUEsS0FFQSxFQURBLEVBQ0EsRUFBQSxJQUFBLEVBQUEsSUFFQSxFQUdBLEVBQUEsRUFBQSxHQUdBLEVBQUEsS0FEQSxHQUFBLGdCQUFBLEdBQ0EsRUFBQSxZQUFBLEVBQUEsR0FFQSxtQkFBQSxHQUFBLElBQUEsbUJBQUEsSUFLQSxPQUFBLEdBQUEsS0FBQSxPTzlIQSxPQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiB6LmpzIEphdmFTY3JpcHQgTGlicmFyeSB2QFZFUlNJT05cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ORVVSUy96LmpzXG4gKlxuICogQ29weXJpZ2h0IDIwMTQgTkVVUlMgTExDLCBLZXZpbiBKLiBNYXJ0aW4sIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL05FVVJTL3ouanMvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICpcbiAqIERhdGU6IEBEQVRFXG4gKi9cbjsoZnVuY3Rpb24gKHdpbmRvdywgZG9jdW1lbnQpIHtcbiIsInZhciB6QXJyYXksIF93aW5kb3csIF9kb2N1bWVudCwgaWZyYW1lO1xuXG5mdW5jdGlvbiB6KGVsZW0sIHNjb3BlKSB7XG5cdGlmIChlbGVtIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH0gZWxzZSBpZiAoZWxlbSBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgZWxlbSBpbnN0YW5jZW9mIFdpbmRvdyB8fCBlbGVtIGluc3RhbmNlb2YgRG9jdW1lbnQpIHtcblx0XHRyZXR1cm4gbmV3IHpBcnJheShlbGVtKTtcblx0fSBlbHNlIGlmIChlbGVtID09PSB1bmRlZmluZWQgfHwgZWxlbSA9PT0gbnVsbCkge1xuXHRcdHJldHVybiBuZXcgekFycmF5KCk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGVsZW0gIT09IFwic3RyaW5nXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgaXMgaW52YWxpZFwiKTtcblx0fVxuXG5cdGlmIChzY29wZSkge1xuXHRcdGlmICghX2NoZWNrVmFsaWRFbGVtZW50KHNjb3BlKSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBpcyBpbnZhbGlkXCIpO1xuXHRcdH1cblxuXHRcdHNjb3BlID0geihzY29wZSk7XG5cdH0gZWxzZSB7XG5cdFx0c2NvcGUgPSBfZG9jdW1lbnQ7XG5cdH1cblxuXHRyZXR1cm4gX2ZpbmQoc2NvcGUsIGVsZW0pO1xufVxuXG5mdW5jdGlvbiBub29wKCl7fVxuXG50cnkge1xuXHRpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuXG5cdGlmcmFtZS5zdHlsZS53aWR0aFx0XHRcdD0gMDtcblx0aWZyYW1lLnN0eWxlLmhlaWdodFx0XHRcdD0gMDtcblx0aWZyYW1lLnN0eWxlLmJvcmRlclN0eWxlXHQ9IFwibm9uZVwiO1xuXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtcblxuXHR6QXJyYXkgPSBpZnJhbWUuY29udGVudFdpbmRvdy5BcnJheTtcblxuXHRkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7XG59IGNhdGNoIChlKSB7XG5cdHpBcnJheSA9IEFycmF5O1xufVxuXG4vL3dpbmRvdy4kXHQ9IHo7XG53aW5kb3cuelx0PSB6O1xuei5mblx0XHQ9IHpBcnJheS5wcm90b3R5cGU7XG5fd2luZG93XHRcdD0geih3aW5kb3cpO1xuX2RvY3VtZW50XHQ9IHooZG9jdW1lbnQpO1xuXG56LmZuLmZpbmQgPSBmdW5jdGlvbiAoc3RyRWxlbSkge1xuXHRpZiAodHlwZW9mIHN0ckVsZW0gIT09IFwic3RyaW5nXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWF0ZXIgb2YgeiNmaW5kKCkgc2hvdWxkIGJlIGEgc3RyaW5nXCIpO1xuXHR9XG5cblx0cmV0dXJuIF9maW5kKHRoaXMsIHN0ckVsZW0pO1xufTtcbiIsInZhciBhamF4RGVmYXVsdHMsIGFqYXhUeXBlcyxcblx0YWpheE1pbWVzXHQ9IHt9XG5cbmFqYXhEZWZhdWx0cyA9IHtcblx0bWV0aG9kOiBcIkdFVFwiLFxuXHRyZXF1ZXN0VHlwZTogXCJ0ZXh0XCIsXG5cdHJlc3BvbnNlVHlwZTogXCJ0ZXh0XCIsXG5cdHVybDogd2luZG93LmxvY2F0aW9uICsgXCJcIixcblx0cXVlcnk6IG51bGwsXG5cdGRhdGE6IG51bGwsXG5cdHNldHVwOiBub29wLFxuXHRzdWNjZXNzOiBub29wLFxuXHRlcnJvcjogbm9vcFxufTtcblxuYWpheFR5cGVzID0ge1xuXHR0ZXh0OiBmdW5jdGlvbiAoZGF0YSkge1xuXHRcdHJldHVybiAoZGF0YSB8fCBcIlwiKSArIFwiXCI7XG5cdH1cbn07XG5cbnouYWpheCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdHZhciBkYXRhLFxuXHRcdHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdG9wdGlvbnMgPSB6LmV4dGVuZCh7XG5cdFx0Y29udGV4dDogcmVxXG5cdH0sIGFqYXhEZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0aWYgKCFhamF4VHlwZXNbb3B0aW9ucy5yZXF1ZXN0VHlwZV0pIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9wdGlvbiBgcmVxdWVzdFR5cGVgXCIpO1xuXHR9IGVsc2UgaWYgKCFhamF4VHlwZXNbb3B0aW9ucy5yZXNwb25zZVR5cGVdKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBvcHRpb24gYHJlc3BvbnNlVHlwZWBcIik7XG5cdH1cblxuXHRpZiAob3B0aW9ucy5xdWVyeSAmJiB+W1wiSEVBRFwiLCBcIkdFVFwiXS5pbmRleE9mKG9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCkpKSB7XG5cdFx0b3B0aW9ucy51cmxcdCs9IH5vcHRpb25zLnVybC5pbmRleE9mKFwiP1wiKSA/IFwiJlwiIDogXCI/XCI7XG5cdFx0b3B0aW9ucy51cmxcdCs9IHoucXVlcnlTdHJpbmcob3B0aW9ucy5xdWVyeSk7XG5cdFx0b3B0aW9ucy51cmxcdD0gb3B0aW9ucy51cmwucmVwbGFjZSgvKFxcP3wmKSYvZywgXCIkMVwiKTtcblx0fVxuXG5cdHJlcS5vcGVuKG9wdGlvbnMubWV0aG9kLCBvcHRpb25zLnVybCwgdHJ1ZSk7XG5cblx0cmVxLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgcmVzcDtcblxuXHRcdGlmIChyZXEuc3RhdHVzID49IDIwMCAmJiByZXEuc3RhdHVzIDwgNDAwKSB7XG5cdFx0XHRyZXNwID0gYWpheFR5cGVzW29wdGlvbnMucmVzcG9uc2VUeXBlXS5jYWxsKHJlcSwgcmVxLnJlc3BvbnNlVGV4dCwgdHJ1ZSk7XG5cdFx0XHRvcHRpb25zLnN1Y2Nlc3MuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlc3ApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvcHRpb25zLmVycm9yLmNhbGwob3B0aW9ucy5jb250ZXh0LCByZXEuc3RhdHVzLCByZXEuc3RhdHVzVGV4dCk7XG5cdFx0fVxuXHR9O1xuXG5cdHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXHRcdG9wdGlvbnMuZXJyb3IuY2FsbChvcHRpb25zLmNvbnRleHQsIHJlcS5zdGF0dXMsIHJlcS5zdGF0dXNUZXh0KTtcblx0fTtcblxuXHRpZiAoIX5bXCJIRUFEXCIsIFwiR0VUXCJdLmluZGV4T2Yob3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSkpIHtcblx0XHRyZXEuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiKTtcblx0fVxuXG5cdGlmIChvcHRpb25zLmRhdGEpIHtcblx0XHRvcHRpb25zLmRhdGEgPSBhamF4VHlwZXNbb3B0aW9ucy5yZXF1ZXN0VHlwZV0uY2FsbChyZXEsIG9wdGlvbnMuZGF0YSwgZmFsc2UpO1xuXHR9XG5cblx0b3B0aW9ucy5zZXR1cC5jYWxsKHJlcSwgcmVxKTtcblxuXHRyZXEuc2VuZChvcHRpb25zLmRhdGEpO1xufTtcbiIsImFqYXhEZWZhdWx0cy5yZXF1ZXN0VHlwZVx0PSBcImRldGVjdFwiO1xuYWpheERlZmF1bHRzLnJlc3BvbnNlVHlwZVx0PSBcImRldGVjdFwiO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUgPSBmdW5jdGlvbiAodHlwZSwgbWltZSwgZm4pIHtcblx0aWYgKCFmbiAmJiB0eXBlb2YgbWltZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0Zm5cdFx0PSBtaW1lO1xuXHRcdG1pbWVcdD0gZmFsc2U7XG5cdH1cblxuXHRhamF4VHlwZXNbdHlwZV0gPSBmbjtcblxuXHRpZiAobWltZSkge1xuXHRcdGFqYXhNaW1lc1ttaW1lXSA9IHR5cGU7XG5cdH1cbn07XG5cbnoucmVnaXN0ZXJBamF4VHlwZShcImRldGVjdFwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xuXHR2YXIgaGVhZGVyLFxuXHRcdHR5cGUgPSBcInRleHRcIjtcblxuXHRpZiAoaXNSZXNwb25zZSkge1xuXHRcdGhlYWRlclx0PSB0aGlzLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpIHx8IFwiXCIsXG5cdFx0aGVhZGVyXHQ9IGhlYWRlci5zcGxpdChcIjtcIilbMF0udHJpbSgpO1xuXHRcdHR5cGVcdD0gYWpheE1pbWVzW2hlYWRlcl0gfHwgXCJ0ZXh0XCI7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgPT09IFwib2JqZWN0XCIgJiYgZGF0YS50b1N0cmluZyA9PT0gKHt9KS50b1N0cmluZykge1xuXHRcdFx0dHlwZSA9IFwianNvblwiO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhamF4VHlwZXNbdHlwZV0uY2FsbCh0aGlzLCBkYXRhLCBpc1Jlc3BvbnNlKTtcbn0pO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJqc29uXCIsIFwiYXBwbGljYXRpb24vanNvblwiLCBmdW5jdGlvbiAoZGF0YSwgaXNSZXNwb25zZSkge1xuXHRyZXR1cm4gaXNSZXNwb25zZSA/IEpTT04ucGFyc2UoZGF0YSkgOiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbn0pO1xuXG56LnJlZ2lzdGVyQWpheFR5cGUoXCJodG1sXCIsIFwidGV4dC9odG1sXCIsIGZ1bmN0aW9uIChkYXRhLCBpc1Jlc3BvbnNlKSB7XG5cdHZhciBkb2MsIGFycjtcblxuXHRpZiAoIWlzUmVzcG9uc2UpIHtcblx0XHRyZXR1cm4gZGF0YS5vdXRlckhUTUw7XG5cdH1cblxuXHRhcnJcdD0gbmV3IHpBcnJheSgpO1xuXHRkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoKTtcblxuXHRkb2MuZG9jdW1lbnRFbGVtZW50LmlubmVySFRNTCA9IGRhdGE7XG5cblx0YXJyLnB1c2guYXBwbHkoYXJyLCBhcnIuc2xpY2UuY2FsbChkb2MuYm9keS5jaGlsZHJlbiwgMCkpO1xuXG5cdHJldHVybiBhcnI7XG59KTtcblxuei5yZWdpc3RlckFqYXhUeXBlKFwieG1sXCIsIFwidGV4dC94bWxcIiwgYWpheFhNTFBhcnNlcik7XG56LnJlZ2lzdGVyQWpheFR5cGUoXCJ4bWxcIiwgXCJhcHBsaWNhdGlvbi94bWxcIiwgYWpheFhNTFBhcnNlcik7XG5cbmZ1bmN0aW9uIGFqYXhYTUxQYXJzZXIoZGF0YSwgaXNSZXNwb25zZSkge1xuXHR2YXIgcGFyc2VyO1xuXG5cdGlmICghaXNSZXNwb25zZSkge1xuXHRcdHBhcnNlciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XG5cdFx0cmV0dXJuIHBhcnNlci5zZXJpYWxpemVUb1N0cmluZyhkYXRhKTtcblx0fVxuXG5cdGlmICh0aGlzLnJlc3BvbnNlWE1MKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVzcG9uc2VYTUw7XG5cdH1cblxuXHRwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdHJldHVybiBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKGRhdGEsIFwiYXBwbGljYXRpb24veG1sXCIpO1xufVxuIiwiaWYgKFwiZGF0YXNldFwiIGluIGRvY3VtZW50LmJvZHkpIHtcblx0ei5mbi5kYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHR2YXIgaSwgbDtcblxuXHRcdGlmICghdGhpcy5sZW5ndGgpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzWzBdLmRhdGFzZXQ7XG5cdFx0fSBlbHNlIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gdGhpc1swXS5kYXRhc2V0W2tleV07XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmRhdGFzZXRba2V5XSA9IHZhbHVlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufSBlbHNlIHtcblx0ei5mbi5kYXRhID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0XHR2YXIgaSwgbCxcblx0XHRcdGRhdGFLZXkgPSBcImRhdGEtXCIgKyAoa2V5IHx8IFwiXCIpO1xuXG5cdFx0aWYgKCF0aGlzLmxlbmd0aCkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aSA9IHt9O1xuXG5cdFx0XHRbXS5mb3JFYWNoLmNhbGwodGhpc1swXS5hdHRyaWJ1dGVzLCBmdW5jdGlvbiAoYXR0cikge1xuXHRcdFx0XHRyZXR1cm4gaVthdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gaTtcblx0XHR9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiB0aGlzWzBdLmF0dHJpYnV0ZXNbZGF0YUtleV07XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmRhdGFzZXRbZGF0YUtleV0gPSB2YWx1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcbn1cblxuei5kYXRhID0gZnVuY3Rpb24gKGVsZW0sIGtleSwgdmFsdWUpIHtcblx0eihlbGVtKS5kYXRhKGtleSwgdmFsdWUpO1xufTtcbiIsInouZm4ub24gPSB6LmZuLmJpbmQgPSBfZWFjaChmdW5jdGlvbiBfb24oZXZlbnRUeXBlLCBmbikge1xuXHR0aGlzLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBmbiwgZmFsc2UpO1xufSk7XG5cbnouZm4ub2ZmID0gei5mbi51bmJpbmQgPSBfZWFjaChmdW5jdGlvbiBfb2ZmKGV2ZW50VHlwZSwgZm4pIHtcblx0dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgZm4sIGZhbHNlKTtcbn0pO1xuXG56LmZuLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnRUeXBlLCBkYXRhKSB7XG5cdHZhciBldmVudCxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKGRhdGEgPT09IHVuZGVmaW5lZCkge1xuXHRcdGRhdGEgPSB7fTtcblx0fVxuXG5cdGRhdGEuZXZlbnQgPSBkYXRhO1xuXG5cdHRyeSB7XG5cdFx0ZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB7XG5cdFx0XHRkZXRhaWw6IGRhdGFcblx0XHR9KTtcblx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0ZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcblx0XHRldmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnRUeXBlLCB0cnVlLCB0cnVlLCBkYXRhKTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcbiIsImZ1bmN0aW9uIF9pc1dpdGhGdW5jdGlvbihlbGVtLCBmbikge1xuXHRyZXR1cm4gZm4uY2FsbChlbGVtLCBlbGVtKTtcbn1cblxuZnVuY3Rpb24gX2lzV2l0aEVsZW1lbnQoZWxlbTEsIGVsZW0yKSB7XG5cdHJldHVybiBlbGVtMSA9PT0gZWxlbTI7XG59XG5cbnouZm4uaXMgPSAoZnVuY3Rpb24gX2lzKCkge1xuXHR2YXIgbWF0Y2hlcyxcblx0XHRib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuXHRtYXRjaGVzXHQ9IGJvZHkubWF0Y2hlcyB8fCBib2R5Lm1hdGNoZXNTZWxlY3RvciB8fCBib2R5Lm1zTWF0Y2hlc1NlbGVjdG9yO1xuXHRtYXRjaGVzID0gbWF0Y2hlcyB8fCBib2R5Lm1vek1hdGNoZXNTZWxlY3RvciB8fCBib2R5LndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBib2R5Lm9NYXRjaGVzU2VsZWN0b3I7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuXHRcdHZhciBfaXNXaXRoLCByZXQsXG5cdFx0XHRpXHQ9IDAsXG5cdFx0XHRsXHQ9IHRoaXMubGVuZ3RoO1xuXG5cdFx0c3dpdGNoICh0eXBlb2Ygc2VsZWN0b3IpIHtcblx0XHRcdGNhc2UgXCJzdHJpbmdcIjpcblx0XHRcdFx0X2lzV2l0aCA9IG1hdGNoZXM7XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcImZ1bmN0aW9uXCI6XG5cdFx0XHRcdF9pc1dpdGggPSBfaXNXaXRoRnVuY3Rpb247XG5cdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIm9iamVjdFwiOlxuXHRcdFx0XHRpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG5cdFx0XHRcdFx0X2lzV2l0aCA9IF9pc1dpdGhFbGVtZW50O1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2lzIGlzIGludmFsaWRcIik7XG5cdFx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2lzIGlzIGludmFsaWRcIik7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cmV0ID0gX2lzV2l0aCh0aGlzW2ldLCBzZWxlY3Rvcik7XG5cblx0XHRcdGlmIChyZXQpIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH07XG59KSgpO1xuIiwiei5mbi5oaWRlID0gX2VhY2goZnVuY3Rpb24gaGlkZSgpIHtcblx0dGhpcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnouZm4uc2hvdyA9IF9lYWNoKGZ1bmN0aW9uIHNob3coKSB7XG5cdHRoaXMuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdHJldHVybiB0aGlzO1xufSk7XG5cbnouZm4uY2xvbmUgPSBmdW5jdGlvbiAoZGVlcCkge1xuXHR2YXIgaSA9IDA7XG5cblx0aWYgKGRlZXAgPT09IHVuZGVmaW5lZCB8fCBkZWVwID09PSBudWxsKSB7XG5cdFx0ZGVlcCA9IGZhbHNlO1xuXHR9XG5cblx0Zm9yICg7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dGhpc1tpXSA9IHRoaXNbaV0uY2xvbmVOb2RlKGRlZXApO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLmh0bWwgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGksIGw7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gdGhpc1swXS5pbm5lckhUTUw7XG5cdH1cblxuXHRmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmlubmVySFRNTCA9IHZhbHVlO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLnRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGksIGw7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gdGhpcy50ZXh0Q29udGVudDtcblx0fVxuXG5cdGZvciAoaSA9IDAsIGwgPSB0aGlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdHRoaXNbaV0udGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuei5mbi5nZXRBdHRyID0gZnVuY3Rpb24gKGtleSkge1xuXHRpZiAoIWtleSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2dldEF0dHIgaXMgcmVxdWlyZWRcIik7XG5cdH1cblxuXHRyZXR1cm4gdGhpc1swXSAmJiB0aGlzWzBdLmdldEF0dHJpYnV0ZShrZXkpO1xufTtcblxuei5mbi5zZXRBdHRyID0gX2VhY2goZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0aWYgKCFrZXkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNzZXRBdHRyIGlzIHJlcXVpcmVkXCIpO1xuXHR9IGVsc2UgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIG9mIHojc2V0QXR0ciBpcyByZXF1aXJlZFwiKTtcblx0fVxuXG5cdHRoaXMuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpO1xuXHRyZXR1cm4gdGhpcztcbn0pO1xuXG56LmZuLmF0dHIgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiB0aGlzLmdldEF0dHIoa2V5KTtcblx0fVxuXG5cdHRoaXMuc2V0QXR0cihrZXksIHZhbHVlKTtcblx0cmV0dXJuIHRoaXM7XG59O1xuXG56LmZuLnJlcGxhY2VXaXRoID0gei5mbi5yZXBsYWNlID0gX2VhY2goZnVuY3Rpb24gKHZhbHVlKSB7XG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojcmVwbGFjZSBpcyByZXF1aXJlZFwiKTtcblx0fVxuXG5cdHRoaXMub3V0ZXJIVE1MID0gdmFsdWU7XG59KTtcblxuaWYgKFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7XG5cdHouZm4uYWRkQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0fSk7XG5cblx0ei5mbi5yZW1vdmVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuXHRcdHRoaXMuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHR9KTtcblxuXHR6LmZuLnRvZ2dsZUNsYXNzID0gX2VhY2goZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCBmb3JjZSkge1xuXHRcdGlmIChmb3JjZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHR0aGlzLmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmNsYXNzTGlzdFtmb3JjZSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiXShjbGFzc05hbWUpO1xuXHR9KTtcbn0gZWxzZSB7XG5cdHouZm4uYWRkQ2xhc3MgPSBfZWFjaChmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcblx0XHR0aGlzLmNsYXNzTmFtZSArPSBcIiBcIiArIGNsYXNzTmFtZTtcblx0fSk7XG5cblx0ei5mbi5yZW1vdmVDbGFzcyA9IF9lYWNoKGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuXHRcdHRoaXMuY2xhc3NOYW1lICs9IHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cChcIihefFxcXFxiKVwiICsgY2xhc3NOYW1lICsgXCIoXFxcXGJ8JClcIiwgXCJnXCIpLCBcIiBcIik7XG5cdH0pO1xuXG5cdHouZm4udG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiAoY2xhc3NOYW1lLCBmb3JjZSkge1xuXHRcdHRoaXNbZm9yY2UgPyBcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCJdKGNsYXNzTmFtZSk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG5cbnouZm4uYXBwZW5kID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdHZhciBlbGVtZW50LFxuXHRcdGkgPSAwLFxuXHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2FwcGVuZCBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRpZiAodmFsdWUgaW5zdGFuY2VvZiB6QXJyYXkpIHtcblx0XHR2YWx1ZSA9IHZhbHVlWzBdO1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmFwcGVuZENoaWxkKHZhbHVlKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufVxuXG56LmZuLnByZXBlbmQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0dmFyIGVsZW1lbnQsXG5cdFx0aSA9IDAsXG5cdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgcGFyYW1ldGVyIG9mIHojcHJlcGVuZCBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG5cdFx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHRoaXNbaV0uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgdmFsdWUpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG5cblx0aWYgKHZhbHVlIGluc3RhbmNlb2YgekFycmF5KSB7XG5cdFx0dmFsdWUgPSB2YWx1ZVswXTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0dGhpc1tpXS5pbnNlcnRCZWZvcmUodmFsdWUsIHRoaXNbaV0uZmlyc3RDaGlsZCk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn1cblxuei5mbi5hZnRlciA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHR2YXIgZWxlbWVudCxcblx0XHRpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgb2YgeiNhcHBlbmQgaXMgcmVxdWlyZWQuXCIpO1xuXHR9XG5cblx0aWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCB2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cblxuXHRpZiAodmFsdWUgaW5zdGFuY2VvZiB6QXJyYXkpIHtcblx0XHR2YWx1ZSA9IHZhbHVlWzBdO1xuXHR9XG5cblx0Zm9yICg7IGkgPCBsOyBpKyspIHtcblx0XHR0aGlzW2ldLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCB2YWx1ZS5vdXRlckhUTUwpO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59XG5cbnouZm4uY3NzID0gZnVuY3Rpb24gKHJ1bGUsIHZhbHVlKSB7XG5cdHZhciBpID0gMCxcblx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0aWYgKHJ1bGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I2NzcyBpcyByZXF1aXJlZC5cIik7XG5cdH1cblxuXHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBnZXRDb21wdXRlZFN0eWxlKHRoaXNbMF0pW3J1bGVdO1xuXHR9IGVsc2Uge1xuXHRcdHJ1bGUgPSBydWxlLnJlcGxhY2UoLy0uL2csIGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHQgICAgcmV0dXJuIHJlc3VsdC5zdWJzdHIoMSkudG9VcHBlckNhc2UoKTtcblx0XHR9KTtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHR0aGlzW2ldLnN0eWxlW3J1bGVdID0gdmFsdWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59XG5cbnouZm4ucmVtb3ZlID0gX2VhY2goZnVuY3Rpb24gKCkge1xuXHR0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyk7XG59KTtcblxuei5mbi5lbXB0eSA9IF9lYWNoKGZ1bmN0aW9uICgpIHtcblx0dGhpcy5pbm5lckhUTUwgPSAnJztcbn0pO1xuIiwidmFyIF9zZWxlY3RvcnNDYWNoZSxcblx0X3NlbGVjdG9ycyA9IHt9O1xuXG5mdW5jdGlvbiBfZmluZChzY29wZSwgc3RyRWxlbSkge1xuXHR2YXIgcmV0ID0gbmV3IHpBcnJheSgpO1xuXG5cdHNjb3BlLmZvckVhY2goZnVuY3Rpb24gX2ZpbmRGb3JFYWNoKHNjb3BlZEVsZW0pIHtcblx0XHRyZXQucHVzaC5hcHBseShyZXQsIF9zZWxlY3Qoc2NvcGVkRWxlbSwgc3RyRWxlbSkpO1xuXHR9KTtcblxuXHRyZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBfc2VsZWN0KHNjb3BlZEVsZW0sIHN0ckVsZW0pIHtcblx0aWYgKCF+c3RyRWxlbS5pbmRleE9mKFwiOlwiKSB8fCBfc2VsZWN0b3JzQ2FjaGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoc3RyRWxlbSk7XG5cdH1cblxuXHRpZiAoX3NlbGVjdG9yc0NhY2hlID09PSBmYWxzZSkge1xuXHRcdF9nZW5lcmF0ZVNlbGVjdG9yc0NhY2hlKCk7XG5cdH1cblxuXHRpZiAoIXN0ckVsZW0ubWF0Y2goX3NlbGVjdG9yc0NhY2hlKSkge1xuXHRcdHJldHVybiBzY29wZWRFbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoc3RyRWxlbSk7XG5cdH1cblxuXHRyZXR1cm4gX3NlbGVjdDIoc2NvcGVkRWxlbSwgc3RyRWxlbSk7XG59XG5cbmZ1bmN0aW9uIF9zZWxlY3QyKHNjb3BlZEVsZW0sIHN0ckVsZW0pIHtcblx0dmFyIGVudHJ5LCBzZWxlY3RvcnMsXG5cdFx0c2NvcGVcdD0gbmV3IHpBcnJheShzY29wZWRFbGVtKSxcblx0XHRjdXJyZW50XHQ9IFwiXCIsXG5cdFx0ZW50cmllc1x0PSBzdHJFbGVtLnNwbGl0KC9cXHMrLyk7XG5cblx0d2hpbGUgKGVudHJ5ID0gZW50cmllcy5zaGlmdCgpKSB7XG5cdFx0c2VsZWN0b3JzID0gZW50cnkubWF0Y2goX3NlbGVjdG9yc0NhY2hlKTtcblxuXHRcdGlmICghc2VsZWN0b3JzKSB7XG5cdFx0XHRjdXJyZW50ICs9IGVudHJ5ICsgXCIgXCI7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRjdXJyZW50XHQrPSBlbnRyeS5yZXBsYWNlKF9zZWxlY3RvcnNDYWNoZSwgXCJcIikgfHwgXCIqXCI7XG5cdFx0ZW50cnlcdD0gbmV3IHpBcnJheSgpO1xuXG5cdFx0c2NvcGUuZm9yRWFjaChmdW5jdGlvbiBfc2VsZWN0Rm9yRWFjaChzY29wZWRFbGVtKSB7XG5cdFx0XHR2YXIgcmV0ID0gbmV3IHpBcnJheSgpO1xuXG5cdFx0XHRzZWxlY3RvcnMuZm9yRWFjaChmdW5jdGlvbiBzZWxlY3RvcnNGb3JFYWNoKHNlbGVjdG9yKSB7XG5cdFx0XHRcdHJldC5wdXNoLmFwcGx5KHJldCwgX3NlbGVjdG9yc1tzZWxlY3Rvcl0uY2FsbChzY29wZWRFbGVtLCBjdXJyZW50KSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZW50cnkucHVzaC5hcHBseShlbnRyeSwgcmV0KTtcblx0XHR9KTtcblxuXHRcdHNjb3BlXHQ9IGVudHJ5O1xuXHRcdGN1cnJlbnRcdD0gXCJcIjtcblx0fVxuXG5cdGlmIChjdXJyZW50KSB7XG5cdFx0ZW50cnkgPSBuZXcgekFycmF5KCk7XG5cblx0XHRzY29wZS5mb3JFYWNoKGZ1bmN0aW9uIGN1cnJlbnRGb3JFYWNoKHNjb3BlZEVsZW0pIHtcblx0XHRcdGVudHJ5LnB1c2guYXBwbHkoZW50cnksIHNjb3BlZEVsZW0ucXVlcnlTZWxlY3RvckFsbChjdXJyZW50KSk7XG5cdFx0fSk7XG5cblx0XHRzY29wZSA9IGVudHJ5O1xuXHR9XG5cblx0cmV0dXJuIHNjb3BlO1xufVxuXG5mdW5jdGlvbiBfZ2VuZXJhdGVTZWxlY3RvcnNDYWNoZSgpIHtcblx0dmFyIHNlbGVjdG9yc1x0PSBPYmplY3Qua2V5cyhfc2VsZWN0b3JzKS5qb2luKFwifFwiKS5yZXBsYWNlKC86L2csIFwiXCIpO1xuXHRfc2VsZWN0b3JzQ2FjaGVcdD0gbmV3IFJlZ0V4cChcIjooXCIgKyBzZWxlY3RvcnMgKyBcIilcIiwgXCJnXCIpO1xufVxuIiwiei5yZWdpc3RlclNlbGVjdG9yID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBmbikge1xuXHRpZiAoIXNlbGVjdG9yIHx8IHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBvZiB6I3JlZ2lzdGVyU2VsZWN0b3IgbXVzdCBiZSBhIHN0cmluZyBzZWxlY3RvclwiKTtcblx0fSBlbHNlIGlmICghZm4gfHwgdHlwZW9mIGZuICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIG9mIHojcmVnaXN0ZXJTZWxlY3RvciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG5cdH1cblxuXHRpZiAoc2VsZWN0b3JbMF0gIT09IFwiOlwiKSB7XG5cdFx0c2VsZWN0b3IgPSBcIjpcIiArIHNlbGVjdG9yO1xuXHR9XG5cblx0X3NlbGVjdG9yc0NhY2hlXHRcdFx0PSBmYWxzZTtcblx0X3NlbGVjdG9yc1tzZWxlY3Rvcl1cdD0gZm47XG59O1xuXG56LnJlZ2lzdGVyU2VsZWN0b3IoXCI6Zmlyc3RcIiwgZnVuY3Rpb24gc2VsZWN0b3JGaXJzdChxdWVyeSkge1xuXHRyZXR1cm4geih0aGlzLnF1ZXJ5U2VsZWN0b3IocXVlcnkpKTtcbn0pO1xuXG56LnJlZ2lzdGVyU2VsZWN0b3IoXCI6aW5wdXRcIiwgKGZ1bmN0aW9uIHNlbGVjdG9yRmlyc3QoKSB7XG5cdHZhciB0YWdzID0gXCJJTlBVVCxURVhUQVJFQSxTRUxFQ1QsQlVUVE9OXCIuc3BsaXQoXCIsXCIpO1xuXG5cdGZ1bmN0aW9uIGZpbHRlcihlbGVtZW50KSB7XG5cdFx0cmV0dXJuIH50YWdzLmluZGV4T2YoZWxlbWVudC50YWdOYW1lKTtcblx0fVxuXG5cdHJldHVybiBmdW5jdGlvbiBzZWxlY3RvcklucHV0KHF1ZXJ5KSB7XG5cdFx0dmFyIGVsZW1lbnRzID0gbmV3IHpBcnJheSgpO1xuXG5cdFx0ZWxlbWVudHMucHVzaC5hcHBseShlbGVtZW50cywgW10uZmlsdGVyLmNhbGwodGhpcy5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSwgZmlsdGVyKSk7XG5cblx0XHRyZXR1cm4gZWxlbWVudHM7XG5cdH07XG59KSgpKTtcbiIsInouZm4ucGFyZW50ID0gX2VhY2hOZXcoZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5wYXJlbnROb2RlO1xufSk7XG5cbnouZm4ubmV4dCA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xufSk7XG5cbnouZm4ucHJldiA9IHouZm4ucHJldmlvdXMgPSBfZWFjaE5ldyhmdW5jdGlvbiAoKSB7XG5cdHJldHVybiB0aGlzLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG59KTtcblxuei5mbi5zaWJsaW5ncyA9IF9lYWNoTmV3KGZ1bmN0aW9uICgpIHtcblx0cmV0dXJuIFtdLmZpbHRlci5jYWxsKHRoaXMucGFyZW50Tm9kZS5jaGlsZHJlbiwgZnVuY3Rpb24oY2hpbGQpIHtcblx0XHRyZXR1cm4gY2hpbGQgIT09IHRoaXM7XG5cdH0sIHRoaXMpO1xufSk7XG5cbnouZm4ucHJldkFsbCA9IF9lYWNoTmV3KGZ1bmN0aW9uKCl7XG5cdHJldHVybiBkaXIodGhpcywgXCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nXCIpO1xufSk7XG4iLCJmdW5jdGlvbiBfY2hlY2tWYWxpZEVsZW1lbnQoZWxlbSkge1xuXHRpZiAoZWxlbSBpbnN0YW5jZW9mIHpBcnJheSkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKGVsZW0gaW5zdGFuY2VvZiBFbGVtZW50KSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRpZiAodHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBfZWFjaChmbikge1xuXHRyZXR1cm4gZnVuY3Rpb24gcnVuRWFjaCgpIHtcblx0XHR2YXIgaVx0PSAwLFxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aDtcblxuXHRcdGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRmbi5hcHBseSh0aGlzW2ldLCBhcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBfZWFjaE5ldyhmbikge1xuXHRyZXR1cm4gZnVuY3Rpb24gcnVuRWFjaCgpIHtcblx0XHR2YXIgcmV0LFxuXHRcdFx0aVx0PSAwLFxuXHRcdFx0bFx0PSB0aGlzLmxlbmd0aCxcblx0XHRcdGFyclx0PSBuZXcgekFycmF5KCk7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0cmV0ID0gZm4uYXBwbHkodGhpc1tpXSwgYXJndW1lbnRzKTtcblxuXHRcdFx0aWYgKHJldCkge1xuXHRcdFx0XHRpZiAoQXJyYXkuaXNBcnJheShyZXQpICYmIHJldC5sZW5ndGgpIHtcblx0XHRcdFx0XHRhcnIucHVzaC5hcHBseShhcnIsIHJldCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXJyLnB1c2gocmV0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBhcnI7XG5cdH07XG59XG5cbmZ1bmN0aW9uIGRpcihlbGVtLCBrZXkpIHtcblx0dmFyIG1hdGNoZWQgPSBuZXcgekFycmF5KCk7XG5cblx0d2hpbGUgKGVsZW1ba2V5XSAmJiBlbGVtLm5vZGVUeXBlID09PSAxKSB7XG5cdFx0ZWxlbSA9IGVsZW1ba2V5XTtcblx0XHRtYXRjaGVkLnB1c2goZWxlbSk7XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlZDtcbn1cblxuei5kZWVwRXh0ZW5kID0gZnVuY3Rpb24gX2V4dGVuZChkZWVwKSB7XG5cdHZhciBvYmosIHRhcmdldCxcblx0XHRpID0gMjtcblxuXHRpZiAodHlwZW9mIGRlZXAgPT09IFwib2JqZWN0XCIpIHtcblx0XHR0YXJnZXRcdD0gZGVlcCB8fCB7fTtcblx0XHRkZWVwXHQ9IEluZmluaXR5O1xuXHR9IGVsc2Uge1xuXHRcdGRlZXBcdD0gZGVlcCA9PT0gdHJ1ZSA/IEluZmluaXR5IDogKGRlZXAgfCAwKTtcblx0XHR0YXJnZXRcdD0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHR9XG5cblx0Zm9yICg7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRvYmogPSBhcmd1bWVudHNbaV07XG5cblx0XHRpZiAoIW9iaikge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIga2V5IGluIG9iaikge1xuXHRcdFx0aWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdGlmIChkZWVwICYmIHR5cGVvZiBvYmpba2V5XSA9PT0gXCJvYmplY3RcIikge1xuXHRcdFx0XHRcdF9leHRlbmQoZGVlcCAtIDEsIHRhcmdldFtrZXldLCBvYmpba2V5XSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGFyZ2V0W2tleV0gPSBvYmpba2V5XTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG56LmV4dGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0W10udW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgMCk7XG5cdHJldHVybiB6LmRlZXBFeHRlbmQuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbn07XG5cbnouZm4uZWFjaCA9IF9lYWNoKGZ1bmN0aW9uIGVhY2goZm4pIHtcblx0Zm4uY2FsbCh0aGlzLCB0aGlzKTtcblx0cmV0dXJuIHRoaXM7XG59KTtcblxuei5xdWVyeVN0cmluZyA9IGZ1bmN0aW9uIChvYmosIHByZWZpeCkge1xuXHR2YXIgaSwga2V5LCB2YWwsXG5cdFx0c3RyaW5ncyA9IFtdO1xuXG5cdGZvciAoaSBpbiBvYmopIHtcblx0XHRpZiAob2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRpZiAocHJlZml4KSB7XG5cdFx0XHRcdGtleSA9IHByZWZpeCArIFwiW1wiICsgaSArIFwiXVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0a2V5ID0gaTtcblx0XHRcdH1cblxuXHRcdFx0dmFsID0gb2JqW2ldO1xuXG5cdFx0XHRpZiAodmFsICYmIHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0c3RyaW5ncy5wdXNoKHoucXVlcnlTdHJpbmcodmFsLCBrZXkpKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0cmluZ3MucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzdHJpbmdzLmpvaW4oXCImXCIpO1xufTtcbiIsIn0pKHdpbmRvdywgZG9jdW1lbnQpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9